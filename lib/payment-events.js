function a4_0x1f74(_0x3b96a2,_0x3636de){const _0x1b6e64=a4_0x1b6e();return a4_0x1f74=function(_0x1f7437,_0x4bdacb){_0x1f7437=_0x1f7437-0xe0;let _0x27cdcf=_0x1b6e64[_0x1f7437];return _0x27cdcf;},a4_0x1f74(_0x3b96a2,_0x3636de);}(function(_0x29da75,_0x322278){const _0x1bfa79=a4_0x1f74,_0xcdc93d=_0x29da75();while(!![]){try{const _0x23c67c=-parseInt(_0x1bfa79(0xea))/0x1*(-parseInt(_0x1bfa79(0xe9))/0x2)+parseInt(_0x1bfa79(0xed))/0x3*(parseInt(_0x1bfa79(0xe5))/0x4)+-parseInt(_0x1bfa79(0xee))/0x5+-parseInt(_0x1bfa79(0xe8))/0x6+-parseInt(_0x1bfa79(0xef))/0x7+-parseInt(_0x1bfa79(0xe6))/0x8*(-parseInt(_0x1bfa79(0xe2))/0x9)+parseInt(_0x1bfa79(0xe7))/0xa*(parseInt(_0x1bfa79(0xe0))/0xb);if(_0x23c67c===_0x322278)break;else _0xcdc93d['push'](_0xcdc93d['shift']());}catch(_0x477fa0){_0xcdc93d['push'](_0xcdc93d['shift']());}}}(a4_0x1b6e,0xa1d55));function a4_0x1b6e(){const _0x49d33=['2690uKCGll','4152024ZruUlj','16792uBIlnq','59JxhViO','close','type','261cCenAH','5888660qXKNqU','6018915cuWsvM','95183DHSemf','keys','136368CiuMuu','get','trim','25484sTWgvh','8JokFnq'];a4_0x1b6e=function(){return _0x49d33;};return a4_0x1b6e();}const connections=new Map();export function getConnectionsDebugInfo(){return{'totalConnections':connections['size'],'sessionIds':Array['from'](connections['keys']()),'timestamp':new Date()['toISOString']()};}export function addConnection(_0x45caac,_0x146a48){connections['set'](_0x45caac,{'controller':_0x146a48,'isClosed':![]}),console['log']('üîó\x20New\x20SSE\x20connection\x20added:',{'sessionId':_0x45caac,'totalConnections':connections['size'],'allSessionIds':Array['from'](connections['keys']())});}export function removeConnection(_0x5bd1ae,_0x5d240f=!![]){const _0x4abd9d=a4_0x1f74,_0x22fe32=connections['get'](_0x5bd1ae);if(_0x22fe32&&!_0x22fe32['isClosed'])try{_0x22fe32['controller'][_0x4abd9d(0xeb)](),_0x22fe32['isClosed']=!![],!_0x5d240f&&console['log']('üßπ\x20Connection\x20safely\x20closed\x20for\x20sessionId:',_0x5bd1ae);}catch(_0x5920d1){const _0x34b6c4=_0x5d240f?'Error\x20closing\x20SSE\x20controller\x20during\x20removal:':'Error\x20closing\x20SSE\x20controller:';console['error'](_0x34b6c4,_0x5920d1);}const _0x242041=connections['delete'](_0x5bd1ae);_0x5d240f&&console['log']('üîå\x20SSE\x20connection\x20removed:',{'sessionId':_0x5bd1ae,'existed':_0x242041,'remainingConnections':connections['size']});}export function sendPaymentUpdate(_0x24949c,_0x14a7b4){const _0x13d707=a4_0x1f74;console['log']('üîÑ\x20Attempting\x20to\x20send\x20payment\x20update:',{'sessionId':_0x24949c,'data':_0x14a7b4,'totalConnections':connections['size'],'hasConnection':connections['has'](_0x24949c)});const _0x1b83d8=connections['get'](_0x24949c);if(_0x1b83d8&&!_0x1b83d8['isClosed'])try{const _0x50d19d='data:\x20'+JSON['stringify'](_0x14a7b4)+'\x0a\x0a';_0x1b83d8['controller']['enqueue'](_0x50d19d),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully:',_0x50d19d[_0x13d707(0xe4)]()),(_0x14a7b4[_0x13d707(0xec)]==='payment_approved'||_0x14a7b4['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x24949c,![]);},0x3e8);}catch(_0x2a0025){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message:',_0x2a0025),removeConnection(_0x24949c,![]);}else console['warn']('‚ö†Ô∏è\x20No\x20active\x20SSE\x20connection\x20found\x20for\x20sessionId:',_0x24949c),console['log']('üìã\x20Available\x20connections:',Array['from'](connections[_0x13d707(0xe1)]())),setTimeout(()=>{const _0x16b5d1=_0x13d707,_0x1492da=connections[_0x16b5d1(0xe3)](_0x24949c);if(_0x1492da&&!_0x1492da['isClosed'])try{const _0x54ca4f='data:\x20'+JSON['stringify'](_0x14a7b4)+'\x0a\x0a';_0x1492da['controller']['enqueue'](_0x54ca4f),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully\x20on\x20retry:',_0x54ca4f['trim']()),(_0x14a7b4['type']==='payment_approved'||_0x14a7b4['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x24949c,![]);},0x3e8);}catch(_0x14856e){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message\x20on\x20retry:',_0x14856e),removeConnection(_0x24949c,![]);}else console['warn']('‚ö†Ô∏è\x20SSE\x20connection\x20still\x20not\x20found\x20after\x20retry\x20for\x20sessionId:',_0x24949c);},0x7d0);}