(function(_0x298781,_0x4cdc45){const _0x456b3e=a4_0x4413,_0x1fe533=_0x298781();while(!![]){try{const _0x259a14=-parseInt(_0x456b3e(0x74))/0x1+-parseInt(_0x456b3e(0x6e))/0x2*(-parseInt(_0x456b3e(0x6a))/0x3)+-parseInt(_0x456b3e(0x6d))/0x4+parseInt(_0x456b3e(0x75))/0x5+-parseInt(_0x456b3e(0x6f))/0x6+parseInt(_0x456b3e(0x67))/0x7*(parseInt(_0x456b3e(0x68))/0x8)+parseInt(_0x456b3e(0x6b))/0x9*(parseInt(_0x456b3e(0x6c))/0xa);if(_0x259a14===_0x4cdc45)break;else _0x1fe533['push'](_0x1fe533['shift']());}catch(_0x568597){_0x1fe533['push'](_0x1fe533['shift']());}}}(a4_0x2070,0x1adcb));function a4_0x4413(_0x56e52c,_0x2f9cc3){const _0x207004=a4_0x2070();return a4_0x4413=function(_0x4413d4,_0x5c012e){_0x4413d4=_0x4413d4-0x67;let _0x46cecd=_0x207004[_0x4413d4];return _0x46cecd;},a4_0x4413(_0x56e52c,_0x2f9cc3);}const connections=new Map();export function getConnectionsDebugInfo(){return{'totalConnections':connections['size'],'sessionIds':Array['from'](connections['keys']()),'timestamp':new Date()['toISOString']()};}function a4_0x2070(){const _0xe17a35=['4432NMgvXf','452028AHfIdZ','has','‚ùå\x20Error\x20sending\x20SSE\x20message:','‚úÖ\x20SSE\x20message\x20sent\x20successfully:','üßπ\x20Connection\x20safely\x20closed\x20for\x20sessionId:','193672tqlGuA','264160zWTGxp','14lhXDvK','138856kCiNMK','error','105efKQnf','9837lTLOYY','3590aXrhxx','713824Jqkhdk'];a4_0x2070=function(){return _0xe17a35;};return a4_0x2070();}export function addConnection(_0xb00967,_0x366bec){connections['set'](_0xb00967,{'controller':_0x366bec,'isClosed':![]}),console['log']('üîó\x20New\x20SSE\x20connection\x20added:',{'sessionId':_0xb00967,'totalConnections':connections['size'],'allSessionIds':Array['from'](connections['keys']())});}export function removeConnection(_0x31a0c0,_0x10d170=!![]){const _0x1a2b73=a4_0x4413,_0x3410fc=connections['get'](_0x31a0c0);if(_0x3410fc&&!_0x3410fc['isClosed'])try{_0x3410fc['controller']['close'](),_0x3410fc['isClosed']=!![],!_0x10d170&&console['log'](_0x1a2b73(0x73),_0x31a0c0);}catch(_0x20d238){const _0xe54cfd=_0x10d170?'Error\x20closing\x20SSE\x20controller\x20during\x20removal:':'Error\x20closing\x20SSE\x20controller:';console[_0x1a2b73(0x69)](_0xe54cfd,_0x20d238);}const _0x577022=connections['delete'](_0x31a0c0);_0x10d170&&console['log']('üîå\x20SSE\x20connection\x20removed:',{'sessionId':_0x31a0c0,'existed':_0x577022,'remainingConnections':connections['size']});}export function sendPaymentUpdate(_0x441593,_0x51fcb0){const _0x48eb2d=a4_0x4413;console['log']('üîÑ\x20Attempting\x20to\x20send\x20payment\x20update:',{'sessionId':_0x441593,'data':_0x51fcb0,'totalConnections':connections['size'],'hasConnection':connections[_0x48eb2d(0x70)](_0x441593)});const _0x34f2b8=connections['get'](_0x441593);if(_0x34f2b8&&!_0x34f2b8['isClosed'])try{const _0x162981='data:\x20'+JSON['stringify'](_0x51fcb0)+'\x0a\x0a';_0x34f2b8['controller']['enqueue'](_0x162981),console['log'](_0x48eb2d(0x72),_0x162981['trim']()),(_0x51fcb0['type']==='payment_approved'||_0x51fcb0['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x441593,![]);},0x3e8);}catch(_0x2418a7){console['error'](_0x48eb2d(0x71),_0x2418a7),removeConnection(_0x441593,![]);}else console['warn']('‚ö†Ô∏è\x20No\x20active\x20SSE\x20connection\x20found\x20for\x20sessionId:',_0x441593),console['log']('üìã\x20Available\x20connections:',Array['from'](connections['keys']())),setTimeout(()=>{const _0x25b71e=connections['get'](_0x441593);if(_0x25b71e&&!_0x25b71e['isClosed'])try{const _0x546e70='data:\x20'+JSON['stringify'](_0x51fcb0)+'\x0a\x0a';_0x25b71e['controller']['enqueue'](_0x546e70),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully\x20on\x20retry:',_0x546e70['trim']()),(_0x51fcb0['type']==='payment_approved'||_0x51fcb0['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x441593,![]);},0x3e8);}catch(_0x2f731a){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message\x20on\x20retry:',_0x2f731a),removeConnection(_0x441593,![]);}else console['warn']('‚ö†Ô∏è\x20SSE\x20connection\x20still\x20not\x20found\x20after\x20retry\x20for\x20sessionId:',_0x441593);},0x7d0);}