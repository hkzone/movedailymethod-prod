(function(_0x35561a,_0x1d5c4c){const _0x157781=a4_0x1e7d,_0x3158f0=_0x35561a();while(!![]){try{const _0x2877a2=-parseInt(_0x157781(0x127))/0x1+-parseInt(_0x157781(0x12d))/0x2*(-parseInt(_0x157781(0x128))/0x3)+-parseInt(_0x157781(0x133))/0x4*(parseInt(_0x157781(0x12a))/0x5)+parseInt(_0x157781(0x131))/0x6+-parseInt(_0x157781(0x12e))/0x7+-parseInt(_0x157781(0x134))/0x8+parseInt(_0x157781(0x132))/0x9;if(_0x2877a2===_0x1d5c4c)break;else _0x3158f0['push'](_0x3158f0['shift']());}catch(_0x4e67ff){_0x3158f0['push'](_0x3158f0['shift']());}}}(a4_0x457e,0xb4548));const connections=new Map();export function getConnectionsDebugInfo(){return{'totalConnections':connections['size'],'sessionIds':Array['from'](connections['keys']()),'timestamp':new Date()['toISOString']()};}export function addConnection(_0x92fe3,_0x3a9587){connections['set'](_0x92fe3,{'controller':_0x3a9587,'isClosed':![]}),console['log']('üîó\x20New\x20SSE\x20connection\x20added:',{'sessionId':_0x92fe3,'totalConnections':connections['size'],'allSessionIds':Array['from'](connections['keys']())});}function a4_0x1e7d(_0x57ed67,_0x4a5b1f){const _0x457eb1=a4_0x457e();return a4_0x1e7d=function(_0x1e7da3,_0x56363c){_0x1e7da3=_0x1e7da3-0x127;let _0x4ab0eb=_0x457eb1[_0x1e7da3];return _0x4ab0eb;},a4_0x1e7d(_0x57ed67,_0x4a5b1f);}export function removeConnection(_0x343534,_0x1d6f14=!![]){const _0x115ffd=a4_0x1e7d,_0x89ccbf=connections['get'](_0x343534);if(_0x89ccbf&&!_0x89ccbf[_0x115ffd(0x129)])try{_0x89ccbf['controller']['close'](),_0x89ccbf['isClosed']=!![],!_0x1d6f14&&console['log']('üßπ\x20Connection\x20safely\x20closed\x20for\x20sessionId:',_0x343534);}catch(_0xe05e70){const _0x2448bf=_0x1d6f14?'Error\x20closing\x20SSE\x20controller\x20during\x20removal:':'Error\x20closing\x20SSE\x20controller:';console['error'](_0x2448bf,_0xe05e70);}const _0x311ac9=connections['delete'](_0x343534);_0x1d6f14&&console['log']('üîå\x20SSE\x20connection\x20removed:',{'sessionId':_0x343534,'existed':_0x311ac9,'remainingConnections':connections[_0x115ffd(0x12c)]});}function a4_0x457e(){const _0x518076=['382289vlHxBx','6GWVFPU','isClosed','28145VJddfq','error','size','801848IwkohX','6422850BMiIwG','enqueue','payment_approved','8160240GKJEwC','14279202bfQRPH','188jqUKrA','11563456kindQP','has','üîÑ\x20Attempting\x20to\x20send\x20payment\x20update:'];a4_0x457e=function(){return _0x518076;};return a4_0x457e();}export function sendPaymentUpdate(_0x10675b,_0x4ccd18){const _0xe16ef7=a4_0x1e7d;console['log'](_0xe16ef7(0x136),{'sessionId':_0x10675b,'data':_0x4ccd18,'totalConnections':connections['size'],'hasConnection':connections[_0xe16ef7(0x135)](_0x10675b)});const _0x20cfcd=connections['get'](_0x10675b);if(_0x20cfcd&&!_0x20cfcd['isClosed'])try{const _0x514e80='data:\x20'+JSON['stringify'](_0x4ccd18)+'\x0a\x0a';_0x20cfcd['controller'][_0xe16ef7(0x12f)](_0x514e80),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully:',_0x514e80['trim']()),(_0x4ccd18['type']==='payment_approved'||_0x4ccd18['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x10675b,![]);},0x3e8);}catch(_0xc6eb58){console[_0xe16ef7(0x12b)]('‚ùå\x20Error\x20sending\x20SSE\x20message:',_0xc6eb58),removeConnection(_0x10675b,![]);}else console['warn']('‚ö†Ô∏è\x20No\x20active\x20SSE\x20connection\x20found\x20for\x20sessionId:',_0x10675b),console['log']('üìã\x20Available\x20connections:',Array['from'](connections['keys']())),setTimeout(()=>{const _0x296fd9=_0xe16ef7,_0x2c1cb1=connections['get'](_0x10675b);if(_0x2c1cb1&&!_0x2c1cb1['isClosed'])try{const _0x2ae292='data:\x20'+JSON['stringify'](_0x4ccd18)+'\x0a\x0a';_0x2c1cb1['controller'][_0x296fd9(0x12f)](_0x2ae292),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully\x20on\x20retry:',_0x2ae292['trim']()),(_0x4ccd18['type']===_0x296fd9(0x130)||_0x4ccd18['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x10675b,![]);},0x3e8);}catch(_0x42a178){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message\x20on\x20retry:',_0x42a178),removeConnection(_0x10675b,![]);}else console['warn']('‚ö†Ô∏è\x20SSE\x20connection\x20still\x20not\x20found\x20after\x20retry\x20for\x20sessionId:',_0x10675b);},0x7d0);}