function a4_0x479c(_0x46108a,_0x1cd975){const _0x34ed9c=a4_0x34ed();return a4_0x479c=function(_0x479c25,_0x1f9c51){_0x479c25=_0x479c25-0x1df;let _0x564494=_0x34ed9c[_0x479c25];return _0x564494;},a4_0x479c(_0x46108a,_0x1cd975);}function a4_0x34ed(){const _0x511fbd=['1933491poGAik','252tqVUgz','6EIEKMo','720181YhLftt','2562990ndRMwB','‚ùå\x20Error\x20sending\x20SSE\x20message\x20on\x20retry:','308916SIUgIE','payment_approved','11laFVtK','type','8IpzEPO','close','23735maYJbW','632578NdBxKW','2182590lcUBvM','isClosed'];a4_0x34ed=function(){return _0x511fbd;};return a4_0x34ed();}(function(_0x230aae,_0x23744a){const _0x3257f0=a4_0x479c,_0x2dd599=_0x230aae();while(!![]){try{const _0xcee04a=parseInt(_0x3257f0(0x1ed))/0x1+parseInt(_0x3257f0(0x1e6))/0x2+-parseInt(_0x3257f0(0x1e0))/0x3+-parseInt(_0x3257f0(0x1e1))/0x4*(-parseInt(_0x3257f0(0x1ec))/0x5)+-parseInt(_0x3257f0(0x1e2))/0x6*(parseInt(_0x3257f0(0x1e3))/0x7)+-parseInt(_0x3257f0(0x1ea))/0x8*(-parseInt(_0x3257f0(0x1ee))/0x9)+-parseInt(_0x3257f0(0x1e4))/0xa*(parseInt(_0x3257f0(0x1e8))/0xb);if(_0xcee04a===_0x23744a)break;else _0x2dd599['push'](_0x2dd599['shift']());}catch(_0x499174){_0x2dd599['push'](_0x2dd599['shift']());}}}(a4_0x34ed,0x4f540));const connections=new Map();export function getConnectionsDebugInfo(){return{'totalConnections':connections['size'],'sessionIds':Array['from'](connections['keys']()),'timestamp':new Date()['toISOString']()};}export function addConnection(_0x5952f1,_0x4dcdf7){connections['set'](_0x5952f1,{'controller':_0x4dcdf7,'isClosed':![]}),console['log']('üîó\x20New\x20SSE\x20connection\x20added:',{'sessionId':_0x5952f1,'totalConnections':connections['size'],'allSessionIds':Array['from'](connections['keys']())});}export function removeConnection(_0x29e369,_0x1f90ee=!![]){const _0x453b50=a4_0x479c,_0x9a9ccf=connections['get'](_0x29e369);if(_0x9a9ccf&&!_0x9a9ccf[_0x453b50(0x1df)])try{_0x9a9ccf['controller'][_0x453b50(0x1eb)](),_0x9a9ccf['isClosed']=!![],!_0x1f90ee&&console['log']('üßπ\x20Connection\x20safely\x20closed\x20for\x20sessionId:',_0x29e369);}catch(_0x14f360){const _0x24d13e=_0x1f90ee?'Error\x20closing\x20SSE\x20controller\x20during\x20removal:':'Error\x20closing\x20SSE\x20controller:';console['error'](_0x24d13e,_0x14f360);}const _0x1bb6e8=connections['delete'](_0x29e369);_0x1f90ee&&console['log']('üîå\x20SSE\x20connection\x20removed:',{'sessionId':_0x29e369,'existed':_0x1bb6e8,'remainingConnections':connections['size']});}export function sendPaymentUpdate(_0x2a5eac,_0xaaad91){const _0x23961b=a4_0x479c;console['log']('üîÑ\x20Attempting\x20to\x20send\x20payment\x20update:',{'sessionId':_0x2a5eac,'data':_0xaaad91,'totalConnections':connections['size'],'hasConnection':connections['has'](_0x2a5eac)});const _0x12f701=connections['get'](_0x2a5eac);if(_0x12f701&&!_0x12f701[_0x23961b(0x1df)])try{const _0x3a5971='data:\x20'+JSON['stringify'](_0xaaad91)+'\x0a\x0a';_0x12f701['controller']['enqueue'](_0x3a5971),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully:',_0x3a5971['trim']()),(_0xaaad91['type']===_0x23961b(0x1e7)||_0xaaad91[_0x23961b(0x1e9)]==='payment_failed')&&setTimeout(()=>{removeConnection(_0x2a5eac,![]);},0x3e8);}catch(_0x3f1416){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message:',_0x3f1416),removeConnection(_0x2a5eac,![]);}else console['warn']('‚ö†Ô∏è\x20No\x20active\x20SSE\x20connection\x20found\x20for\x20sessionId:',_0x2a5eac),console['log']('üìã\x20Available\x20connections:',Array['from'](connections['keys']())),setTimeout(()=>{const _0x53c6a6=_0x23961b,_0x2c1eee=connections['get'](_0x2a5eac);if(_0x2c1eee&&!_0x2c1eee['isClosed'])try{const _0x166377='data:\x20'+JSON['stringify'](_0xaaad91)+'\x0a\x0a';_0x2c1eee['controller']['enqueue'](_0x166377),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully\x20on\x20retry:',_0x166377['trim']()),(_0xaaad91['type']==='payment_approved'||_0xaaad91['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x2a5eac,![]);},0x3e8);}catch(_0x5d2770){console['error'](_0x53c6a6(0x1e5),_0x5d2770),removeConnection(_0x2a5eac,![]);}else console['warn']('‚ö†Ô∏è\x20SSE\x20connection\x20still\x20not\x20found\x20after\x20retry\x20for\x20sessionId:',_0x2a5eac);},0x7d0);}