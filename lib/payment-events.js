(function(_0x4e7fdb,_0x26640a){const _0x11cd23=a3_0x26ce,_0x12e80a=_0x4e7fdb();while(!![]){try{const _0x239270=-parseInt(_0x11cd23(0x1cc))/0x1+-parseInt(_0x11cd23(0x1d2))/0x2*(parseInt(_0x11cd23(0x1ce))/0x3)+-parseInt(_0x11cd23(0x1d0))/0x4+-parseInt(_0x11cd23(0x1d1))/0x5*(-parseInt(_0x11cd23(0x1c9))/0x6)+parseInt(_0x11cd23(0x1d3))/0x7*(parseInt(_0x11cd23(0x1d5))/0x8)+parseInt(_0x11cd23(0x1cf))/0x9+parseInt(_0x11cd23(0x1cd))/0xa;if(_0x239270===_0x26640a)break;else _0x12e80a['push'](_0x12e80a['shift']());}catch(_0x33ee5c){_0x12e80a['push'](_0x12e80a['shift']());}}}(a3_0x4578,0xddf44));const connections=new Map();export function getConnectionsDebugInfo(){return{'totalConnections':connections['size'],'sessionIds':Array['from'](connections['keys']()),'timestamp':new Date()['toISOString']()};}function a3_0x26ce(_0x57f601,_0x24343d){const _0x45783c=a3_0x4578();return a3_0x26ce=function(_0x26ce09,_0x146ea9){_0x26ce09=_0x26ce09-0x1c7;let _0x398ffd=_0x45783c[_0x26ce09];return _0x398ffd;},a3_0x26ce(_0x57f601,_0x24343d);}export function addConnection(_0x5c7218,_0x20751d){const _0x1bba9c=a3_0x26ce;connections['set'](_0x5c7218,{'controller':_0x20751d,'isClosed':![]}),console['log']('üîó\x20New\x20SSE\x20connection\x20added:',{'sessionId':_0x5c7218,'totalConnections':connections['size'],'allSessionIds':Array[_0x1bba9c(0x1ca)](connections['keys']())});}export function removeConnection(_0x4ccc33,_0x5029a5=!![]){const _0x47238c=connections['get'](_0x4ccc33);if(_0x47238c&&!_0x47238c['isClosed'])try{_0x47238c['controller']['close'](),_0x47238c['isClosed']=!![],!_0x5029a5&&console['log']('üßπ\x20Connection\x20safely\x20closed\x20for\x20sessionId:',_0x4ccc33);}catch(_0x2ceca3){const _0x4e51d7=_0x5029a5?'Error\x20closing\x20SSE\x20controller\x20during\x20removal:':'Error\x20closing\x20SSE\x20controller:';console['error'](_0x4e51d7,_0x2ceca3);}const _0x1bf8a2=connections['delete'](_0x4ccc33);_0x5029a5&&console['log']('üîå\x20SSE\x20connection\x20removed:',{'sessionId':_0x4ccc33,'existed':_0x1bf8a2,'remainingConnections':connections['size']});}function a3_0x4578(){const _0x1e69b9=['üîÑ\x20Attempting\x20to\x20send\x20payment\x20update:','controller','6fgpZcn','from','isClosed','562121LlzivG','17636770cOJalN','3740991yHDfVo','390672FUJytg','662316lzBHJa','3159485tmbSIE','2ExtGin','183169ilsXAL','size','136shqSsS'];a3_0x4578=function(){return _0x1e69b9;};return a3_0x4578();}export function sendPaymentUpdate(_0x364380,_0x33b9d8){const _0x124d7b=a3_0x26ce;console['log'](_0x124d7b(0x1c7),{'sessionId':_0x364380,'data':_0x33b9d8,'totalConnections':connections[_0x124d7b(0x1d4)],'hasConnection':connections['has'](_0x364380)});const _0x3b4d44=connections['get'](_0x364380);if(_0x3b4d44&&!_0x3b4d44[_0x124d7b(0x1cb)])try{const _0x2dfb66='data:\x20'+JSON['stringify'](_0x33b9d8)+'\x0a\x0a';_0x3b4d44[_0x124d7b(0x1c8)]['enqueue'](_0x2dfb66),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully:',_0x2dfb66['trim']()),(_0x33b9d8['type']==='payment_approved'||_0x33b9d8['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x364380,![]);},0x3e8);}catch(_0x578345){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message:',_0x578345),removeConnection(_0x364380,![]);}else console['warn']('‚ö†Ô∏è\x20No\x20active\x20SSE\x20connection\x20found\x20for\x20sessionId:',_0x364380),console['log']('üìã\x20Available\x20connections:',Array['from'](connections['keys']())),setTimeout(()=>{const _0x257050=_0x124d7b,_0x1cccee=connections['get'](_0x364380);if(_0x1cccee&&!_0x1cccee['isClosed'])try{const _0x39b697='data:\x20'+JSON['stringify'](_0x33b9d8)+'\x0a\x0a';_0x1cccee[_0x257050(0x1c8)]['enqueue'](_0x39b697),console['log']('‚úÖ\x20SSE\x20message\x20sent\x20successfully\x20on\x20retry:',_0x39b697['trim']()),(_0x33b9d8['type']==='payment_approved'||_0x33b9d8['type']==='payment_failed')&&setTimeout(()=>{removeConnection(_0x364380,![]);},0x3e8);}catch(_0x5bb895){console['error']('‚ùå\x20Error\x20sending\x20SSE\x20message\x20on\x20retry:',_0x5bb895),removeConnection(_0x364380,![]);}else console['warn']('‚ö†Ô∏è\x20SSE\x20connection\x20still\x20not\x20found\x20after\x20retry\x20for\x20sessionId:',_0x364380);},0x7d0);}