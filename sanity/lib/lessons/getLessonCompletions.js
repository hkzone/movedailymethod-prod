(function(_0x25d2b8,_0x40f472){const _0x4bfb5b=a15_0x2bdc,_0x510ec5=_0x25d2b8();while(!![]){try{const _0x4f598a=-parseInt(_0x4bfb5b(0xee))/0x1*(parseInt(_0x4bfb5b(0xe5))/0x2)+parseInt(_0x4bfb5b(0xe7))/0x3+-parseInt(_0x4bfb5b(0xe9))/0x4*(-parseInt(_0x4bfb5b(0xef))/0x5)+-parseInt(_0x4bfb5b(0xe6))/0x6+-parseInt(_0x4bfb5b(0xed))/0x7*(-parseInt(_0x4bfb5b(0xe8))/0x8)+parseInt(_0x4bfb5b(0xeb))/0x9+-parseInt(_0x4bfb5b(0xf0))/0xa;if(_0x4f598a===_0x40f472)break;else _0x510ec5['push'](_0x510ec5['shift']());}catch(_0x2b7262){_0x510ec5['push'](_0x510ec5['shift']());}}}(a15_0x3fcc,0xa58da));import{defineQuery}from'groq';import{sanityFetch}from'../live';function a15_0x2bdc(_0x2b5819,_0x4969b7){const _0x3fccb9=a15_0x3fcc();return a15_0x2bdc=function(_0x2bdc57,_0x1c06e9){_0x2bdc57=_0x2bdc57-0xe5;let _0x24052e=_0x3fccb9[_0x2bdc57];return _0x24052e;},a15_0x2bdc(_0x2b5819,_0x4969b7);}function a15_0x3fcc(){const _0x4e0f6b=['938232tHjPTK','length','221102MHYIXR','1pTFWNd','75QtLTUK','6054070SMWMul','3354JPCzXO','7458276XvxSZr','1617687axmKYg','312PsgDtX','174108GZOgYJ','{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'];a15_0x3fcc=function(){return _0x4e0f6b;};return a15_0x3fcc();}export async function getLessonCompletions(_0x7b1345,_0x31ceb7){const _0x35a2a4=a15_0x2bdc,_0x5aeeb4=defineQuery(_0x35a2a4(0xea)),_0x4d7123=await sanityFetch({'query':_0x5aeeb4,'params':{'studentId':_0x7b1345,'courseId':_0x31ceb7}}),{course:_0x2a1988,completedLessons:_0x491877}=_0x4d7123['data'],_0x201b6e=_0x2a1988?.['modules']?.['map'](_0x2829be=>{const _0x7dbf6c=_0x2829be['lessons']?.['length']||0x0,_0x5dbd4b=_0x491877['filter'](_0x3f3c4a=>_0x3f3c4a['module']?.['_id']===_0x2829be['_id'])['length'];return{'moduleId':_0x2829be['_id'],'title':_0x2829be['title'],'progress':_0x7dbf6c>0x0?_0x5dbd4b/_0x7dbf6c*0x64:0x0,'completedLessons':_0x5dbd4b,'totalLessons':_0x7dbf6c};}),_0x5794ea=_0x2a1988?.['modules']?.['reduce']((_0x2239e8,_0x57efbf)=>_0x2239e8+(_0x57efbf?.['lessons']?.[_0x35a2a4(0xec)]||0x0),0x0)||0x0,_0x28cc8f=_0x491877?.['length']||0x0,_0x2086cc=_0x5794ea>0x0?_0x28cc8f/_0x5794ea*0x64:0x0;return{'completedLessons':_0x491877||[],'moduleProgress':_0x201b6e||[],'courseProgress':_0x2086cc};}