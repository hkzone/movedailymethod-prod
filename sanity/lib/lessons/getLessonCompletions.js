function a12_0x39ab(_0x211bfc,_0xecf7e5){const _0x25411a=a12_0x2541();return a12_0x39ab=function(_0x39ab44,_0x377aa5){_0x39ab44=_0x39ab44-0x15c;let _0x39b5ad=_0x25411a[_0x39ab44];if(a12_0x39ab['fSlHQy']===undefined){var _0x46b087=function(_0xb3e91b){const _0x3340b3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x32c64c='',_0x2f738f='';for(let _0x100c0d=0x0,_0xd2e6ee,_0x2d50bd,_0x41f791=0x0;_0x2d50bd=_0xb3e91b['charAt'](_0x41f791++);~_0x2d50bd&&(_0xd2e6ee=_0x100c0d%0x4?_0xd2e6ee*0x40+_0x2d50bd:_0x2d50bd,_0x100c0d++%0x4)?_0x32c64c+=String['fromCharCode'](0xff&_0xd2e6ee>>(-0x2*_0x100c0d&0x6)):0x0){_0x2d50bd=_0x3340b3['indexOf'](_0x2d50bd);}for(let _0x2238de=0x0,_0x495a2f=_0x32c64c['length'];_0x2238de<_0x495a2f;_0x2238de++){_0x2f738f+='%'+('00'+_0x32c64c['charCodeAt'](_0x2238de)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2f738f);};a12_0x39ab['FGuqON']=_0x46b087,_0x211bfc=arguments,a12_0x39ab['fSlHQy']=!![];}const _0x3c70d8=_0x25411a[0x0],_0x397b18=_0x39ab44+_0x3c70d8,_0x4151c0=_0x211bfc[_0x397b18];return!_0x4151c0?(_0x39b5ad=a12_0x39ab['FGuqON'](_0x39b5ad),_0x211bfc[_0x397b18]=_0x39b5ad):_0x39b5ad=_0x4151c0,_0x39b5ad;},a12_0x39ab(_0x211bfc,_0xecf7e5);}function a12_0x2541(){const _0x14c878=['ohDts2PbyG','DgL0Bgu','mJG1ntuXmNjhD1bOua','mtH2uezRr0G','CMvKDwnL','mZu0nJGZndbovKTADNK','nJu2nJKYvxv3rK96','mMrJAu5vsG','zMLSDgvY','otq0mtqZmKfLBKv5AW','BgvZC29UCW','BgvUz3rO','mtC2mtGWnurfzKDhyq','mJK5mZuXnvbVBu5pzG','mtm1otm1n0jXsKntBa','Bw9KDwXLCW','x2LK'];a12_0x2541=function(){return _0x14c878;};return a12_0x2541();}(function(_0x2c51a5,_0x35f721){const _0x1ce47d=a12_0x39ab,_0x275908=_0x2c51a5();while(!![]){try{const _0x564b5b=parseInt(_0x1ce47d(0x162))/0x1*(-parseInt(_0x1ce47d(0x163))/0x2)+parseInt(_0x1ce47d(0x16a))/0x3*(-parseInt(_0x1ce47d(0x15c))/0x4)+parseInt(_0x1ce47d(0x168))/0x5*(-parseInt(_0x1ce47d(0x15f))/0x6)+parseInt(_0x1ce47d(0x169))/0x7+parseInt(_0x1ce47d(0x15e))/0x8+-parseInt(_0x1ce47d(0x165))/0x9+parseInt(_0x1ce47d(0x161))/0xa;if(_0x564b5b===_0x35f721)break;else _0x275908['push'](_0x275908['shift']());}catch(_0x413a42){_0x275908['push'](_0x275908['shift']());}}}(a12_0x2541,0xa1b55));import{defineQuery}from'groq';import{sanityFetch}from'../live';export async function getLessonCompletions(_0xb3e91b,_0x3340b3){const _0x3adbdf=a12_0x39ab,_0x32c64c=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x2f738f=await sanityFetch({'query':_0x32c64c,'params':{'studentId':_0xb3e91b,'courseId':_0x3340b3}}),{course:_0x100c0d,completedLessons:_0xd2e6ee}=_0x2f738f['data'],_0x2d50bd=_0x100c0d?.[_0x3adbdf(0x16b)]?.['map'](_0x36090f=>{const _0x35b8e8=_0x3adbdf,_0x47304a=_0x36090f[_0x35b8e8(0x166)]?.['length']||0x0,_0x17381f=_0xd2e6ee[_0x35b8e8(0x164)](_0x543fbd=>_0x543fbd['module']?.['_id']===_0x36090f['_id'])['length'];return{'moduleId':_0x36090f[_0x35b8e8(0x16c)],'title':_0x36090f[_0x35b8e8(0x15d)],'progress':_0x47304a>0x0?_0x17381f/_0x47304a*0x64:0x0,'completedLessons':_0x17381f,'totalLessons':_0x47304a};}),_0x41f791=_0x100c0d?.['modules']?.[_0x3adbdf(0x160)]((_0xfc21e6,_0x1b0c1a)=>_0xfc21e6+(_0x1b0c1a?.[_0x3adbdf(0x166)]?.[_0x3adbdf(0x167)]||0x0),0x0)||0x0,_0x2238de=_0xd2e6ee?.['length']||0x0,_0x495a2f=_0x41f791>0x0?_0x2238de/_0x41f791*0x64:0x0;return{'completedLessons':_0xd2e6ee||[],'moduleProgress':_0x2d50bd||[],'courseProgress':_0x495a2f};}