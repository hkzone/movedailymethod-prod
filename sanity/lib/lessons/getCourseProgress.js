(function(_0x274ccb,_0xb997b3){const _0x5c5d3c=a9_0x54e1,_0x3a2a20=_0x274ccb();while(!![]){try{const _0x26193f=parseInt(_0x5c5d3c(0x1e5))/0x1+parseInt(_0x5c5d3c(0x1de))/0x2*(parseInt(_0x5c5d3c(0x1df))/0x3)+parseInt(_0x5c5d3c(0x1e3))/0x4*(-parseInt(_0x5c5d3c(0x1e4))/0x5)+parseInt(_0x5c5d3c(0x1dd))/0x6*(parseInt(_0x5c5d3c(0x1dc))/0x7)+parseInt(_0x5c5d3c(0x1e2))/0x8+-parseInt(_0x5c5d3c(0x1e1))/0x9*(parseInt(_0x5c5d3c(0x1db))/0xa)+-parseInt(_0x5c5d3c(0x1e6))/0xb*(parseInt(_0x5c5d3c(0x1e0))/0xc);if(_0x26193f===_0xb997b3)break;else _0x3a2a20['push'](_0x3a2a20['shift']());}catch(_0x38f996){_0x3a2a20['push'](_0x3a2a20['shift']());}}}(a9_0x1e51,0x36764));import{defineQuery}from'groq';import{sanityFetch}from'../live';function a9_0x1e51(){const _0xba9d45=['6phQWnr','412278QckHuN','12ufmwvH','639783apEwUh','1072416aMcPKS','1151944eAKOqX','5EcJLge','183671ApUbxZ','3865851fIebmj','10xqmLCh','63WLOsEp','135726zjptGu'];a9_0x1e51=function(){return _0xba9d45;};return a9_0x1e51();}import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';function a9_0x54e1(_0x12f86a,_0x161ef2){const _0x1e5194=a9_0x1e51();return a9_0x54e1=function(_0x54e100,_0x4b7c1f){_0x54e100=_0x54e100-0x1db;let _0x28d24a=_0x1e5194[_0x54e100];return _0x28d24a;},a9_0x54e1(_0x12f86a,_0x161ef2);}export async function getCourseProgress(_0x139cb7,_0x4cb42c){const _0x4163b2=await getStudentByClerkId(_0x139cb7);if(!_0x4163b2?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x47d47c=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x3ccf2f=await sanityFetch({'query':_0x47d47c,'params':{'studentId':_0x4163b2['data']['_id'],'courseId':_0x4cb42c}}),{completedLessons:completedLessons=[],course:_0x5a8e84}=_0x3ccf2f['data'],_0xd96b87=calculateCourseProgress(_0x5a8e84?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0xd96b87};}