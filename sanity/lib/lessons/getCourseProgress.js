(function(_0x5dc051,_0x5688a5){const _0x12a65b=a12_0x1a10,_0x3e8ac5=_0x5dc051();while(!![]){try{const _0x400c74=-parseInt(_0x12a65b(0xe9))/0x1*(parseInt(_0x12a65b(0xe7))/0x2)+parseInt(_0x12a65b(0xe4))/0x3+parseInt(_0x12a65b(0xe3))/0x4+parseInt(_0x12a65b(0xe5))/0x5+-parseInt(_0x12a65b(0xe6))/0x6+parseInt(_0x12a65b(0xe2))/0x7*(parseInt(_0x12a65b(0xe0))/0x8)+parseInt(_0x12a65b(0xea))/0x9*(parseInt(_0x12a65b(0xe1))/0xa);if(_0x400c74===_0x5688a5)break;else _0x3e8ac5['push'](_0x3e8ac5['shift']());}catch(_0x1639d6){_0x3e8ac5['push'](_0x3e8ac5['shift']());}}}(a12_0x1b02,0xa8464));function a12_0x1b02(){const _0x17360d=['{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}','16UVWvmf','214330XWejPn','270011EYAZcF','1799824PqWWZV','1826145gVmIYe','3296045AmxJoz','7482408yRVnHf','2516hkJBJO','data','944lglsSl','558rjLHnU'];a12_0x1b02=function(){return _0x17360d;};return a12_0x1b02();}import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';function a12_0x1a10(_0x2e5946,_0x56c665){const _0x1b0207=a12_0x1b02();return a12_0x1a10=function(_0x1a109c,_0x5ca271){_0x1a109c=_0x1a109c-0xdf;let _0x43553b=_0x1b0207[_0x1a109c];return _0x43553b;},a12_0x1a10(_0x2e5946,_0x56c665);}export async function getCourseProgress(_0x425b80,_0x4a7ab7){const _0x5e17c4=a12_0x1a10,_0x34c5fd=await getStudentByClerkId(_0x425b80);if(!_0x34c5fd?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x22478c=defineQuery(_0x5e17c4(0xdf)),_0x213d30=await sanityFetch({'query':_0x22478c,'params':{'studentId':_0x34c5fd[_0x5e17c4(0xe8)]['_id'],'courseId':_0x4a7ab7}}),{completedLessons:completedLessons=[],course:_0x263680}=_0x213d30['data'],_0x4094e7=calculateCourseProgress(_0x263680?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x4094e7};}