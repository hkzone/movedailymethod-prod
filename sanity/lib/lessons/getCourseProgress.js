(function(_0x3fc802,_0x45b288){const _0x185e11=a86_0x5786,_0x1908f1=_0x3fc802();while(!![]){try{const _0x21531e=-parseInt(_0x185e11(0xe2))/0x1*(-parseInt(_0x185e11(0xee))/0x2)+parseInt(_0x185e11(0xe4))/0x3*(parseInt(_0x185e11(0xf5))/0x4)+parseInt(_0x185e11(0xe5))/0x5+-parseInt(_0x185e11(0xe7))/0x6+parseInt(_0x185e11(0xf1))/0x7+parseInt(_0x185e11(0xe9))/0x8*(parseInt(_0x185e11(0xe1))/0x9)+-parseInt(_0x185e11(0xed))/0xa;if(_0x21531e===_0x45b288)break;else _0x1908f1['push'](_0x1908f1['shift']());}catch(_0x3f2e85){_0x1908f1['push'](_0x1908f1['shift']());}}}(a86_0x196f,0x69765));const a86_0x478274=(function(){const _0x10fe24={'MoFCT':function(_0x1df35b,_0x5591b1){return _0x1df35b!==_0x5591b1;}};let _0x10c0ac=!![];return function(_0x59bf40,_0x437992){const _0x3e0d23={'vzagF':function(_0x437829,_0x16c07d){return _0x10fe24['MoFCT'](_0x437829,_0x16c07d);}},_0x480e9a=_0x10c0ac?function(){const _0x533c25=a86_0x5786;if(_0x437992){if(_0x3e0d23[_0x533c25(0xe6)](_0x533c25(0xec),_0x533c25(0xf0))){const _0xa8515=_0x437992['apply'](_0x59bf40,arguments);return _0x437992=null,_0xa8515;}else{const _0x5d6b86=_0x37f196?function(){const _0x47d145=_0x533c25;if(_0x4a3e9a){const _0x2c8510=_0x869873[_0x47d145(0xf6)](_0x34130f,arguments);return _0x337858=null,_0x2c8510;}}:function(){};return _0x4d3bec=![],_0x5d6b86;}}}:function(){};return _0x10c0ac=![],_0x480e9a;};}()),a86_0x5e70d4=a86_0x478274(this,function(){const _0x2e3b11=a86_0x5786,_0x1d442c={'UnKPA':_0x2e3b11(0xdf)};return a86_0x5e70d4[_0x2e3b11(0xef)]()['search'](_0x1d442c[_0x2e3b11(0xf7)])['toString']()[_0x2e3b11(0xe3)](a86_0x5e70d4)[_0x2e3b11(0xea)](_0x2e3b11(0xdf));});a86_0x5e70d4();function a86_0x196f(){const _0x1efa09=['mty0ndC2mg9Sugzrtq','C2vHCMnO','u3r1zgvUDcbUB3qGzM91BMq','B1fiAhy','odG0otq2mhDuzKreDa','mKLTqLvquG','Dg9tDhjPBMC','Ae1ACe8','mZa5odC2mejrwNzyzG','x2LK','qNHKA28','Bw9KDwXLCW','mtuYogLADNH5zW','yxbWBhK','vw5luee','kcGOlISPkYKRksSK','zgf0yq','oxnUCgT0va','mZyWmJuZyxP1qM9j','y29UC3rYDwn0B3i','ndK5nxHKq1jfyG','oteXmJe1vvjTzgzo','DNPHz0y','mZa1oti5mM53Ehvyyq','vNzpuKu'];a86_0x196f=function(){return _0x1efa09;};return a86_0x196f();}import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';function a86_0x5786(_0xda0d9a,_0x2d7a6e){const _0x3d5b4d=a86_0x196f();return a86_0x5786=function(_0x5e70d4,_0x478274){_0x5e70d4=_0x5e70d4-0xdf;let _0x196f0a=_0x3d5b4d[_0x5e70d4];if(a86_0x5786['GZxBXO']===undefined){var _0x5786b3=function(_0x44658b){const _0x22c88b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x280d92='',_0x21ff5b='',_0x115557=_0x280d92+_0x5786b3;for(let _0x5f0fe4=0x0,_0x7edce2,_0x3e5cf3,_0x4e8282=0x0;_0x3e5cf3=_0x44658b['charAt'](_0x4e8282++);~_0x3e5cf3&&(_0x7edce2=_0x5f0fe4%0x4?_0x7edce2*0x40+_0x3e5cf3:_0x3e5cf3,_0x5f0fe4++%0x4)?_0x280d92+=_0x115557['charCodeAt'](_0x4e8282+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x7edce2>>(-0x2*_0x5f0fe4&0x6)):_0x5f0fe4:0x0){_0x3e5cf3=_0x22c88b['indexOf'](_0x3e5cf3);}for(let _0x37f196=0x0,_0x36c2ed=_0x280d92['length'];_0x37f196<_0x36c2ed;_0x37f196++){_0x21ff5b+='%'+('00'+_0x280d92['charCodeAt'](_0x37f196)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x21ff5b);};a86_0x5786['slUWrt']=_0x5786b3,_0xda0d9a=arguments,a86_0x5786['GZxBXO']=!![];}const _0x50f8ad=_0x3d5b4d[0x0],_0xeb60e8=_0x5e70d4+_0x50f8ad,_0x3aae4d=_0xda0d9a[_0xeb60e8];if(!_0x3aae4d){const _0x1983de=function(_0x123aab){this['sBlzDM']=_0x123aab,this['ASPQhB']=[0x1,0x0,0x0],this['vGCqVl']=function(){return'newState';},this['ahqUSE']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['NugSpf']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1983de['prototype']['IkPuMb']=function(){const _0x4ce667=new RegExp(this['ahqUSE']+this['NugSpf']),_0x4d3bec=_0x4ce667['test'](this['vGCqVl']['toString']())?--this['ASPQhB'][0x1]:--this['ASPQhB'][0x0];return this['OjXdzm'](_0x4d3bec);},_0x1983de['prototype']['OjXdzm']=function(_0x4a3e9a){if(!Boolean(~_0x4a3e9a))return _0x4a3e9a;return this['OnFWJM'](this['sBlzDM']);},_0x1983de['prototype']['OnFWJM']=function(_0x1ae8df){for(let _0x2900eb=0x0,_0x2f0a48=this['ASPQhB']['length'];_0x2900eb<_0x2f0a48;_0x2900eb++){this['ASPQhB']['push'](Math['round'](Math['random']())),_0x2f0a48=this['ASPQhB']['length'];}return _0x1ae8df(this['ASPQhB'][0x0]);},new _0x1983de(a86_0x5786)['IkPuMb'](),_0x196f0a=a86_0x5786['slUWrt'](_0x196f0a),_0xda0d9a[_0xeb60e8]=_0x196f0a;}else _0x196f0a=_0x3aae4d;return _0x196f0a;},a86_0x5786(_0xda0d9a,_0x2d7a6e);}export async function getCourseProgress(_0x32e980,_0x4a3f73){const _0x1eb1c0=a86_0x5786,_0x1f5e82={'VvORE':_0x1eb1c0(0xeb),'dYmbI':function(_0x1fec16,_0x54cf2b){return _0x1fec16(_0x54cf2b);},'Bxdko':function(_0x24f528,_0x4fc4ad,_0x86781d){return _0x24f528(_0x4fc4ad,_0x86781d);}},_0x2218bd=await getStudentByClerkId(_0x32e980);if(!_0x2218bd?.[_0x1eb1c0(0xe0)]?.['_id'])throw new Error(_0x1f5e82[_0x1eb1c0(0xe8)]);const _0x4fc30f=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x18bb2b=await _0x1f5e82['dYmbI'](sanityFetch,{'query':_0x4fc30f,'params':{'studentId':_0x2218bd['data'][_0x1eb1c0(0xf2)],'courseId':_0x4a3f73}}),{completedLessons:completedLessons=[],course:_0x5dafde}=_0x18bb2b['data'],_0x180f11=_0x1f5e82[_0x1eb1c0(0xf3)](calculateCourseProgress,_0x5dafde?.[_0x1eb1c0(0xf4)]||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x180f11};}