function a12_0x5267(_0x11c489,_0x386edc){const _0x5b422a=a12_0x5b42();return a12_0x5267=function(_0x5267e9,_0x27d3e1){_0x5267e9=_0x5267e9-0x135;let _0x34ac92=_0x5b422a[_0x5267e9];return _0x34ac92;},a12_0x5267(_0x11c489,_0x386edc);}(function(_0x2f18fc,_0x3b8128){const _0x3daa4c=a12_0x5267,_0x41d77e=_0x2f18fc();while(!![]){try{const _0x3e9924=-parseInt(_0x3daa4c(0x13a))/0x1*(-parseInt(_0x3daa4c(0x139))/0x2)+parseInt(_0x3daa4c(0x13b))/0x3*(-parseInt(_0x3daa4c(0x137))/0x4)+-parseInt(_0x3daa4c(0x13d))/0x5*(parseInt(_0x3daa4c(0x13c))/0x6)+-parseInt(_0x3daa4c(0x140))/0x7*(-parseInt(_0x3daa4c(0x138))/0x8)+parseInt(_0x3daa4c(0x13e))/0x9+parseInt(_0x3daa4c(0x13f))/0xa+parseInt(_0x3daa4c(0x136))/0xb;if(_0x3e9924===_0x3b8128)break;else _0x41d77e['push'](_0x41d77e['shift']());}catch(_0x3f4036){_0x41d77e['push'](_0x41d77e['shift']());}}}(a12_0x5b42,0x5b39f));import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a12_0x5b42(){const _0xda2088=['modules','493295YguTZI','53920EVgRNV','1290064fdDQjT','222yBmUFY','274mrkzxk','45fIYWMt','210642ttwwoh','60bEgDZJ','4468680BhtcMA','1028520xAHnOK','14nzzvlv'];a12_0x5b42=function(){return _0xda2088;};return a12_0x5b42();}import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0xae396c,_0x332213){const _0x1060bf=a12_0x5267,_0x252a3c=await getStudentByClerkId(_0xae396c);if(!_0x252a3c?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x273375=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x308bb8=await sanityFetch({'query':_0x273375,'params':{'studentId':_0x252a3c['data']['_id'],'courseId':_0x332213}}),{completedLessons:completedLessons=[],course:_0x2951a4}=_0x308bb8['data'],_0x4e76fc=calculateCourseProgress(_0x2951a4?.[_0x1060bf(0x135)]||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x4e76fc};}