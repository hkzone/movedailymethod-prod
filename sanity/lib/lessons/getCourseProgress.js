(function(_0x2efa69,_0x2e2aae){const _0x2d838d=a12_0x572b,_0x40da3b=_0x2efa69();while(!![]){try{const _0x25cecf=parseInt(_0x2d838d(0xd9))/0x1*(parseInt(_0x2d838d(0xd4))/0x2)+parseInt(_0x2d838d(0xd0))/0x3*(parseInt(_0x2d838d(0xd5))/0x4)+-parseInt(_0x2d838d(0xdb))/0x5*(parseInt(_0x2d838d(0xd1))/0x6)+-parseInt(_0x2d838d(0xd2))/0x7+parseInt(_0x2d838d(0xcf))/0x8*(parseInt(_0x2d838d(0xdc))/0x9)+parseInt(_0x2d838d(0xd6))/0xa*(-parseInt(_0x2d838d(0xd7))/0xb)+-parseInt(_0x2d838d(0xd8))/0xc*(-parseInt(_0x2d838d(0xd3))/0xd);if(_0x25cecf===_0x2e2aae)break;else _0x40da3b['push'](_0x40da3b['shift']());}catch(_0x11bbd1){_0x40da3b['push'](_0x40da3b['shift']());}}}(a12_0x18ec,0xd5bf4));import{defineQuery}from'groq';function a12_0x572b(_0xbf6deb,_0x2dd845){const _0x18ecac=a12_0x18ec();return a12_0x572b=function(_0x572b5f,_0x46ced1){_0x572b5f=_0x572b5f-0xcf;let _0x5f30c6=_0x18ecac[_0x572b5f];return _0x5f30c6;},a12_0x572b(_0xbf6deb,_0x2dd845);}import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a12_0x18ec(){const _0x50d680=['68ujQMZk','5075430PTxZUI','11sPvuMB','5812896OVJPww','6yVgIWK','Student\x20not\x20found','710MNlsGD','63cCUORU','251472nUprgY','137571LSMEbz','19974skURcl','5475120ZXXzmV','13HYXZte','384638xiqCub'];a12_0x18ec=function(){return _0x50d680;};return a12_0x18ec();}import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x1454d4,_0x69d26b){const _0xb180d0=a12_0x572b,_0xdf30bc=await getStudentByClerkId(_0x1454d4);if(!_0xdf30bc?.['data']?.['_id'])throw new Error(_0xb180d0(0xda));const _0x491910=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x3cd058=await sanityFetch({'query':_0x491910,'params':{'studentId':_0xdf30bc['data']['_id'],'courseId':_0x69d26b}}),{completedLessons:completedLessons=[],course:_0x2d1281}=_0x3cd058['data'],_0x3d85ea=calculateCourseProgress(_0x2d1281?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x3d85ea};}