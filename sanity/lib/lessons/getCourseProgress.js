(function(_0x3558ae,_0x1d02bc){const _0x5a8fa5=a9_0x1fbe,_0x276610=_0x3558ae();while(!![]){try{const _0x2ca885=parseInt(_0x5a8fa5(0x77))/0x1*(parseInt(_0x5a8fa5(0x70))/0x2)+parseInt(_0x5a8fa5(0x76))/0x3+parseInt(_0x5a8fa5(0x74))/0x4+parseInt(_0x5a8fa5(0x73))/0x5+parseInt(_0x5a8fa5(0x72))/0x6*(-parseInt(_0x5a8fa5(0x71))/0x7)+parseInt(_0x5a8fa5(0x6f))/0x8+parseInt(_0x5a8fa5(0x75))/0x9;if(_0x2ca885===_0x1d02bc)break;else _0x276610['push'](_0x276610['shift']());}catch(_0x32cb98){_0x276610['push'](_0x276610['shift']());}}}(a9_0x455c,0x25fdd));function a9_0x1fbe(_0x17645f,_0x5d6ab0){const _0x455c9e=a9_0x455c();return a9_0x1fbe=function(_0x1fbe10,_0x12bd3e){_0x1fbe10=_0x1fbe10-0x6f;let _0x304c5a=_0x455c9e[_0x1fbe10];return _0x304c5a;},a9_0x1fbe(_0x17645f,_0x5d6ab0);}import{defineQuery}from'groq';function a9_0x455c(){const _0x26fcbb=['7334LeVyHG','21hsqduH','491826epSEBe','522360zkUeDI','690360RuckDR','90981lSwUpA','97158fQpRDz','11FQIzPf','333056goeXBf'];a9_0x455c=function(){return _0x26fcbb;};return a9_0x455c();}import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x50c6bb,_0x5130f0){const _0x31df9b=await getStudentByClerkId(_0x50c6bb);if(!_0x31df9b?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x2d055f=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x565524=await sanityFetch({'query':_0x2d055f,'params':{'studentId':_0x31df9b['data']['_id'],'courseId':_0x5130f0}}),{completedLessons:completedLessons=[],course:_0x493c4a}=_0x565524['data'],_0x1c2998=calculateCourseProgress(_0x493c4a?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x1c2998};}