function a9_0x4c7b(){const _0x12af4b=['18yOyLfR','26413145FdPgqQ','1201218BxQjNd','105RLvpQf','337939OlaVam','276968qAmdsK','184scBDMi','1014420xqchsN','{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}','31462aDSHYw','135olNjPk','5023272WBgLgt'];a9_0x4c7b=function(){return _0x12af4b;};return a9_0x4c7b();}(function(_0x162fe1,_0x305e60){const _0x21828e=a9_0x2f61,_0x576bef=_0x162fe1();while(!![]){try{const _0x452104=-parseInt(_0x21828e(0x161))/0x1+parseInt(_0x21828e(0x15c))/0x2*(-parseInt(_0x21828e(0x15d))/0x3)+parseInt(_0x21828e(0x164))/0x4*(-parseInt(_0x21828e(0x162))/0x5)+parseInt(_0x21828e(0x15e))/0x6+parseInt(_0x21828e(0x163))/0x7*(parseInt(_0x21828e(0x165))/0x8)+-parseInt(_0x21828e(0x15f))/0x9*(parseInt(_0x21828e(0x166))/0xa)+parseInt(_0x21828e(0x160))/0xb;if(_0x452104===_0x305e60)break;else _0x576bef['push'](_0x576bef['shift']());}catch(_0x55f716){_0x576bef['push'](_0x576bef['shift']());}}}(a9_0x4c7b,0xbf16b));import{defineQuery}from'groq';function a9_0x2f61(_0x52989b,_0x47e986){const _0x4c7b92=a9_0x4c7b();return a9_0x2f61=function(_0x2f6133,_0x597716){_0x2f6133=_0x2f6133-0x15c;let _0x348387=_0x4c7b92[_0x2f6133];return _0x348387;},a9_0x2f61(_0x52989b,_0x47e986);}import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0xc23017,_0x11b912){const _0x28e2c7=a9_0x2f61,_0x3395f7=await getStudentByClerkId(_0xc23017);if(!_0x3395f7?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x99b91a=defineQuery(_0x28e2c7(0x167)),_0x35eaf7=await sanityFetch({'query':_0x99b91a,'params':{'studentId':_0x3395f7['data']['_id'],'courseId':_0x11b912}}),{completedLessons:completedLessons=[],course:_0x32d92e}=_0x35eaf7['data'],_0x2562d4=calculateCourseProgress(_0x32d92e?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x2562d4};}