function a12_0x271a(_0x2d2973,_0x415140){const _0x21aff1=a12_0x21af();return a12_0x271a=function(_0x271ab7,_0x2860bd){_0x271ab7=_0x271ab7-0xe4;let _0x28e56b=_0x21aff1[_0x271ab7];return _0x28e56b;},a12_0x271a(_0x2d2973,_0x415140);}(function(_0x192d6b,_0x1ae7d5){const _0x28680f=a12_0x271a,_0x2413b1=_0x192d6b();while(!![]){try{const _0x25869d=parseInt(_0x28680f(0xed))/0x1+parseInt(_0x28680f(0xe5))/0x2*(-parseInt(_0x28680f(0xea))/0x3)+-parseInt(_0x28680f(0xe6))/0x4+parseInt(_0x28680f(0xeb))/0x5*(parseInt(_0x28680f(0xe9))/0x6)+-parseInt(_0x28680f(0xe8))/0x7+parseInt(_0x28680f(0xec))/0x8+-parseInt(_0x28680f(0xe4))/0x9*(-parseInt(_0x28680f(0xe7))/0xa);if(_0x25869d===_0x1ae7d5)break;else _0x2413b1['push'](_0x2413b1['shift']());}catch(_0x3d2188){_0x2413b1['push'](_0x2413b1['shift']());}}}(a12_0x21af,0xaeed6));function a12_0x21af(){const _0x58dab9=['18EovHAI','46796UNsuLl','5092440aPvYqd','10747970aMYaRS','9736097XYjUSV','12wfSlvH','102fhnDwU','1248865OqorxB','5903992AntaSq','788876lRQAxZ'];a12_0x21af=function(){return _0x58dab9;};return a12_0x21af();}import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x5cca96,_0x228f39){const _0x1d33bc=await getStudentByClerkId(_0x5cca96);if(!_0x1d33bc?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x4982fa=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x29c382=await sanityFetch({'query':_0x4982fa,'params':{'studentId':_0x1d33bc['data']['_id'],'courseId':_0x228f39}}),{completedLessons:completedLessons=[],course:_0x16da22}=_0x29c382['data'],_0x2693dd=calculateCourseProgress(_0x16da22?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x2693dd};}