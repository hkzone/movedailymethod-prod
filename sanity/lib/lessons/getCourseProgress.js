function a12_0x2f56(){const _0x4157a1=['_id','47188gQdjHy','260aKBfoh','6175404QjezYx','7002192dZpesq','3394138adZVse','2010ElYGFA','6670kqyEmW','293CfRDiA','10913NTvPPC','2503431FdUpwR','10MOksMo'];a12_0x2f56=function(){return _0x4157a1;};return a12_0x2f56();}(function(_0x7fd182,_0xb65b18){const _0x58dd87=a12_0x2a6f,_0x5efae1=_0x7fd182();while(!![]){try{const _0x4dad25=-parseInt(_0x58dd87(0x1cd))/0x1*(-parseInt(_0x58dd87(0x1cc))/0x2)+-parseInt(_0x58dd87(0x1cf))/0x3+-parseInt(_0x58dd87(0x1c6))/0x4*(parseInt(_0x58dd87(0x1c7))/0x5)+parseInt(_0x58dd87(0x1cb))/0x6*(parseInt(_0x58dd87(0x1ce))/0x7)+parseInt(_0x58dd87(0x1c9))/0x8+-parseInt(_0x58dd87(0x1c8))/0x9+-parseInt(_0x58dd87(0x1c4))/0xa*(-parseInt(_0x58dd87(0x1ca))/0xb);if(_0x4dad25===_0xb65b18)break;else _0x5efae1['push'](_0x5efae1['shift']());}catch(_0xa7d5ee){_0x5efae1['push'](_0x5efae1['shift']());}}}(a12_0x2f56,0x86137));import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a12_0x2a6f(_0x222390,_0x189aba){const _0x2f5662=a12_0x2f56();return a12_0x2a6f=function(_0x2a6fc7,_0x1f1d60){_0x2a6fc7=_0x2a6fc7-0x1c4;let _0x437c2c=_0x2f5662[_0x2a6fc7];return _0x437c2c;},a12_0x2a6f(_0x222390,_0x189aba);}import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x4ffb80,_0x1be273){const _0x1b2e3e=a12_0x2a6f,_0xc1d130=await getStudentByClerkId(_0x4ffb80);if(!_0xc1d130?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x12a7d7=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x240c08=await sanityFetch({'query':_0x12a7d7,'params':{'studentId':_0xc1d130['data'][_0x1b2e3e(0x1c5)],'courseId':_0x1be273}}),{completedLessons:completedLessons=[],course:_0x44d78a}=_0x240c08['data'],_0x23540b=calculateCourseProgress(_0x44d78a?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x23540b};}