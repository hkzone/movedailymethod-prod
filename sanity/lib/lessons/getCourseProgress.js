function a12_0x48b4(_0x2604c3,_0x4356ce){const _0x39601e=a12_0x3960();return a12_0x48b4=function(_0x48b4cf,_0x2a1a88){_0x48b4cf=_0x48b4cf-0x100;let _0x48c2d1=_0x39601e[_0x48b4cf];return _0x48c2d1;},a12_0x48b4(_0x2604c3,_0x4356ce);}(function(_0x61c33a,_0x1b14a7){const _0x2fbe66=a12_0x48b4,_0x2aac85=_0x61c33a();while(!![]){try{const _0x441c4e=parseInt(_0x2fbe66(0x107))/0x1*(parseInt(_0x2fbe66(0x104))/0x2)+parseInt(_0x2fbe66(0x103))/0x3*(-parseInt(_0x2fbe66(0x102))/0x4)+-parseInt(_0x2fbe66(0x100))/0x5*(parseInt(_0x2fbe66(0x10a))/0x6)+-parseInt(_0x2fbe66(0x101))/0x7+-parseInt(_0x2fbe66(0x109))/0x8+parseInt(_0x2fbe66(0x106))/0x9*(-parseInt(_0x2fbe66(0x108))/0xa)+-parseInt(_0x2fbe66(0x10b))/0xb*(-parseInt(_0x2fbe66(0x105))/0xc);if(_0x441c4e===_0x1b14a7)break;else _0x2aac85['push'](_0x2aac85['shift']());}catch(_0x34e94c){_0x2aac85['push'](_0x2aac85['shift']());}}}(a12_0x3960,0x87906));function a12_0x3960(){const _0x43d84d=['1039514ZoInZW','68FFjqip','71976EPbwaK','1929266pITjCt','75324bAKOMh','624744PftUgi','1ZmasyC','20beGNSm','251728VRNdZk','9636gOWLje','1133DPKdsc','1025gGwETx'];a12_0x3960=function(){return _0x43d84d;};return a12_0x3960();}import{defineQuery}from'groq';import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x5912d4,_0x51914e){const _0x40af97=await getStudentByClerkId(_0x5912d4);if(!_0x40af97?.['data']?.['_id'])throw new Error('Student\x20not\x20found');const _0x176a25=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x529766=await sanityFetch({'query':_0x176a25,'params':{'studentId':_0x40af97['data']['_id'],'courseId':_0x51914e}}),{completedLessons:completedLessons=[],course:_0x1a27a3}=_0x529766['data'],_0xe178e0=calculateCourseProgress(_0x1a27a3?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0xe178e0};}