(function(_0x4188ed,_0x560dfd){const _0x22dcc8=a9_0x475b,_0x3be37e=_0x4188ed();while(!![]){try{const _0x265d20=-parseInt(_0x22dcc8(0x14a))/0x1+-parseInt(_0x22dcc8(0x147))/0x2*(parseInt(_0x22dcc8(0x141))/0x3)+-parseInt(_0x22dcc8(0x146))/0x4*(parseInt(_0x22dcc8(0x14d))/0x5)+-parseInt(_0x22dcc8(0x145))/0x6*(-parseInt(_0x22dcc8(0x144))/0x7)+-parseInt(_0x22dcc8(0x143))/0x8*(parseInt(_0x22dcc8(0x14e))/0x9)+-parseInt(_0x22dcc8(0x149))/0xa+-parseInt(_0x22dcc8(0x14b))/0xb*(-parseInt(_0x22dcc8(0x14c))/0xc);if(_0x265d20===_0x560dfd)break;else _0x3be37e['push'](_0x3be37e['shift']());}catch(_0x249b95){_0x3be37e['push'](_0x3be37e['shift']());}}}(a9_0x1725,0x82ce0));import{defineQuery}from'groq';function a9_0x1725(){const _0x3012d5=['nNLwEejLzW','mJbzzM9zDhi','mMDUqvPjwq','u3r1zgvUDcbUB3qGzM91BMq','mJCZmdGXme9gtenAtW','oda3mdKYCgruvvz0','mZy5nZK4BK9RAMDq','mteWngjlCNjbBa','otm3nJK1whziD1zz','owDuu2TfCa','mtKWmdC0ow9js0HAEG','zgf0yq','ntK1mtG1nLrUrgzOwG','ntG2odq3mvvrtvvxAW'];a9_0x1725=function(){return _0x3012d5;};return a9_0x1725();}import{sanityFetch}from'../live';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a9_0x475b(_0xb5b31a,_0x5bbe34){const _0x172522=a9_0x1725();return a9_0x475b=function(_0x475bd6,_0xa04c9a){_0x475bd6=_0x475bd6-0x141;let _0x24a695=_0x172522[_0x475bd6];if(a9_0x475b['RdCqOr']===undefined){var _0x5e620f=function(_0x23f4ab){const _0x478c98='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4fc9f2='',_0x873762='';for(let _0x5b6367=0x0,_0x57a49b,_0x37a322,_0x2e2e72=0x0;_0x37a322=_0x23f4ab['charAt'](_0x2e2e72++);~_0x37a322&&(_0x57a49b=_0x5b6367%0x4?_0x57a49b*0x40+_0x37a322:_0x37a322,_0x5b6367++%0x4)?_0x4fc9f2+=String['fromCharCode'](0xff&_0x57a49b>>(-0x2*_0x5b6367&0x6)):0x0){_0x37a322=_0x478c98['indexOf'](_0x37a322);}for(let _0xbc6d91=0x0,_0x137f41=_0x4fc9f2['length'];_0xbc6d91<_0x137f41;_0xbc6d91++){_0x873762+='%'+('00'+_0x4fc9f2['charCodeAt'](_0xbc6d91)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x873762);};a9_0x475b['osQZPd']=_0x5e620f,_0xb5b31a=arguments,a9_0x475b['RdCqOr']=!![];}const _0xc0abc=_0x172522[0x0],_0x249f51=_0x475bd6+_0xc0abc,_0x4196bf=_0xb5b31a[_0x249f51];return!_0x4196bf?(_0x24a695=a9_0x475b['osQZPd'](_0x24a695),_0xb5b31a[_0x249f51]=_0x24a695):_0x24a695=_0x4196bf,_0x24a695;},a9_0x475b(_0xb5b31a,_0x5bbe34);}import{calculateCourseProgress}from'@/lib/courseProgress';export async function getCourseProgress(_0x23f4ab,_0x478c98){const _0x22b502=a9_0x475b,_0x4fc9f2=await getStudentByClerkId(_0x23f4ab);if(!_0x4fc9f2?.[_0x22b502(0x142)]?.['_id'])throw new Error(_0x22b502(0x148));const _0x873762=defineQuery('{\x0a\x20\x20\x20\x20\x22completedLessons\x22:\x20*[_type\x20==\x20\x22lessonCompletion\x22\x20&&\x20student._ref\x20==\x20$studentId\x20&&\x20course._ref\x20==\x20$courseId]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22lesson\x22:\x20lesson->{...},\x0a\x20\x20\x20\x20\x20\x20\x22module\x22:\x20module->{...}\x0a\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x22course\x22:\x20*[_type\x20==\x20\x22course\x22\x20&&\x20_id\x20==\x20$courseId][0]\x20{\x0a\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x22modules\x22:\x20modules[]->\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20...,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22lessons\x22:\x20lessons[]->\x20{...}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}'),_0x5b6367=await sanityFetch({'query':_0x873762,'params':{'studentId':_0x4fc9f2['data']['_id'],'courseId':_0x478c98}}),{completedLessons:completedLessons=[],course:_0x57a49b}=_0x5b6367[_0x22b502(0x142)],_0x37a322=calculateCourseProgress(_0x57a49b?.['modules']||null,completedLessons);return{'completedLessons':completedLessons,'courseProgress':_0x37a322};}