(function(_0x4f09ba,_0x8e227a){const _0x159c16=a8_0x368b,_0x3b61ee=_0x4f09ba();while(!![]){try{const _0x521efd=-parseInt(_0x159c16(0x14d))/0x1+-parseInt(_0x159c16(0x157))/0x2+parseInt(_0x159c16(0x14f))/0x3*(-parseInt(_0x159c16(0x144))/0x4)+parseInt(_0x159c16(0x154))/0x5+parseInt(_0x159c16(0x15d))/0x6*(-parseInt(_0x159c16(0x138))/0x7)+parseInt(_0x159c16(0x137))/0x8*(-parseInt(_0x159c16(0x148))/0x9)+parseInt(_0x159c16(0x161))/0xa;if(_0x521efd===_0x8e227a)break;else _0x3b61ee['push'](_0x3b61ee['shift']());}catch(_0x3dfc85){_0x3b61ee['push'](_0x3b61ee['shift']());}}}(a8_0x2248,0x618f6));const a8_0x415be4=(function(){const _0x5af1e5={'HZHGe':function(_0x33ba40,_0x3b1ddd){return _0x33ba40===_0x3b1ddd;},'XOnFQ':'hpzFN','PYfob':function(_0xac220,_0x254114){return _0xac220===_0x254114;},'yQZXE':'ymApJ','UTgHM':'UTePd'};let _0x4861d0=!![];return function(_0x1920e3,_0x1898e0){const _0x108baf=a8_0x368b,_0x265538={'xXlck':function(_0x375845,_0x3d3e65){const _0x15d55b=a8_0x368b;return _0x5af1e5[_0x15d55b(0x14e)](_0x375845,_0x3d3e65);},'AzGRj':_0x5af1e5[_0x108baf(0x13c)]};if(_0x5af1e5[_0x108baf(0x140)](_0x5af1e5[_0x108baf(0x153)],_0x5af1e5[_0x108baf(0x15a)])){if(_0x341fb9){const _0xed9389=_0xc02b2c[_0x108baf(0x15c)](_0x4cd999,arguments);return _0x2d985e=null,_0xed9389;}}else{const _0x1a5c83=_0x4861d0?function(){const _0x4eab3a=_0x108baf;if(_0x265538['xXlck'](_0x265538['AzGRj'],_0x265538[_0x4eab3a(0x13f)])){if(_0x1898e0){const _0x13e259=_0x1898e0[_0x4eab3a(0x15c)](_0x1920e3,arguments);return _0x1898e0=null,_0x13e259;}}else{const _0x3e06b1=_0x551070?function(){const _0x1bd32d=_0x4eab3a;if(_0x2bc9dd){const _0x122669=_0x451cbd[_0x1bd32d(0x15c)](_0x3783c7,arguments);return _0x4f98a4=null,_0x122669;}}:function(){};return _0x232424=![],_0x3e06b1;}}:function(){};return _0x4861d0=![],_0x1a5c83;}};}()),a8_0x52b9be=a8_0x415be4(this,function(){const _0x36a891=a8_0x368b,_0x1b3a8b={'ZyiAP':_0x36a891(0x147)};return a8_0x52b9be[_0x36a891(0x13a)]()[_0x36a891(0x14c)](_0x1b3a8b[_0x36a891(0x152)])[_0x36a891(0x13a)]()['constructor'](a8_0x52b9be)['search'](_0x1b3a8b['ZyiAP']);});a8_0x52b9be();import a8_0xb92239 from'groq';import{client}from'../adminClient';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{sanityFetch}from'../live';function a8_0x368b(_0x3fa4e2,_0x4640c8){const _0x5e6bb8=a8_0x2248();return a8_0x368b=function(_0x52b9be,_0x415be4){_0x52b9be=_0x52b9be-0x135;let _0x224878=_0x5e6bb8[_0x52b9be];if(a8_0x368b['MLzMec']===undefined){var _0x368bfc=function(_0x514d6e){const _0x4a9c59='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x20e387='',_0x3280fb='',_0x495876=_0x20e387+_0x368bfc;for(let _0x5c4987=0x0,_0x5971ed,_0x27a1c7,_0x2bc785=0x0;_0x27a1c7=_0x514d6e['charAt'](_0x2bc785++);~_0x27a1c7&&(_0x5971ed=_0x5c4987%0x4?_0x5971ed*0x40+_0x27a1c7:_0x27a1c7,_0x5c4987++%0x4)?_0x20e387+=_0x495876['charCodeAt'](_0x2bc785+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5971ed>>(-0x2*_0x5c4987&0x6)):_0x5c4987:0x0){_0x27a1c7=_0x4a9c59['indexOf'](_0x27a1c7);}for(let _0x551070=0x0,_0x128e4d=_0x20e387['length'];_0x551070<_0x128e4d;_0x551070++){_0x3280fb+='%'+('00'+_0x20e387['charCodeAt'](_0x551070)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3280fb);};a8_0x368b['Axmawq']=_0x368bfc,_0x3fa4e2=arguments,a8_0x368b['MLzMec']=!![];}const _0x197812=_0x5e6bb8[0x0],_0x56454d=_0x52b9be+_0x197812,_0x59b632=_0x3fa4e2[_0x56454d];if(!_0x59b632){const _0x222c6b=function(_0xff2712){this['KEIqAY']=_0xff2712,this['WemYGl']=[0x1,0x0,0x0],this['sosikj']=function(){return'newState';},this['XScoYs']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ImAjNF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x222c6b['prototype']['YrxzTA']=function(){const _0x25e3a9=new RegExp(this['XScoYs']+this['ImAjNF']),_0x232424=_0x25e3a9['test'](this['sosikj']['toString']())?--this['WemYGl'][0x1]:--this['WemYGl'][0x0];return this['xBVUzL'](_0x232424);},_0x222c6b['prototype']['xBVUzL']=function(_0x2bc9dd){if(!Boolean(~_0x2bc9dd))return _0x2bc9dd;return this['uojEiO'](this['KEIqAY']);},_0x222c6b['prototype']['uojEiO']=function(_0x1ede54){for(let _0x78f59a=0x0,_0x879634=this['WemYGl']['length'];_0x78f59a<_0x879634;_0x78f59a++){this['WemYGl']['push'](Math['round'](Math['random']())),_0x879634=this['WemYGl']['length'];}return _0x1ede54(this['WemYGl'][0x0]);},new _0x222c6b(a8_0x368b)['YrxzTA'](),_0x224878=a8_0x368b['Axmawq'](_0x224878),_0x3fa4e2[_0x56454d]=_0x224878;}else _0x224878=_0x59b632;return _0x224878;},a8_0x368b(_0x3fa4e2,_0x4640c8);}export async function completeLessonById({lessonId:_0x4eeee5,clerkId:_0x2a42f1}){const _0x4a84e3=a8_0x368b,_0x290fc7={'xQAEV':_0x4a84e3(0x143),'TSfbh':function(_0x20327f,_0x4db8de){return _0x20327f===_0x4db8de;},'Jqogk':_0x4a84e3(0x151),'NfCEH':function(_0x8576d6,_0x45a9c8){return _0x8576d6(_0x45a9c8);},'MCIWf':function(_0x21264e,_0x99d0cf){return _0x21264e===_0x99d0cf;},'jAvGj':function(_0x3729d1,_0x482c84){return _0x3729d1===_0x482c84;},'lemDC':'Student\x20not\x20found','PyFGw':function(_0x14c5ab,_0x1539da){return _0x14c5ab(_0x1539da);},'dPOAp':function(_0x39d141,_0x59822f){return _0x39d141(_0x59822f);},'nGTJi':function(_0x167736,_0x38edea){return _0x167736===_0x38edea;},'CielM':function(_0xe0cda8,_0xff35d9){return _0xe0cda8===_0xff35d9;},'ZFZhQ':function(_0x27be6a,_0x8728a9){return _0x27be6a===_0x8728a9;},'hzyxC':function(_0x4f71e9,_0x413950){return _0x4f71e9===_0x413950;},'CFTlL':function(_0xddf99c,_0x3520a7){return _0xddf99c===_0x3520a7;},'WLFtp':function(_0x5b9447,_0xd7b48e){return _0x5b9447===_0xd7b48e;},'IuBsJ':_0x4a84e3(0x13e),'GGSLM':'lessonCompletion','XXYGY':_0x4a84e3(0x142),'xWwqk':'Maoar'};var _0x47547f,_0x3d19e1,_0x1082c4,_0x432137,_0x4cdb5d;try{if(_0x290fc7[_0x4a84e3(0x160)](_0x4a84e3(0x13b),_0x290fc7[_0x4a84e3(0x15b)]))return _0x45ce98[_0x4a84e3(0x141)];else{const _0x551522=await _0x290fc7[_0x4a84e3(0x158)](getStudentByClerkId,_0x2a42f1);if(!((_0x47547f=_0x290fc7[_0x4a84e3(0x159)](_0x551522,null)||_0x290fc7['MCIWf'](_0x551522,void 0x0)?void 0x0:_0x551522[_0x4a84e3(0x141)])===null||_0x290fc7[_0x4a84e3(0x155)](_0x47547f,void 0x0)?void 0x0:_0x47547f[_0x4a84e3(0x13d)]))throw new Error(_0x290fc7[_0x4a84e3(0x164)]);const _0x1e432c=_0x551522[_0x4a84e3(0x141)][_0x4a84e3(0x13d)],_0x3d8753=await _0x290fc7[_0x4a84e3(0x165)](sanityFetch,{'query':a8_0xb92239`*[_type == "lessonCompletion" && student._ref == $studentId && lesson._ref == $lessonId][0]`,'params':{'studentId':_0x1e432c,'lessonId':_0x4eeee5}});if(_0x3d8753[_0x4a84e3(0x141)])return _0x3d8753[_0x4a84e3(0x141)];const _0x904476=await _0x290fc7['dPOAp'](sanityFetch,{'query':a8_0xb92239`*[_type == "lesson" && _id == $lessonId][0]{
        _id,
        "module": *[_type == "module" && references(^._id)][0]{
          _id,
          "course": *[_type == "course" && references(^._id)][0]._id
        }
      }`,'params':{'lessonId':_0x4eeee5}});if(!(_0x290fc7[_0x4a84e3(0x135)](_0x1082c4=_0x290fc7['CielM'](_0x3d19e1=_0x290fc7[_0x4a84e3(0x159)](_0x904476,null)||_0x290fc7['ZFZhQ'](_0x904476,void 0x0)?void 0x0:_0x904476[_0x4a84e3(0x141)],null)||_0x3d19e1===void 0x0?void 0x0:_0x3d19e1[_0x4a84e3(0x150)],null)||_0x290fc7[_0x4a84e3(0x135)](_0x1082c4,void 0x0)?void 0x0:_0x1082c4['_id'])||!(_0x290fc7[_0x4a84e3(0x15f)](_0x4cdb5d=_0x290fc7[_0x4a84e3(0x149)](_0x432137=_0x290fc7[_0x4a84e3(0x136)](_0x904476,null)||_0x290fc7['MCIWf'](_0x904476,void 0x0)?void 0x0:_0x904476['data'],null)||_0x290fc7[_0x4a84e3(0x15e)](_0x432137,void 0x0)?void 0x0:_0x432137[_0x4a84e3(0x150)],null)||_0x290fc7[_0x4a84e3(0x15e)](_0x4cdb5d,void 0x0)?void 0x0:_0x4cdb5d['course']))throw new Error(_0x290fc7['IuBsJ']);const _0x4e721=await client[_0x4a84e3(0x139)]({'_type':_0x290fc7[_0x4a84e3(0x146)],'student':{'_type':_0x4a84e3(0x142),'_ref':_0x1e432c},'lesson':{'_type':_0x290fc7['XXYGY'],'_ref':_0x4eeee5},'module':{'_type':_0x290fc7[_0x4a84e3(0x14b)],'_ref':_0x904476['data'][_0x4a84e3(0x150)]['_id']},'course':{'_type':_0x290fc7[_0x4a84e3(0x14b)],'_ref':_0x904476['data'][_0x4a84e3(0x150)][_0x4a84e3(0x156)]},'completedAt':new Date()[_0x4a84e3(0x162)]()});return _0x4e721;}}catch(_0x3e4183){if(_0x290fc7[_0x4a84e3(0x155)](_0x290fc7[_0x4a84e3(0x163)],_0x290fc7['xWwqk'])){console[_0x4a84e3(0x145)](_0x290fc7[_0x4a84e3(0x14a)],_0x3e4183);throw _0x3e4183;}else{_0x12a966[_0x4a84e3(0x145)](_0x290fc7['xQAEV'],_0xf9b639);throw _0x46fb76;}}}function a8_0x2248(){const _0x205f86=['vfnMyMG','mJi0nZe4ntbpr2jer3y','Dg9ju09tDhjPBMC','EfD3CwS','BgvTrem','uhLgr3C','BKDusMK','q0zuBeW','mtz6D2Lvt1u','mtaYmZq2m0D4tLHeCa','y3jLyxrL','Dg9tDhjPBMC','q0PrDM0','we9UrLe','x2LK','q291BgqGBM90igzPBMqGBw9KDwXLig9YignVDxjZzsbMB3iGBgvZC29U','qxPhuMO','ufLMB2i','zgf0yq','CMvMzxjLBMnL','rxjYB3iGy29TCgXLDgLUzYbSzxnZB246','nti4nZK2s3DpzxHb','zxjYB3i','r0Dtte0','kcGOlISPkYKRksSK','mJGWmZyZnvPdvhDZyq','q2LLBe0','Effbrvy','wfHzr1K','C2vHCMnO','ndC3odi0q3PJy21Q','sfPir2u','m0TVzKHhzG','Bw9KDwXL','EfLcCe8','wNLPqva','EvfAweu','mtK3mJmZnw1wuxH5Aa','AKf2r2O','y291CNnL','odq4mZe0sMTxzgvy','tMzdruG','tunjv2y','vvrNse0','sNfVz2S','yxbWBhK','mJrdrvbdDLa','v0XgDha','AhP5Eem'];a8_0x2248=function(){return _0x205f86;};return a8_0x2248();}