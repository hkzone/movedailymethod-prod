(function(_0x22fdab,_0x540256){const _0x261a81=a85_0x15e7,_0x4a39ab=_0x22fdab();while(!![]){try{const _0x5ccea6=parseInt(_0x261a81(0xd0))/0x1*(parseInt(_0x261a81(0xca))/0x2)+parseInt(_0x261a81(0xbb))/0x3*(-parseInt(_0x261a81(0xbf))/0x4)+-parseInt(_0x261a81(0xb5))/0x5+parseInt(_0x261a81(0xb9))/0x6+parseInt(_0x261a81(0xb2))/0x7+-parseInt(_0x261a81(0xb0))/0x8+-parseInt(_0x261a81(0xb4))/0x9*(-parseInt(_0x261a81(0xcb))/0xa);if(_0x5ccea6===_0x540256)break;else _0x4a39ab['push'](_0x4a39ab['shift']());}catch(_0x2bdd45){_0x4a39ab['push'](_0x4a39ab['shift']());}}}(a85_0x1ff9,0xb6a18));const a85_0xb1471f=(function(){const _0x233fb2=a85_0x15e7,_0x141170={'MgrLO':_0x233fb2(0xb1)};let _0x3e5478=!![];return function(_0x57290d,_0x45b403){const _0x518a78=_0x233fb2,_0x8a255e={'ALUGo':_0x141170[_0x518a78(0xc4)]},_0x9f05fa=_0x3e5478?function(){const _0x3569fe=_0x518a78;if(_0x45b403){if(_0x3569fe(0xcd)!==_0x3569fe(0xc2)){const _0x4511f9=_0x45b403[_0x3569fe(0xcf)](_0x57290d,arguments);return _0x45b403=null,_0x4511f9;}else{_0x353a2e[_0x3569fe(0xc0)](_0x8a255e['ALUGo'],_0x4e0a99);throw _0x187ce0;}}}:function(){};return _0x3e5478=![],_0x9f05fa;};}()),a85_0x427b3f=a85_0xb1471f(this,function(){const _0x1959ff=a85_0x15e7,_0xb197f9={'DJXjF':_0x1959ff(0xc9)};return a85_0x427b3f[_0x1959ff(0xc7)]()[_0x1959ff(0xc5)](_0xb197f9['DJXjF'])[_0x1959ff(0xc7)]()[_0x1959ff(0xc1)](a85_0x427b3f)['search'](_0x1959ff(0xc9));});a85_0x427b3f();import a85_0x1cabd2 from'groq';import{client}from'../adminClient';import{getStudentByClerkId}from'../student/getStudentByClerkId';import{sanityFetch}from'../live';function a85_0x15e7(_0x7190f1,_0x5a346c){const _0x11640c=a85_0x1ff9();return a85_0x15e7=function(_0x427b3f,_0xb1471f){_0x427b3f=_0x427b3f-0xb0;let _0x1ff919=_0x11640c[_0x427b3f];if(a85_0x15e7['gnMPXk']===undefined){var _0x15e775=function(_0x33ce23){const _0xb42474='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x64a107='',_0x27f969='',_0x4f12fa=_0x64a107+_0x15e775;for(let _0x3df16f=0x0,_0x2d93a4,_0x5148f5,_0x1a2e70=0x0;_0x5148f5=_0x33ce23['charAt'](_0x1a2e70++);~_0x5148f5&&(_0x2d93a4=_0x3df16f%0x4?_0x2d93a4*0x40+_0x5148f5:_0x5148f5,_0x3df16f++%0x4)?_0x64a107+=_0x4f12fa['charCodeAt'](_0x1a2e70+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2d93a4>>(-0x2*_0x3df16f&0x6)):_0x3df16f:0x0){_0x5148f5=_0xb42474['indexOf'](_0x5148f5);}for(let _0x2744e0=0x0,_0xd6c843=_0x64a107['length'];_0x2744e0<_0xd6c843;_0x2744e0++){_0x27f969+='%'+('00'+_0x64a107['charCodeAt'](_0x2744e0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x27f969);};a85_0x15e7['lUjfSl']=_0x15e775,_0x7190f1=arguments,a85_0x15e7['gnMPXk']=!![];}const _0x8a5ac=_0x11640c[0x0],_0x4d75a8=_0x427b3f+_0x8a5ac,_0x5f1a4f=_0x7190f1[_0x4d75a8];if(!_0x5f1a4f){const _0x125071=function(_0x25a392){this['qUrIGW']=_0x25a392,this['kYFvTb']=[0x1,0x0,0x0],this['OrqdcV']=function(){return'newState';},this['ShBLQT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SXvpaX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x125071['prototype']['rGkpPh']=function(){const _0x599f8f=new RegExp(this['ShBLQT']+this['SXvpaX']),_0x5d5a5f=_0x599f8f['test'](this['OrqdcV']['toString']())?--this['kYFvTb'][0x1]:--this['kYFvTb'][0x0];return this['kFQvCP'](_0x5d5a5f);},_0x125071['prototype']['kFQvCP']=function(_0x577e5a){if(!Boolean(~_0x577e5a))return _0x577e5a;return this['BOcHKC'](this['qUrIGW']);},_0x125071['prototype']['BOcHKC']=function(_0x24eba5){for(let _0x21c61e=0x0,_0xe22aad=this['kYFvTb']['length'];_0x21c61e<_0xe22aad;_0x21c61e++){this['kYFvTb']['push'](Math['round'](Math['random']())),_0xe22aad=this['kYFvTb']['length'];}return _0x24eba5(this['kYFvTb'][0x0]);},new _0x125071(a85_0x15e7)['rGkpPh'](),_0x1ff919=a85_0x15e7['lUjfSl'](_0x1ff919),_0x7190f1[_0x4d75a8]=_0x1ff919;}else _0x1ff919=_0x5f1a4f;return _0x1ff919;},a85_0x15e7(_0x7190f1,_0x5a346c);}export async function completeLessonById({lessonId:_0x3adb1a,clerkId:_0x292676}){const _0x166761=a85_0x15e7,_0x4428f0={'duUtr':function(_0x377e96,_0x1beb37){return _0x377e96(_0x1beb37);},'kyjWZ':_0x166761(0xc6),'uwtFP':_0x166761(0xbe),'IsFko':function(_0x5040af,_0xc9ac3){return _0x5040af(_0xc9ac3);},'nmArK':_0x166761(0xba),'AxUPA':'reference','YcJje':_0x166761(0xb1)};try{const _0x111018=await _0x4428f0['duUtr'](getStudentByClerkId,_0x292676);if(!_0x111018?.[_0x166761(0xcc)]?.[_0x166761(0xb8)]){if(_0x4428f0[_0x166761(0xb7)]!==_0x4428f0[_0x166761(0xb7)]){const _0x53d0ec=_0x24ac3d[_0x166761(0xcf)](_0x32ad21,arguments);return _0x59505f=null,_0x53d0ec;}else throw new Error(_0x4428f0[_0x166761(0xc8)]);}const _0x24ca6e=_0x111018[_0x166761(0xcc)][_0x166761(0xb8)],_0x44e8ff=await _0x4428f0[_0x166761(0xb6)](sanityFetch,{'query':a85_0x1cabd2`*[_type == "lessonCompletion" && student._ref == $studentId && lesson._ref == $lessonId][0]`,'params':{'studentId':_0x24ca6e,'lessonId':_0x3adb1a}});if(_0x44e8ff['data'])return _0x44e8ff[_0x166761(0xcc)];const _0x201230=await _0x4428f0['IsFko'](sanityFetch,{'query':a85_0x1cabd2`*[_type == "lesson" && _id == $lessonId][0]{
        _id,
        "module": *[_type == "module" && references(^._id)][0]{
          _id,
          "course": *[_type == "course" && references(^._id)][0]._id
        }
      }`,'params':{'lessonId':_0x3adb1a}});if(!_0x201230?.[_0x166761(0xcc)]?.[_0x166761(0xbc)]?.[_0x166761(0xb8)]||!_0x201230?.['data']?.[_0x166761(0xbc)]?.[_0x166761(0xbd)])throw new Error(_0x4428f0[_0x166761(0xce)]);const _0x461ff2=await client['create']({'_type':_0x166761(0xc3),'student':{'_type':_0x4428f0['AxUPA'],'_ref':_0x24ca6e},'lesson':{'_type':_0x4428f0[_0x166761(0xd1)],'_ref':_0x3adb1a},'module':{'_type':_0x4428f0[_0x166761(0xd1)],'_ref':_0x201230['data'][_0x166761(0xbc)][_0x166761(0xb8)]},'course':{'_type':_0x4428f0[_0x166761(0xd1)],'_ref':_0x201230[_0x166761(0xcc)]['module'][_0x166761(0xbd)]},'completedAt':new Date()[_0x166761(0xb3)]()});return _0x461ff2;}catch(_0x57d8d8){console[_0x166761(0xc0)](_0x4428f0['YcJje'],_0x57d8d8);throw _0x57d8d8;}}function a85_0x1ff9(){const _0x314c28=['y291CNnL','u3r1zgvUDcbUB3qGzM91BMq','mtKZndq3nMTKwMTHAW','zxjYB3i','y29UC3rYDwn0B3i','sfzmwwi','BgvZC29Uq29TCgXLDgLVBG','twDYte8','C2vHCMnO','sKPjwNy','Dg9tDhjPBMC','DxD0rLa','kcGOlISPkYKRksSK','ndG4mdb2tNDpugG','mtbrqxPLAfa','zgf0yq','sur3BwK','BM1bCKS','yxbWBhK','mZfjBLbRrhK','qxHvuee','nJy3ntaXnNDyv2r1tW','rxjYB3iGy29TCgXLDgLUzYbSzxnZB246','ntiZndy5oe1jALrWBG','Dg9ju09tDhjPBMC','nZGZmZa4n01irvnnyW','nZu0nZeWvxrLy2jk','zhvvDhi','A3LQv1O','x2LK','ndG1oda1mhvyrLDtuG','q291BgqGBM90igzPBMqGBw9KDwXLig9YignVDxjZzsbMB3iGBgvZC29U','oxnethvhta','Bw9KDwXL'];a85_0x1ff9=function(){return _0x314c28;};return a85_0x1ff9();}