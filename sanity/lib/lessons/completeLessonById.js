(function(_0x2812df,_0x537d55){const _0x1a894e=a8_0x24d2,_0x30c274=_0x2812df();while(!![]){try{const _0xdf653b=-parseInt(_0x1a894e(0xce))/0x1*(-parseInt(_0x1a894e(0xba))/0x2)+parseInt(_0x1a894e(0xc0))/0x3+parseInt(_0x1a894e(0xcb))/0x4*(parseInt(_0x1a894e(0xdb))/0x5)+-parseInt(_0x1a894e(0xd1))/0x6+parseInt(_0x1a894e(0xcf))/0x7+parseInt(_0x1a894e(0xd9))/0x8+parseInt(_0x1a894e(0xc6))/0x9*(-parseInt(_0x1a894e(0xbf))/0xa);if(_0xdf653b===_0x537d55)break;else _0x30c274['push'](_0x30c274['shift']());}catch(_0x36d176){_0x30c274['push'](_0x30c274['shift']());}}}(a8_0x26a7,0x5adca));const a8_0x17c746=(function(){const _0x1630cb=a8_0x24d2,_0x32e85b={'rhDEI':_0x1630cb(0xc7),'ZbDbt':function(_0x978f2f,_0x5a88ca){return _0x978f2f!==_0x5a88ca;},'NOdnx':_0x1630cb(0xc3),'gzLih':_0x1630cb(0xe0),'LNGan':_0x1630cb(0xd7)};let _0x15811f=!![];return function(_0xa51c3e,_0x38c1a2){const _0x475fd9=_0x1630cb,_0x192af5={'VyctB':_0x32e85b['LNGan']};if(_0x32e85b['ZbDbt'](_0x475fd9(0xb4),_0x475fd9(0xc2))){const _0x514680=_0x15811f?function(){const _0x212fe6=_0x475fd9,_0x3819f={'xhxyb':_0x32e85b['rhDEI']};if(_0x32e85b[_0x212fe6(0xdc)](_0x32e85b[_0x212fe6(0xbe)],_0x32e85b[_0x212fe6(0xda)])){if(_0x38c1a2){const _0x485dae=_0x38c1a2[_0x212fe6(0xb1)](_0xa51c3e,arguments);return _0x38c1a2=null,_0x485dae;}}else return _0x28c3c4[_0x212fe6(0xcc)]()[_0x212fe6(0xdf)](_0x3819f[_0x212fe6(0xdd)])[_0x212fe6(0xcc)]()[_0x212fe6(0xb8)](_0x40f976)[_0x212fe6(0xdf)](_0x3819f[_0x212fe6(0xdd)]);}:function(){};return _0x15811f=![],_0x514680;}else throw new _0x5d8cf9(_0x192af5[_0x475fd9(0xbc)]);};}()),a8_0x2709a6=a8_0x17c746(this,function(){const _0x2224f4=a8_0x24d2,_0x163889={'xMVqq':_0x2224f4(0xc7)};return a8_0x2709a6[_0x2224f4(0xcc)]()[_0x2224f4(0xdf)](_0x2224f4(0xc7))[_0x2224f4(0xcc)]()[_0x2224f4(0xb8)](a8_0x2709a6)[_0x2224f4(0xdf)](_0x163889[_0x2224f4(0xaf)]);});a8_0x2709a6();import a8_0x11a501 from'groq';import{client}from'../adminClient';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a8_0x24d2(_0xd63a97,_0x4ba987){const _0x18348d=a8_0x26a7();return a8_0x24d2=function(_0x2709a6,_0x17c746){_0x2709a6=_0x2709a6-0xae;let _0x26a775=_0x18348d[_0x2709a6];if(a8_0x24d2['XGHNLa']===undefined){var _0x24d299=function(_0x16a21e){const _0x2e80de='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x63fc80='',_0x5f582d='',_0x3e2db1=_0x63fc80+_0x24d299;for(let _0x40daf8=0x0,_0x3bc4e7,_0x451d83,_0x2ab70=0x0;_0x451d83=_0x16a21e['charAt'](_0x2ab70++);~_0x451d83&&(_0x3bc4e7=_0x40daf8%0x4?_0x3bc4e7*0x40+_0x451d83:_0x451d83,_0x40daf8++%0x4)?_0x63fc80+=_0x3e2db1['charCodeAt'](_0x2ab70+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3bc4e7>>(-0x2*_0x40daf8&0x6)):_0x40daf8:0x0){_0x451d83=_0x2e80de['indexOf'](_0x451d83);}for(let _0x3d7f45=0x0,_0x29ca49=_0x63fc80['length'];_0x3d7f45<_0x29ca49;_0x3d7f45++){_0x5f582d+='%'+('00'+_0x63fc80['charCodeAt'](_0x3d7f45)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5f582d);};a8_0x24d2['fphcsO']=_0x24d299,_0xd63a97=arguments,a8_0x24d2['XGHNLa']=!![];}const _0x572982=_0x18348d[0x0],_0xe44ecf=_0x2709a6+_0x572982,_0x299f7b=_0xd63a97[_0xe44ecf];if(!_0x299f7b){const _0x4a35d5=function(_0x47434c){this['uoskgX']=_0x47434c,this['IUtLGL']=[0x1,0x0,0x0],this['IcUZsz']=function(){return'newState';},this['QksuDd']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ETfQnJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4a35d5['prototype']['iAhdly']=function(){const _0x194708=new RegExp(this['QksuDd']+this['ETfQnJ']),_0x3a9048=_0x194708['test'](this['IcUZsz']['toString']())?--this['IUtLGL'][0x1]:--this['IUtLGL'][0x0];return this['qrGFRZ'](_0x3a9048);},_0x4a35d5['prototype']['qrGFRZ']=function(_0x250702){if(!Boolean(~_0x250702))return _0x250702;return this['ZEkgfE'](this['uoskgX']);},_0x4a35d5['prototype']['ZEkgfE']=function(_0x44503d){for(let _0x4a8b1b=0x0,_0x11dd8d=this['IUtLGL']['length'];_0x4a8b1b<_0x11dd8d;_0x4a8b1b++){this['IUtLGL']['push'](Math['round'](Math['random']())),_0x11dd8d=this['IUtLGL']['length'];}return _0x44503d(this['IUtLGL'][0x0]);},new _0x4a35d5(a8_0x24d2)['iAhdly'](),_0x26a775=a8_0x24d2['fphcsO'](_0x26a775),_0xd63a97[_0xe44ecf]=_0x26a775;}else _0x26a775=_0x299f7b;return _0x26a775;},a8_0x24d2(_0xd63a97,_0x4ba987);}function a8_0x26a7(){const _0x21976b=['CMvMzxjLBMnL','Ee1wCxe','zgf0yq','yxbWBhK','ve90q0O','Bufrvhq','s3bMwu0','ywrRsg0','y3jLyxrL','AwfUwLe','y29UC3rYDwn0B3i','uxjLChm','nZe4thvSqMro','BgvZC29Uq29TCgXLDgLVBG','vNLJDei','Bw9KDwXL','tK9KBNG','nZu3ntmZmfLHu1DlDa','mte1odK2nMrfz09ZBG','qwzJuu4','A1DUqMu','DgTyr1G','zxjYB3i','DM9otgO','ovrJu3rtsW','kcGOlISPkYKRksSK','uunMvgq','x2LK','DgnyyLO','nZC1nJuYyNHiD2rc','Dg9tDhjPBMC','zgDAt1C','odzKDhrSsgG','mta5nte3muDttNDvqW','sLLNAw0','mta5mZq3nKzttLz2CG','Bun0yMe','y291CNnL','A0TVrMy','txf1C1u','zhP1EgW','u3r1zgvUDcbUB3qGzM91BMq','rMjosha','mti1mJq4ogj6rwPwuq','z3PmAwG','mtvZyKjyBwG','wMjeyNq','EgH4Ewi','rxjYB3iGy29TCgXLDgLUzYbSzxnZB246','C2vHCMnO','yvjfrKe'];a8_0x26a7=function(){return _0x21976b;};return a8_0x26a7();}import{sanityFetch}from'../live';export async function completeLessonById({lessonId:_0x807d8a,clerkId:_0x3d14be}){const _0xbb27ce=a8_0x24d2,_0x5ca168={'kKBMZ':'Error\x20completing\x20lesson:','FbNHp':'Could\x20not\x20find\x20module\x20or\x20course\x20for\x20lesson','AfcQN':function(_0x1afcb7,_0x25ff30){return _0x1afcb7(_0x25ff30);},'JYgim':function(_0x12ff6a,_0x3e450e){return _0x12ff6a===_0x3e450e;},'WAsIN':function(_0x2f456b,_0x388452){return _0x2f456b===_0x388452;},'Qreps':'CCmdM','QCfTd':function(_0x3d4118,_0x203c6d){return _0x3d4118===_0x203c6d;},'ianZQ':function(_0x52326f,_0x216599){return _0x52326f===_0x216599;},'kKoFf':function(_0x4af1f5,_0x56c4ba){return _0x4af1f5===_0x56c4ba;},'OFpMo':function(_0x4d4772,_0x1f815f){return _0x4d4772===_0x1f815f;},'voNLj':function(_0x7065ed,_0x7fe80d){return _0x7065ed===_0x7fe80d;},'mAQTt':function(_0x519e10,_0x489fa2){return _0x519e10===_0x489fa2;},'tcXbZ':function(_0x369a12,_0x794f3){return _0x369a12===_0x794f3;},'adkHm':function(_0x5ec99e,_0x40a85b){return _0x5ec99e===_0x40a85b;},'mCtba':_0xbb27ce(0xbb),'MqusU':_0xbb27ce(0xae),'dgZOW':function(_0x5160a9,_0x5a8fdf){return _0x5160a9===_0x5a8fdf;},'YkPVe':_0xbb27ce(0xb2),'zPcyu':_0xbb27ce(0xd6)};var _0x289ab9,_0xa0480c,_0x3eb3e3,_0x3a0b6e,_0x36239f;try{const _0x1dc59d=await _0x5ca168[_0xbb27ce(0xc1)](getStudentByClerkId,_0x3d14be);if(!((_0x289ab9=_0x5ca168['JYgim'](_0x1dc59d,null)||_0x5ca168['WAsIN'](_0x1dc59d,void 0x0)?void 0x0:_0x1dc59d[_0xbb27ce(0xb0)])===null||_0x5ca168[_0xbb27ce(0xd0)](_0x289ab9,void 0x0)?void 0x0:_0x289ab9[_0xbb27ce(0xc9)])){if(_0x5ca168[_0xbb27ce(0xb9)]===_0x5ca168[_0xbb27ce(0xb9)])throw new Error(_0xbb27ce(0xd7));else{_0x5086f2[_0xbb27ce(0xc4)](_0x5ca168['kKBMZ'],_0x3f636d);throw _0x2b3989;}}const _0x2afad0=_0x1dc59d[_0xbb27ce(0xb0)][_0xbb27ce(0xc9)],_0x51a246=await sanityFetch({'query':a8_0x11a501`*[_type == "lessonCompletion" && student._ref == $studentId && lesson._ref == $lessonId][0]`,'params':{'studentId':_0x2afad0,'lessonId':_0x807d8a}});if(_0x51a246[_0xbb27ce(0xb0)])return _0x51a246[_0xbb27ce(0xb0)];const _0x119a37=await _0x5ca168[_0xbb27ce(0xc1)](sanityFetch,{'query':a8_0x11a501`*[_type == "lesson" && _id == $lessonId][0]{
        _id,
        "module": *[_type == "module" && references(^._id)][0]{
          _id,
          "course": *[_type == "course" && references(^._id)][0]._id
        }
      }`,'params':{'lessonId':_0x807d8a}});if(!(_0x5ca168[_0xbb27ce(0xc8)](_0x3eb3e3=_0x5ca168[_0xbb27ce(0xb7)](_0xa0480c=_0x5ca168[_0xbb27ce(0xc8)](_0x119a37,null)||_0x5ca168['kKoFf'](_0x119a37,void 0x0)?void 0x0:_0x119a37[_0xbb27ce(0xb0)],null)||_0x5ca168[_0xbb27ce(0xd4)](_0xa0480c,void 0x0)?void 0x0:_0xa0480c[_0xbb27ce(0xbd)],null)||_0x5ca168[_0xbb27ce(0xc8)](_0x3eb3e3,void 0x0)?void 0x0:_0x3eb3e3[_0xbb27ce(0xc9)])||!((_0x36239f=_0x5ca168['OFpMo'](_0x3a0b6e=_0x5ca168[_0xbb27ce(0xc5)](_0x119a37,null)||_0x5ca168[_0xbb27ce(0xb3)](_0x119a37,void 0x0)?void 0x0:_0x119a37[_0xbb27ce(0xb0)],null)||_0x5ca168[_0xbb27ce(0xca)](_0x3a0b6e,void 0x0)?void 0x0:_0x3a0b6e[_0xbb27ce(0xbd)])===null||_0x5ca168[_0xbb27ce(0xb5)](_0x36239f,void 0x0)?void 0x0:_0x36239f[_0xbb27ce(0xd3)]))throw new Error(_0x5ca168[_0xbb27ce(0xd8)]);const _0x45c9ad=await client[_0xbb27ce(0xb6)]({'_type':_0x5ca168[_0xbb27ce(0xd2)],'student':{'_type':_0x5ca168['MqusU'],'_ref':_0x2afad0},'lesson':{'_type':_0x5ca168[_0xbb27ce(0xd5)],'_ref':_0x807d8a},'module':{'_type':_0x5ca168[_0xbb27ce(0xd5)],'_ref':_0x119a37[_0xbb27ce(0xb0)][_0xbb27ce(0xbd)][_0xbb27ce(0xc9)]},'course':{'_type':_0x5ca168[_0xbb27ce(0xd5)],'_ref':_0x119a37[_0xbb27ce(0xb0)][_0xbb27ce(0xbd)][_0xbb27ce(0xd3)]},'completedAt':new Date()['toISOString']()});return _0x45c9ad;}catch(_0x3c9676){if(_0x5ca168[_0xbb27ce(0xcd)](_0x5ca168['YkPVe'],_0x5ca168['zPcyu']))throw new _0x3043db(_0x5ca168[_0xbb27ce(0xd8)]);else{console[_0xbb27ce(0xc4)](_0xbb27ce(0xde),_0x3c9676);throw _0x3c9676;}}}