(function(_0x18b9d0,_0x14da31){const _0x14cd0e=a85_0x9a17,_0x3c200e=_0x18b9d0();while(!![]){try{const _0x1521ed=-parseInt(_0x14cd0e(0x151))/0x1*(-parseInt(_0x14cd0e(0x150))/0x2)+parseInt(_0x14cd0e(0x154))/0x3*(parseInt(_0x14cd0e(0x152))/0x4)+-parseInt(_0x14cd0e(0x168))/0x5*(-parseInt(_0x14cd0e(0x156))/0x6)+parseInt(_0x14cd0e(0x15e))/0x7+parseInt(_0x14cd0e(0x14c))/0x8+-parseInt(_0x14cd0e(0x167))/0x9*(parseInt(_0x14cd0e(0x162))/0xa)+-parseInt(_0x14cd0e(0x15b))/0xb*(parseInt(_0x14cd0e(0x15d))/0xc);if(_0x1521ed===_0x14da31)break;else _0x3c200e['push'](_0x3c200e['shift']());}catch(_0x3a4283){_0x3c200e['push'](_0x3c200e['shift']());}}}(a85_0x4165,0x43993));const a85_0x2932a8=(function(){let _0x188e5e=!![];return function(_0x185b07,_0x16513c){const _0x849a4=_0x188e5e?function(){const _0x4822c7=a85_0x9a17;if(_0x16513c){const _0x59ea39=_0x16513c[_0x4822c7(0x14f)](_0x185b07,arguments);return _0x16513c=null,_0x59ea39;}}:function(){};return _0x188e5e=![],_0x849a4;};}()),a85_0x1db3cf=a85_0x2932a8(this,function(){const _0xf461f7=a85_0x9a17,_0x2d6ef4={'jIRQp':_0xf461f7(0x16e)};return a85_0x1db3cf[_0xf461f7(0x163)]()['search'](_0x2d6ef4['jIRQp'])[_0xf461f7(0x163)]()[_0xf461f7(0x14d)](a85_0x1db3cf)[_0xf461f7(0x153)](_0x2d6ef4['jIRQp']);});a85_0x1db3cf();import a85_0x41b630 from'groq';function a85_0x4165(){const _0x2d3d27=['mJeZCNP6y2vu','u3r1zgvUDcbUB3qGzM91BMq','mtHlDLrzsfa','CMvMzxjLBMnL','Bw9KDwXL','q291BgqGBM90igzPBMqGBw9KDwXLig9YignVDxjZzsbMB3iGBgvZC29U','zxjYB3i','mtfYtej5B3O','u1PsthC','mJa2nZGWnZzXwu9tD1q','mZG2mJi2nePxtKjyBW','vMzZzu0','C0jguNu','swDpzge','mtbgALvWvhi','Dg9tDhjPBMC','Afbpwue','x2LK','A2fxC3K','mJeYodC3t2Xcqvvc','mZe2mta1s2fPvMH3','BxPuAvm','q213Cum','y3jLyxrL','BgvZC29Uq29TCgXLDgLVBG','D29UzM4','kcGOlISPkYKRksSK','y291CNnL','zgf0yq','rfrXBK8','rxjYB3iGy29TCgXLDgLUzYbSzxnZB246','ndm5mtqWohPisxbWtq','y29UC3rYDwn0B3i','Bvv0Bfq','yxbWBhK','nJCWsvDpy1jc','mta2mwPXqKXUDG','mJeYotjOyKXJwhO','C2vHCMnO'];a85_0x4165=function(){return _0x2d3d27;};return a85_0x4165();}import{client}from'../adminClient';import{getStudentByClerkId}from'../student/getStudentByClerkId';function a85_0x9a17(_0x54fe3e,_0x1803d3){const _0x5963a3=a85_0x4165();return a85_0x9a17=function(_0x1db3cf,_0x2932a8){_0x1db3cf=_0x1db3cf-0x14a;let _0x416519=_0x5963a3[_0x1db3cf];if(a85_0x9a17['vYGBSq']===undefined){var _0x9a17d=function(_0x427388){const _0x59e6f7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x336d24='',_0x532144='',_0x5d6a60=_0x336d24+_0x9a17d;for(let _0x563179=0x0,_0x4dcd2f,_0x96f5a3,_0x52a127=0x0;_0x96f5a3=_0x427388['charAt'](_0x52a127++);~_0x96f5a3&&(_0x4dcd2f=_0x563179%0x4?_0x4dcd2f*0x40+_0x96f5a3:_0x96f5a3,_0x563179++%0x4)?_0x336d24+=_0x5d6a60['charCodeAt'](_0x52a127+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x4dcd2f>>(-0x2*_0x563179&0x6)):_0x563179:0x0){_0x96f5a3=_0x59e6f7['indexOf'](_0x96f5a3);}for(let _0x560933=0x0,_0x5826cc=_0x336d24['length'];_0x560933<_0x5826cc;_0x560933++){_0x532144+='%'+('00'+_0x336d24['charCodeAt'](_0x560933)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x532144);};a85_0x9a17['kjqWdd']=_0x9a17d,_0x54fe3e=arguments,a85_0x9a17['vYGBSq']=!![];}const _0x17e0c4=_0x5963a3[0x0],_0x1e906f=_0x1db3cf+_0x17e0c4,_0x504d0b=_0x54fe3e[_0x1e906f];if(!_0x504d0b){const _0x503818=function(_0x3b426c){this['ZzwAnE']=_0x3b426c,this['gzzQtS']=[0x1,0x0,0x0],this['sMEwRn']=function(){return'newState';},this['YfGoNv']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['dWKWAT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x503818['prototype']['rBrGnV']=function(){const _0x1b5471=new RegExp(this['YfGoNv']+this['dWKWAT']),_0x107453=_0x1b5471['test'](this['sMEwRn']['toString']())?--this['gzzQtS'][0x1]:--this['gzzQtS'][0x0];return this['BgwqvF'](_0x107453);},_0x503818['prototype']['BgwqvF']=function(_0x296d38){if(!Boolean(~_0x296d38))return _0x296d38;return this['EKgfif'](this['ZzwAnE']);},_0x503818['prototype']['EKgfif']=function(_0x44f7e3){for(let _0x2f1213=0x0,_0x27cbea=this['gzzQtS']['length'];_0x2f1213<_0x27cbea;_0x2f1213++){this['gzzQtS']['push'](Math['round'](Math['random']())),_0x27cbea=this['gzzQtS']['length'];}return _0x44f7e3(this['gzzQtS'][0x0]);},new _0x503818(a85_0x9a17)['rBrGnV'](),_0x416519=a85_0x9a17['kjqWdd'](_0x416519),_0x54fe3e[_0x1e906f]=_0x416519;}else _0x416519=_0x504d0b;return _0x416519;},a85_0x9a17(_0x54fe3e,_0x1803d3);}import{sanityFetch}from'../live';export async function completeLessonById({lessonId:_0x4316eb,clerkId:_0x14b26e}){const _0xfce6d5=a85_0x9a17,_0x4ba793={'IgOda':_0xfce6d5(0x159),'hPOYA':_0xfce6d5(0x155),'DTqnO':'gVIaC','SZRLw':function(_0x2fec4d,_0x1f61a6){return _0x2fec4d(_0x1f61a6);},'UjTFf':function(_0x448d64,_0x2812b8){return _0x448d64(_0x2812b8);},'wonfn':_0xfce6d5(0x16c),'mUtlT':'reference','mzTiS':function(_0x2b7518,_0xa3a08d){return _0x2b7518===_0xa3a08d;},'VfseM':_0xfce6d5(0x166),'CmwqC':_0xfce6d5(0x14b)};try{if(_0xfce6d5(0x160)!==_0x4ba793[_0xfce6d5(0x14a)]){const _0x31a768=await _0x4ba793['SZRLw'](getStudentByClerkId,_0x14b26e);if(!_0x31a768?.['data']?.['_id'])throw new Error(_0x4ba793[_0xfce6d5(0x164)]);const _0x507d1a=_0x31a768[_0xfce6d5(0x170)]['_id'],_0x4df419=await _0x4ba793[_0xfce6d5(0x15c)](sanityFetch,{'query':a85_0x41b630`*[_type == "lessonCompletion" && student._ref == $studentId && lesson._ref == $lessonId][0]`,'params':{'studentId':_0x507d1a,'lessonId':_0x4316eb}});if(_0x4df419['data'])return _0x4df419[_0xfce6d5(0x170)];const _0x450e71=await _0x4ba793['UjTFf'](sanityFetch,{'query':a85_0x41b630`*[_type == "lesson" && _id == $lessonId][0]{
        _id,
        "module": *[_type == "module" && references(^._id)][0]{
          _id,
          "course": *[_type == "course" && references(^._id)][0]._id
        }
      }`,'params':{'lessonId':_0x4316eb}});if(!_0x450e71?.[_0xfce6d5(0x170)]?.[_0xfce6d5(0x158)]?.[_0xfce6d5(0x165)]||!_0x450e71?.[_0xfce6d5(0x170)]?.[_0xfce6d5(0x158)]?.[_0xfce6d5(0x16f)])throw new Error(_0x4ba793[_0xfce6d5(0x161)]);const _0x3debe3=await client[_0xfce6d5(0x16b)]({'_type':_0x4ba793[_0xfce6d5(0x16d)],'student':{'_type':_0xfce6d5(0x157),'_ref':_0x507d1a},'lesson':{'_type':_0x4ba793['mUtlT'],'_ref':_0x4316eb},'module':{'_type':_0x4ba793[_0xfce6d5(0x14e)],'_ref':_0x450e71[_0xfce6d5(0x170)][_0xfce6d5(0x158)][_0xfce6d5(0x165)]},'course':{'_type':_0x4ba793[_0xfce6d5(0x14e)],'_ref':_0x450e71['data'][_0xfce6d5(0x158)][_0xfce6d5(0x16f)]},'completedAt':new Date()['toISOString']()});return _0x3debe3;}else throw new _0x3d81ce(_0x4ba793[_0xfce6d5(0x161)]);}catch(_0xef1992){if(_0x4ba793[_0xfce6d5(0x169)](_0x4ba793[_0xfce6d5(0x15f)],_0xfce6d5(0x166))){console[_0xfce6d5(0x15a)](_0x4ba793[_0xfce6d5(0x16a)],_0xef1992);throw _0xef1992;}else throw new _0x4683e6(_0x4ba793[_0xfce6d5(0x164)]);}}