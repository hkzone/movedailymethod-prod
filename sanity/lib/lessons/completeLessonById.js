(function(_0x2f96b5,_0x40a704){const _0x5f1cff=a8_0x33c4,_0x2d5ffc=_0x2f96b5();while(!![]){try{const _0x5ebcd9=-parseInt(_0x5f1cff(0x8b))/0x1*(-parseInt(_0x5f1cff(0x7d))/0x2)+-parseInt(_0x5f1cff(0xa2))/0x3+parseInt(_0x5f1cff(0xa7))/0x4*(parseInt(_0x5f1cff(0x9b))/0x5)+-parseInt(_0x5f1cff(0x95))/0x6*(-parseInt(_0x5f1cff(0xa4))/0x7)+-parseInt(_0x5f1cff(0x84))/0x8*(parseInt(_0x5f1cff(0x80))/0x9)+parseInt(_0x5f1cff(0x89))/0xa*(parseInt(_0x5f1cff(0x85))/0xb)+-parseInt(_0x5f1cff(0x9f))/0xc*(-parseInt(_0x5f1cff(0x96))/0xd);if(_0x5ebcd9===_0x40a704)break;else _0x2d5ffc['push'](_0x2d5ffc['shift']());}catch(_0x47cce0){_0x2d5ffc['push'](_0x2d5ffc['shift']());}}}(a8_0x5390,0x2c01f));const a8_0x518f68=(function(){const _0x1bfeaa=a8_0x33c4,_0x541c6d={'bAUyR':'RbZlc','cBXui':function(_0x2be781,_0x39e0ce){return _0x2be781!==_0x39e0ce;},'JUvmz':_0x1bfeaa(0x8d)};let _0x478363=!![];return function(_0x2d425d,_0x1ccf08){const _0x1cb70b=_0x1bfeaa;if(_0x541c6d[_0x1cb70b(0xa8)](_0x541c6d[_0x1cb70b(0x86)],_0x1cb70b(0x8d))){const _0x2f62b7=_0x195917?function(){if(_0x1c0623){const _0x591652=_0x54ab26['apply'](_0x21611a,arguments);return _0xe95db6=null,_0x591652;}}:function(){};return _0x11a76b=![],_0x2f62b7;}else{const _0x58a8b1=_0x478363?function(){const _0x10a302=_0x1cb70b;if(_0x541c6d['bAUyR']===_0x10a302(0x9c)){if(_0x3201f1){const _0x568eea=_0x45484a[_0x10a302(0x99)](_0x472712,arguments);return _0x2738d=null,_0x568eea;}}else{if(_0x1ccf08){const _0x4dff8f=_0x1ccf08['apply'](_0x2d425d,arguments);return _0x1ccf08=null,_0x4dff8f;}}}:function(){};return _0x478363=![],_0x58a8b1;}};}()),a8_0x593202=a8_0x518f68(this,function(){const _0x794f62=a8_0x33c4,_0x2e993f={'mKNuU':_0x794f62(0x79)};return a8_0x593202['toString']()['search'](_0x2e993f[_0x794f62(0xa0)])['toString']()[_0x794f62(0xa5)](a8_0x593202)['search'](_0x794f62(0x79));});function a8_0x33c4(_0x51ea54,_0x33db9e){const _0x498c09=a8_0x5390();return a8_0x33c4=function(_0x593202,_0x518f68){_0x593202=_0x593202-0x79;let _0x53902c=_0x498c09[_0x593202];if(a8_0x33c4['hrFqoY']===undefined){var _0x33c41b=function(_0x5916c8){const _0x21e54c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fb02f='',_0x2a38f1='',_0x3789c1=_0x3fb02f+_0x33c41b;for(let _0x6587e0=0x0,_0x365d12,_0x47c991,_0x51e6c8=0x0;_0x47c991=_0x5916c8['charAt'](_0x51e6c8++);~_0x47c991&&(_0x365d12=_0x6587e0%0x4?_0x365d12*0x40+_0x47c991:_0x47c991,_0x6587e0++%0x4)?_0x3fb02f+=_0x3789c1['charCodeAt'](_0x51e6c8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x365d12>>(-0x2*_0x6587e0&0x6)):_0x6587e0:0x0){_0x47c991=_0x21e54c['indexOf'](_0x47c991);}for(let _0x195917=0x0,_0x553633=_0x3fb02f['length'];_0x195917<_0x553633;_0x195917++){_0x2a38f1+='%'+('00'+_0x3fb02f['charCodeAt'](_0x195917)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2a38f1);};a8_0x33c4['dnmcdG']=_0x33c41b,_0x51ea54=arguments,a8_0x33c4['hrFqoY']=!![];}const _0x5c59a5=_0x498c09[0x0],_0xd88bdc=_0x593202+_0x5c59a5,_0xc26ef7=_0x51ea54[_0xd88bdc];if(!_0xc26ef7){const _0x337f5a=function(_0xb21f0c){this['VGCvPq']=_0xb21f0c,this['ixcrmT']=[0x1,0x0,0x0],this['oefHkt']=function(){return'newState';},this['guCJtS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['vZnjpn']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x337f5a['prototype']['jEEkIi']=function(){const _0x36d884=new RegExp(this['guCJtS']+this['vZnjpn']),_0x11a76b=_0x36d884['test'](this['oefHkt']['toString']())?--this['ixcrmT'][0x1]:--this['ixcrmT'][0x0];return this['sPhbGX'](_0x11a76b);},_0x337f5a['prototype']['sPhbGX']=function(_0x1c0623){if(!Boolean(~_0x1c0623))return _0x1c0623;return this['qdKvbC'](this['VGCvPq']);},_0x337f5a['prototype']['qdKvbC']=function(_0x5b9e77){for(let _0x512d2b=0x0,_0x4a6db2=this['ixcrmT']['length'];_0x512d2b<_0x4a6db2;_0x512d2b++){this['ixcrmT']['push'](Math['round'](Math['random']())),_0x4a6db2=this['ixcrmT']['length'];}return _0x5b9e77(this['ixcrmT'][0x0]);},new _0x337f5a(a8_0x33c4)['jEEkIi'](),_0x53902c=a8_0x33c4['dnmcdG'](_0x53902c),_0x51ea54[_0xd88bdc]=_0x53902c;}else _0x53902c=_0xc26ef7;return _0x53902c;},a8_0x33c4(_0x51ea54,_0x33db9e);}a8_0x593202();import a8_0x3c9ba8 from'groq';import{client}from'../adminClient';function a8_0x5390(){const _0x1459a7=['zgf0yq','B2PSDwO','EvzquLm','ndjiCvvdBhi','mte3rLn1yLHp','AvHqyLa','C0rMwKu','yxbWBhK','zxnnzNK','mZvvB0zRsKq','shj4uLO','ywnHvwO','ExfxDLy','ndCZmti0tM9St0fg','BuToDvu','t1vZueu','nJu3odq5sKnHq0XW','t0vHv2y','mtuYmZj2uMDXA2G','y29UC3rYDwn0B3i','rxjYB3iGy29TCgXLDgLUzYbSzxnZB246','mta5mZa4BhHAC3jS','y0jyDwK','kcGOlISPkYKRksSK','EKffu0m','tMTZzwW','CMvMzxjLBMnL','odyZmMzHAMTRyG','tKjJuhm','ALb5seS','mZaXmJaWm1fjCvHXBG','Bw9tEgC','shrMrem','y3jLyxrL','ognJtuDntW','ntiYotCZt0LewLDL','sLv2BxO','r3f6wLK','BgvZC29Uq29TCgXLDgLVBG','mZbJzu1pBwi','q291BgqGBM90igzPBMqGBw9KDwXLig9YignVDxjZzsbMB3iGBgvZC29U','n2Dls1bVuq','Bw9KDwXL','rKrqDu4','u3r1zgvUDcbUB3qGzM91BMq','qun3sKK','x2LK','y291CNnL'];a8_0x5390=function(){return _0x1459a7;};return a8_0x5390();}import{getStudentByClerkId}from'../student/getStudentByClerkId';import{sanityFetch}from'../live';export async function completeLessonById({lessonId:_0x34147a,clerkId:_0x4c110c}){const _0x11e215=a8_0x33c4,_0x3641e6={'ojluj':function(_0x140f6f,_0x2f7c09){return _0x140f6f===_0x2f7c09;},'Nksel':function(_0x2e1bef,_0x5d7c71){return _0x2e1bef(_0x5d7c71);},'GqzZY':function(_0x2f2335,_0x42e04c){return _0x2f2335===_0x42e04c;},'moSxg':function(_0x526ee5,_0x22ae65){return _0x526ee5===_0x22ae65;},'acaUj':function(_0x533182,_0x490e15){return _0x533182===_0x490e15;},'fKiMw':_0x11e215(0x8f),'OEaWf':'TapbF','jPyHK':function(_0x599c6e,_0x39ab5e){return _0x599c6e(_0x39ab5e);},'sDfZE':function(_0x5063d0,_0x14f407){return _0x5063d0===_0x14f407;},'SzpTI':function(_0x571bdf,_0x209c0f){return _0x571bdf===_0x209c0f;},'NBcPs':function(_0x496b23,_0x277c37){return _0x496b23===_0x277c37;},'zAESC':function(_0x28ed5b,_0x4f081b){return _0x28ed5b===_0x4f081b;},'OUsPE':function(_0x1abe8c,_0x22b951){return _0x1abe8c===_0x22b951;},'yVPRS':function(_0xc58271,_0x472528){return _0xc58271===_0x472528;},'swYni':function(_0x2d00ce,_0x39a01a){return _0x2d00ce===_0x39a01a;},'HtfDC':_0x11e215(0x88),'iXPbP':_0x11e215(0x7c),'yqWvV':_0x11e215(0xa6)};var _0x5b7656,_0x18e540,_0x27f65f,_0xfc283,_0x39de8d;try{if(_0x3641e6[_0x11e215(0x93)](_0x11e215(0x9a),_0x11e215(0x9a))){const _0x1a9369=await _0x3641e6[_0x11e215(0x7b)](getStudentByClerkId,_0x4c110c);if(!(_0x3641e6[_0x11e215(0x93)](_0x5b7656=_0x3641e6[_0x11e215(0x87)](_0x1a9369,null)||_0x3641e6['moSxg'](_0x1a9369,void 0x0)?void 0x0:_0x1a9369[_0x11e215(0x92)],null)||_0x3641e6[_0x11e215(0x81)](_0x5b7656,void 0x0)?void 0x0:_0x5b7656[_0x11e215(0x90)])){if(_0x3641e6[_0x11e215(0x9d)](_0x3641e6['fKiMw'],_0x3641e6[_0x11e215(0xa3)]))throw new _0x1498a5(_0x11e215(0x8e));else throw new Error(_0x11e215(0x8e));}const _0x3b18bb=_0x1a9369[_0x11e215(0x92)][_0x11e215(0x90)],_0x445ea3=await _0x3641e6[_0x11e215(0x7f)](sanityFetch,{'query':a8_0x3c9ba8`*[_type == "lessonCompletion" && student._ref == $studentId && lesson._ref == $lessonId][0]`,'params':{'studentId':_0x3b18bb,'lessonId':_0x34147a}});if(_0x445ea3[_0x11e215(0x92)])return _0x445ea3['data'];const _0x2bc445=await _0x3641e6[_0x11e215(0x7b)](sanityFetch,{'query':a8_0x3c9ba8`*[_type == "lesson" && _id == $lessonId][0]{
        _id,
        "module": *[_type == "module" && references(^._id)][0]{
          _id,
          "course": *[_type == "course" && references(^._id)][0]._id
        }
      }`,'params':{'lessonId':_0x34147a}});if(!(_0x3641e6[_0x11e215(0x98)](_0x27f65f=_0x3641e6['SzpTI'](_0x18e540=_0x2bc445===null||_0x3641e6[_0x11e215(0x7e)](_0x2bc445,void 0x0)?void 0x0:_0x2bc445[_0x11e215(0x92)],null)||_0x3641e6['zAESC'](_0x18e540,void 0x0)?void 0x0:_0x18e540[_0x11e215(0x8c)],null)||_0x3641e6[_0x11e215(0x7e)](_0x27f65f,void 0x0)?void 0x0:_0x27f65f[_0x11e215(0x90)])||!(_0x3641e6[_0x11e215(0x7a)](_0x39de8d=_0x3641e6[_0x11e215(0x7e)](_0xfc283=_0x3641e6[_0x11e215(0xa1)](_0x2bc445,null)||_0x3641e6[_0x11e215(0x94)](_0x2bc445,void 0x0)?void 0x0:_0x2bc445[_0x11e215(0x92)],null)||_0x3641e6[_0x11e215(0x87)](_0xfc283,void 0x0)?void 0x0:_0xfc283['module'],null)||_0x3641e6['swYni'](_0x39de8d,void 0x0)?void 0x0:_0x39de8d[_0x11e215(0x91)]))throw new Error(_0x11e215(0x8a));const _0x5a7b16=await client[_0x11e215(0x83)]({'_type':_0x3641e6[_0x11e215(0x82)],'student':{'_type':'reference','_ref':_0x3b18bb},'lesson':{'_type':_0x3641e6['iXPbP'],'_ref':_0x34147a},'module':{'_type':_0x3641e6[_0x11e215(0x97)],'_ref':_0x2bc445['data'][_0x11e215(0x8c)][_0x11e215(0x90)]},'course':{'_type':_0x3641e6[_0x11e215(0x97)],'_ref':_0x2bc445[_0x11e215(0x92)][_0x11e215(0x8c)]['course']},'completedAt':new Date()['toISOString']()});return _0x5a7b16;}else return _0x4b6141[_0x11e215(0x92)];}catch(_0x3cedea){console['error'](_0x3641e6[_0x11e215(0x9e)],_0x3cedea);throw _0x3cedea;}}