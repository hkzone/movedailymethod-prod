"use client";

'use client';(function(_0x1cea57,_0x4a480f){const _0x2c0ff4=a9_0x5503,_0x569afa=_0x1cea57();while(!![]){try{const _0x268f30=parseInt(_0x2c0ff4(0x108))/0x1*(parseInt(_0x2c0ff4(0xfe))/0x2)+-parseInt(_0x2c0ff4(0x106))/0x3*(-parseInt(_0x2c0ff4(0xfc))/0x4)+parseInt(_0x2c0ff4(0xff))/0x5+-parseInt(_0x2c0ff4(0x100))/0x6*(parseInt(_0x2c0ff4(0x109))/0x7)+parseInt(_0x2c0ff4(0xfb))/0x8*(-parseInt(_0x2c0ff4(0xf9))/0x9)+parseInt(_0x2c0ff4(0x103))/0xa+parseInt(_0x2c0ff4(0x10a))/0xb*(-parseInt(_0x2c0ff4(0x105))/0xc);if(_0x268f30===_0x4a480f)break;else _0x569afa['push'](_0x569afa['shift']());}catch(_0xc73fe0){_0x569afa['push'](_0x569afa['shift']());}}}(a9_0x2d8a,0x77929));import{jsx as a9_0x25f267,jsxs as a9_0x93fb60,Fragment as a9_0x463710}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a9_0xc2bd71 from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';function a9_0x5503(_0x4c1db0,_0x1af42f){const _0x2d8a08=a9_0x2d8a();return a9_0x5503=function(_0x5503cc,_0x9db359){_0x5503cc=_0x5503cc-0xf9;let _0x40c849=_0x2d8a08[_0x5503cc];return _0x40c849;},a9_0x5503(_0x4c1db0,_0x1af42f);}import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0x1c8639,completedLessons:completedLessons=[]}){const _0x3fc77d=a9_0x5503,_0x3e8b0c=usePathname(),{isOpen:_0x40faac,toggle:_0x571568,close:_0x36f03b}=useSidebar(),[_0x26ba0f,_0x1b64ee]=useState(![]),[_0x2a151d,_0x41e849]=useState([]);useEffect(()=>{const _0x5e0d7b=a9_0x5503;if(_0x3e8b0c&&_0x1c8639?.['modules']){const _0x1ab4e5=_0x1c8639['modules']['find'](_0x13f178=>_0x13f178['lessons']?.['some'](_0x32611f=>_0x3e8b0c==='/dashboard/courses/'+_0x1c8639['_id']+'/lessons/'+_0x32611f[_0x5e0d7b(0x107)]))?.['_id'];_0x1ab4e5&&!_0x2a151d['includes'](_0x1ab4e5)&&_0x41e849(_0x37118c=>[..._0x37118c,_0x1ab4e5]);}},[_0x3e8b0c,_0x1c8639,_0x2a151d]),useEffect(()=>{_0x1b64ee(!![]);},[]);if(!_0x1c8639||!_0x26ba0f)return null;const _0x228246=calculateCourseProgress(_0x1c8639['modules'],completedLessons),_0x4ef2b0=()=>a9_0x93fb60('div',{'className':'h-full flex flex-col','children':[a9_0x93fb60('div',{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a9_0x93fb60('div',{'className':'flex items-center justify-between','children':[a9_0x93fb60(a9_0xc2bd71,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a9_0x25f267(ArrowLeft,{'className':'h-4 w-4'}),a9_0x93fb60('div',{'className':'flex items-center gap-x-2','children':[a9_0x25f267(Library,{'className':'h-4 w-4'}),a9_0x25f267('span',{'children':'Course\x20Library'})]})]}),a9_0x93fb60('div',{'className':'space-x-2','children':[a9_0x25f267(DarkModeToggle,{}),a9_0x25f267(Button,{'onClick':_0x36f03b,'variant':'ghost','className':'lg:hidden -mr-2','size':'icon','children':a9_0x25f267(X,{'className':'h-4 w-4'})})]})]}),a9_0x93fb60('div',{'className':'space-y-4','children':[a9_0x25f267('h1',{'className':'font-semibold text-2xl','children':_0x1c8639['title']}),a9_0x25f267(CourseProgress,{'progress':_0x228246,'variant':'success','label':'Course\x20Progress'})]})]}),a9_0x25f267(ScrollArea,{'className':'flex-1','children':a9_0x25f267('div',{'className':'p-2 lg:p-4','children':a9_0x25f267(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x2a151d,'onValueChange':_0x41e849,'children':_0x1c8639['modules']?.[_0x3fc77d(0xfa)]((_0x47d476,_0x4f9d0b)=>a9_0x93fb60(AccordionItem,{'value':_0x47d476['_id'],'className':cn('border-none',_0x4f9d0b%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a9_0x25f267(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a9_0x93fb60('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a9_0x25f267('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x4f9d0b+0x1)['padStart'](0x2,'0')}),a9_0x93fb60('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a9_0x25f267('p',{'className':'text-sm font-medium truncate','children':_0x47d476['title']}),a9_0x93fb60('p',{'className':'text-xs text-muted-foreground','children':[_0x47d476['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a9_0x25f267(AccordionContent,{'className':'pt-2','children':a9_0x25f267('div',{'className':'flex flex-col space-y-1','children':_0x47d476['lessons']?.['map']((_0x483a39,_0xea3c27)=>{const _0x1926c5=_0x3e8b0c==='/dashboard/courses/'+_0x1c8639['_id']+'/lessons/'+_0x483a39['_id'],_0x4dfdd8=completedLessons['some'](_0x3a8703=>_0x3a8703['lesson']?.['_id']===_0x483a39['_id']);return a9_0x93fb60(a9_0xc2bd71,{'prefetch':![],'href':'/dashboard/courses/'+_0x1c8639['_id']+'/lessons/'+_0x483a39['_id'],'onClick':_0x36f03b,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x1926c5&&'bg-muted',_0x4dfdd8&&'text-muted-foreground'),'children':[a9_0x25f267('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0xea3c27+0x1)['padStart'](0x2,'0')}),_0x4dfdd8?a9_0x25f267(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a9_0x25f267(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x1926c5?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a9_0x25f267('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x4dfdd8&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x483a39['title']}),_0x1926c5&&a9_0x25f267('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x483a39['_id']);})})})]},_0x47d476['_id']))})})}),_0x1c8639?.['courseMaterials']&&_0x1c8639['courseMaterials']['length']>0x0&&a9_0x25f267('div',{'className':'border-t p-4 lg:p-6','children':a9_0x25f267(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a9_0x93fb60(AccordionItem,{'value':'course-resources','className':'border-none','children':[a9_0x25f267(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a9_0x93fb60(_0x3fc77d(0x104),{'className':'flex flex-col items-start text-left','children':[a9_0x25f267('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a9_0x25f267('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a9_0x25f267(AccordionContent,{'className':'pt-2','children':a9_0x25f267('div',{'className':'space-y-3','children':_0x1c8639['courseMaterials']['map'](_0x5f40c6=>_0x5f40c6?.['asset']?.['url']?a9_0x93fb60('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a9_0x93fb60('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a9_0x25f267(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a9_0x93fb60('div',{'className':'flex flex-col overflow-hidden','children':[a9_0x25f267('span',{'className':'font-medium text-sm truncate','title':_0x5f40c6['title']||_0x5f40c6['asset']['originalFilename']||'Course\x20Resource','children':_0x5f40c6['title']||_0x5f40c6['asset']['originalFilename']||'Course\x20Resource'}),(_0x5f40c6['asset']['size']||_0x5f40c6['asset']['extension'])&&a9_0x93fb60('span',{'className':'text-xs text-muted-foreground','children':[_0x5f40c6['asset']['size']?formatFileSize(_0x5f40c6['asset']['size']):'',_0x5f40c6['asset'][_0x3fc77d(0x102)]&&'\x20('+_0x5f40c6['asset']['extension']['toUpperCase']()+')']})]})]}),a9_0x25f267(a9_0xc2bd71,{'href':_0x5f40c6['asset']['url'],'target':'_blank','rel':'noopener\x20noreferrer','download':_0x5f40c6['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a9_0x25f267(Download,{'className':'h-3 w-3'})})]},_0x5f40c6['_key']):null)})})]})})})]});return a9_0x93fb60(a9_0x463710,{'children':[a9_0x25f267('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a9_0x93fb60(TooltipProvider,{'delayDuration':0x0,'children':[a9_0x93fb60(Tooltip,{'children':[a9_0x25f267(TooltipTrigger,{'asChild':!![],'children':a9_0x25f267(a9_0xc2bd71,{'href':'/','prefetch':![],'children':a9_0x25f267(Button,{'variant':_0x3fc77d(0xfd),'size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a9_0x25f267(Library,{'className':'h-5 w-5'})})})}),a9_0x25f267(TooltipContent,{'side':'right','children':a9_0x25f267('p',{'children':_0x3fc77d(0x101)})})]}),a9_0x93fb60(Tooltip,{'children':[a9_0x25f267(TooltipTrigger,{'asChild':!![],'children':a9_0x25f267(Button,{'onClick':_0x571568,'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a9_0x25f267(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x40faac&&'rotate-180')})})}),a9_0x25f267(TooltipContent,{'side':'right','children':a9_0x25f267('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a9_0x25f267('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x40faac?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a9_0x25f267('div',{'className':'h-full','children':a9_0x25f267(_0x4ef2b0,{})})}),_0x40faac&&a9_0x25f267('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0x36f03b})]});}function a9_0x2d8a(){const _0x538c93=['818553QbmYNK','_id','866581UcXKsI','161ZqmcDC','11KgRkQi','27yZidOh','map','1733272sNfpiv','12qemaMv','ghost','2RMqCGw','1979195CQPBuc','132138POqEDV','Course\x20Library','extension','7285470DrUvzB','div','13958940wGkObF'];a9_0x2d8a=function(){return _0x538c93;};return a9_0x2d8a();}
