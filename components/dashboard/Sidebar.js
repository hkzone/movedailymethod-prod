"use client";

'use client';(function(_0x496a07,_0xe96f34){const _0x46e64f=a9_0x2d43,_0x4e5042=_0x496a07();while(!![]){try{const _0x4ac077=parseInt(_0x46e64f(0x121))/0x1+-parseInt(_0x46e64f(0x11f))/0x2*(-parseInt(_0x46e64f(0x10f))/0x3)+-parseInt(_0x46e64f(0x112))/0x4+parseInt(_0x46e64f(0x122))/0x5+-parseInt(_0x46e64f(0x11d))/0x6*(parseInt(_0x46e64f(0x115))/0x7)+parseInt(_0x46e64f(0x11a))/0x8*(-parseInt(_0x46e64f(0x118))/0x9)+-parseInt(_0x46e64f(0x119))/0xa*(parseInt(_0x46e64f(0x113))/0xb);if(_0x4ac077===_0xe96f34)break;else _0x4e5042['push'](_0x4e5042['shift']());}catch(_0x23c017){_0x4e5042['push'](_0x4e5042['shift']());}}}(a9_0xa352,0x23749));function a9_0xa352(){const _0x4c72a4=['padStart','169931jiQgZg','1088505jiEjwv','span','title','1734dUMFEb','some','modules','148904ejkQAY','77alzwVw','lessons','111293mMyisP','Course\x20Library','div','39771DPiXJd','337510cLBtvI','8GapjCu','asset','extension','78cNkOzA','_id','838gpdcPU'];a9_0xa352=function(){return _0x4c72a4;};return a9_0xa352();}import{jsx as a9_0x1ca69a,jsxs as a9_0x5c15c0,Fragment as a9_0x2c02a9}from'react/jsx-runtime';function a9_0x2d43(_0x510caa,_0x3ceb9b){const _0xa3528e=a9_0xa352();return a9_0x2d43=function(_0x2d438d,_0x5b9c5e){_0x2d438d=_0x2d438d-0x10d;let _0x2717a5=_0xa3528e[_0x2d438d];return _0x2717a5;},a9_0x2d43(_0x510caa,_0x3ceb9b);}import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a9_0x6b478a from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0x41caed,completedLessons:completedLessons=[]}){const _0x101dc6=a9_0x2d43,_0x1d9c27=usePathname(),{isOpen:_0x8976ac,toggle:_0xdc31ae,close:_0xdfef8}=useSidebar(),[_0x2dd2cb,_0x2665e1]=useState(![]),[_0x53b4ec,_0x165855]=useState([]);useEffect(()=>{const _0x5ae8d2=a9_0x2d43;if(_0x1d9c27&&_0x41caed?.['modules']){const _0x5d5424=_0x41caed[_0x5ae8d2(0x111)]['find'](_0x4aeedd=>_0x4aeedd[_0x5ae8d2(0x114)]?.['some'](_0x358fa6=>_0x1d9c27==='/dashboard/courses/'+_0x41caed['_id']+'/lessons/'+_0x358fa6['_id']))?.['_id'];_0x5d5424&&!_0x53b4ec['includes'](_0x5d5424)&&_0x165855(_0xac613f=>[..._0xac613f,_0x5d5424]);}},[_0x1d9c27,_0x41caed,_0x53b4ec]),useEffect(()=>{_0x2665e1(!![]);},[]);if(!_0x41caed||!_0x2dd2cb)return null;const _0x3d8eda=calculateCourseProgress(_0x41caed['modules'],completedLessons),_0x4a782f=()=>a9_0x5c15c0('div',{'className':'h-full flex flex-col','children':[a9_0x5c15c0(_0x101dc6(0x117),{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a9_0x5c15c0('div',{'className':'flex items-center justify-between','children':[a9_0x5c15c0(a9_0x6b478a,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a9_0x1ca69a(ArrowLeft,{'className':'h-4 w-4'}),a9_0x5c15c0('div',{'className':'flex items-center gap-x-2','children':[a9_0x1ca69a(Library,{'className':'h-4 w-4'}),a9_0x1ca69a('span',{'children':'Course\x20Library'})]})]}),a9_0x5c15c0('div',{'className':'space-x-2','children':[a9_0x1ca69a(DarkModeToggle,{}),a9_0x1ca69a(Button,{'onClick':_0xdfef8,'variant':'ghost','className':'lg:hidden -mr-2','size':'icon','children':a9_0x1ca69a(X,{'className':'h-4 w-4'})})]})]}),a9_0x5c15c0(_0x101dc6(0x117),{'className':'space-y-4','children':[a9_0x1ca69a('h1',{'className':'font-semibold text-2xl','children':_0x41caed['title']}),a9_0x1ca69a(CourseProgress,{'progress':_0x3d8eda,'variant':'success','label':'Course\x20Progress'})]})]}),a9_0x1ca69a(ScrollArea,{'className':'flex-1','children':a9_0x1ca69a('div',{'className':'p-2 lg:p-4','children':a9_0x1ca69a(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x53b4ec,'onValueChange':_0x165855,'children':_0x41caed['modules']?.['map']((_0x5b048c,_0x352c30)=>a9_0x5c15c0(AccordionItem,{'value':_0x5b048c['_id'],'className':cn('border-none',_0x352c30%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a9_0x1ca69a(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a9_0x5c15c0('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a9_0x1ca69a('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x352c30+0x1)[_0x101dc6(0x120)](0x2,'0')}),a9_0x5c15c0('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a9_0x1ca69a('p',{'className':'text-sm font-medium truncate','children':_0x5b048c['title']}),a9_0x5c15c0('p',{'className':'text-xs text-muted-foreground','children':[_0x5b048c['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a9_0x1ca69a(AccordionContent,{'className':'pt-2','children':a9_0x1ca69a('div',{'className':'flex flex-col space-y-1','children':_0x5b048c[_0x101dc6(0x114)]?.['map']((_0x1d0607,_0x5b0304)=>{const _0x818e8d=_0x101dc6,_0x2aa2d5=_0x1d9c27==='/dashboard/courses/'+_0x41caed['_id']+'/lessons/'+_0x1d0607['_id'],_0x35fb6a=completedLessons[_0x818e8d(0x110)](_0x31ca91=>_0x31ca91['lesson']?.['_id']===_0x1d0607['_id']);return a9_0x5c15c0(a9_0x6b478a,{'prefetch':![],'href':'/dashboard/courses/'+_0x41caed['_id']+'/lessons/'+_0x1d0607[_0x818e8d(0x11e)],'onClick':_0xdfef8,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x2aa2d5&&'bg-muted',_0x35fb6a&&'text-muted-foreground'),'children':[a9_0x1ca69a('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x5b0304+0x1)['padStart'](0x2,'0')}),_0x35fb6a?a9_0x1ca69a(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a9_0x1ca69a(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x2aa2d5?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a9_0x1ca69a('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x35fb6a&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x1d0607['title']}),_0x2aa2d5&&a9_0x1ca69a('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x1d0607['_id']);})})})]},_0x5b048c['_id']))})})}),_0x41caed?.['courseMaterials']&&_0x41caed['courseMaterials']['length']>0x0&&a9_0x1ca69a('div',{'className':'border-t p-4 lg:p-6','children':a9_0x1ca69a(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a9_0x5c15c0(AccordionItem,{'value':'course-resources','className':'border-none','children':[a9_0x1ca69a(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a9_0x5c15c0('div',{'className':'flex flex-col items-start text-left','children':[a9_0x1ca69a('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a9_0x1ca69a('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a9_0x1ca69a(AccordionContent,{'className':'pt-2','children':a9_0x1ca69a('div',{'className':'space-y-3','children':_0x41caed['courseMaterials']['map'](_0x1f19e5=>_0x1f19e5?.['asset']?.['url']?a9_0x5c15c0(_0x101dc6(0x117),{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a9_0x5c15c0('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a9_0x1ca69a(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a9_0x5c15c0(_0x101dc6(0x117),{'className':'flex flex-col overflow-hidden','children':[a9_0x1ca69a(_0x101dc6(0x10d),{'className':'font-medium text-sm truncate','title':_0x1f19e5['title']||_0x1f19e5['asset']['originalFilename']||'Course\x20Resource','children':_0x1f19e5[_0x101dc6(0x10e)]||_0x1f19e5['asset']['originalFilename']||'Course\x20Resource'}),(_0x1f19e5['asset']['size']||_0x1f19e5['asset'][_0x101dc6(0x11c)])&&a9_0x5c15c0('span',{'className':'text-xs text-muted-foreground','children':[_0x1f19e5['asset']['size']?formatFileSize(_0x1f19e5[_0x101dc6(0x11b)]['size']):'',_0x1f19e5['asset']['extension']&&'\x20('+_0x1f19e5['asset']['extension']['toUpperCase']()+')']})]})]}),a9_0x1ca69a(a9_0x6b478a,{'href':_0x1f19e5['asset']['url'],'target':'_blank','rel':'noopener\x20noreferrer','download':_0x1f19e5['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a9_0x1ca69a(Download,{'className':'h-3 w-3'})})]},_0x1f19e5['_key']):null)})})]})})})]});return a9_0x5c15c0(a9_0x2c02a9,{'children':[a9_0x1ca69a('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a9_0x5c15c0(TooltipProvider,{'delayDuration':0x0,'children':[a9_0x5c15c0(Tooltip,{'children':[a9_0x1ca69a(TooltipTrigger,{'asChild':!![],'children':a9_0x1ca69a(a9_0x6b478a,{'href':'/','prefetch':![],'children':a9_0x1ca69a(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a9_0x1ca69a(Library,{'className':'h-5 w-5'})})})}),a9_0x1ca69a(TooltipContent,{'side':'right','children':a9_0x1ca69a('p',{'children':_0x101dc6(0x116)})})]}),a9_0x5c15c0(Tooltip,{'children':[a9_0x1ca69a(TooltipTrigger,{'asChild':!![],'children':a9_0x1ca69a(Button,{'onClick':_0xdc31ae,'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a9_0x1ca69a(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x8976ac&&'rotate-180')})})}),a9_0x1ca69a(TooltipContent,{'side':'right','children':a9_0x1ca69a('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a9_0x1ca69a('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x8976ac?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a9_0x1ca69a('div',{'className':'h-full','children':a9_0x1ca69a(_0x4a782f,{})})}),_0x8976ac&&a9_0x1ca69a('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0xdfef8})]});}
