"use client";

'use client';(function(_0x42c143,_0x1da89a){const _0x3f61cf=a11_0x1962,_0x194353=_0x42c143();while(!![]){try{const _0x353d72=-parseInt(_0x3f61cf(0x1c0))/0x1*(parseInt(_0x3f61cf(0x1bc))/0x2)+parseInt(_0x3f61cf(0x1c8))/0x3*(parseInt(_0x3f61cf(0x1be))/0x4)+-parseInt(_0x3f61cf(0x1ba))/0x5*(-parseInt(_0x3f61cf(0x1b6))/0x6)+-parseInt(_0x3f61cf(0x1c6))/0x7*(-parseInt(_0x3f61cf(0x1c7))/0x8)+-parseInt(_0x3f61cf(0x1b9))/0x9+-parseInt(_0x3f61cf(0x1c1))/0xa+-parseInt(_0x3f61cf(0x1c4))/0xb*(-parseInt(_0x3f61cf(0x1b5))/0xc);if(_0x353d72===_0x1da89a)break;else _0x194353['push'](_0x194353['shift']());}catch(_0x4f39ed){_0x194353['push'](_0x194353['shift']());}}}(a11_0x1865,0x489e0));function a11_0x1865(){const _0x1c7541=['_id','705jVACAH','1506330UAYogI','span','asset','7186597OlyYMh','padStart','469uPjVoa','3304FuVjyI','6GPRBsx','12MKBGSz','2201046hOzUPr','Toggle\x20Sidebar','div','2377791phEtgR','5TexEvw','url','1142CKHDxK','noopener\x20noreferrer','133976Aiphph'];a11_0x1865=function(){return _0x1c7541;};return a11_0x1865();}import{jsx as a11_0x12903f,jsxs as a11_0x29d821,Fragment as a11_0x54b6ff}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a11_0x55e4da from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';function a11_0x1962(_0x3d989e,_0x3610b7){const _0x18651f=a11_0x1865();return a11_0x1962=function(_0x1962f0,_0x167efa){_0x1962f0=_0x1962f0-0x1b5;let _0xcb884e=_0x18651f[_0x1962f0];return _0xcb884e;},a11_0x1962(_0x3d989e,_0x3610b7);}import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0x491b3f,completedLessons:completedLessons=[]}){const _0x3e3c38=a11_0x1962,_0x2ac478=usePathname(),{isOpen:_0xd06c88,toggle:_0x27ddaa,close:_0xa1cd0f}=useSidebar(),[_0x464b10,_0x230a5e]=useState(![]),[_0xdbfc47,_0x191648]=useState([]);useEffect(()=>{if(_0x2ac478&&_0x491b3f?.['modules']){const _0x29008a=_0x491b3f['modules']['find'](_0x1097a6=>_0x1097a6['lessons']?.['some'](_0x1685e3=>_0x2ac478==='/dashboard/courses/'+_0x491b3f['_id']+'/lessons/'+_0x1685e3['_id']))?.['_id'];_0x29008a&&!_0xdbfc47['includes'](_0x29008a)&&_0x191648(_0x41b711=>[..._0x41b711,_0x29008a]);}},[_0x2ac478,_0x491b3f,_0xdbfc47]),useEffect(()=>{_0x230a5e(!![]);},[]);if(!_0x491b3f||!_0x464b10)return null;const _0x536095=calculateCourseProgress(_0x491b3f['modules'],completedLessons),_0x368707=()=>a11_0x29d821('div',{'className':'h-full flex flex-col','children':[a11_0x29d821(_0x3e3c38(0x1b8),{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a11_0x29d821('div',{'className':'flex items-center justify-between','children':[a11_0x29d821(a11_0x55e4da,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a11_0x12903f(ArrowLeft,{'className':'h-4 w-4'}),a11_0x12903f('div',{'className':'flex items-center gap-x-2','children':a11_0x12903f('span',{'children':'Course\x20Library'})})]}),a11_0x29d821('div',{'className':'space-x-2','children':[a11_0x12903f(DarkModeToggle,{}),a11_0x12903f(Button,{'onClick':_0xa1cd0f,'variant':'ghost','className':'lg:hidden -mr-2','size':'icon','children':a11_0x12903f(X,{'className':'h-4 w-4'})})]})]}),a11_0x29d821('div',{'className':'space-y-4','children':[a11_0x12903f('h1',{'className':'font-semibold text-2xl','children':_0x491b3f['title']}),a11_0x12903f(CourseProgress,{'progress':_0x536095,'variant':'success','label':'Course\x20Progress'})]})]}),a11_0x12903f(ScrollArea,{'className':'flex-1','children':a11_0x12903f('div',{'className':'p-2 lg:p-4','children':a11_0x12903f(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0xdbfc47,'onValueChange':_0x191648,'children':_0x491b3f['modules']?.['map']((_0x59b1a8,_0x4d9a29)=>a11_0x29d821(AccordionItem,{'value':_0x59b1a8[_0x3e3c38(0x1bf)],'className':cn('border-none',_0x4d9a29%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a11_0x12903f(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a11_0x29d821('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a11_0x12903f('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x4d9a29+0x1)[_0x3e3c38(0x1c5)](0x2,'0')}),a11_0x29d821('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a11_0x12903f('p',{'className':'text-sm font-medium truncate','children':_0x59b1a8['title']}),a11_0x29d821('p',{'className':'text-xs text-muted-foreground','children':[_0x59b1a8['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a11_0x12903f(AccordionContent,{'className':'pt-2','children':a11_0x12903f('div',{'className':'flex flex-col space-y-1','children':_0x59b1a8['lessons']?.['map']((_0x28d9e7,_0x3fce8d)=>{const _0x4402bf=_0x3e3c38,_0x40a4ff=_0x2ac478==='/dashboard/courses/'+_0x491b3f[_0x4402bf(0x1bf)]+'/lessons/'+_0x28d9e7['_id'],_0x404a5f=completedLessons['some'](_0x57667d=>_0x57667d['lesson']?.[_0x4402bf(0x1bf)]===_0x28d9e7['_id']);return a11_0x29d821(a11_0x55e4da,{'prefetch':![],'href':'/dashboard/courses/'+_0x491b3f['_id']+'/lessons/'+_0x28d9e7[_0x4402bf(0x1bf)],'onClick':_0xa1cd0f,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x40a4ff&&'bg-muted',_0x404a5f&&'text-muted-foreground'),'children':[a11_0x12903f('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x3fce8d+0x1)['padStart'](0x2,'0')}),_0x404a5f?a11_0x12903f(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a11_0x12903f(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x40a4ff?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a11_0x12903f(_0x4402bf(0x1c2),{'className':cn('text-sm line-clamp-2 min-w-0',_0x404a5f&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x28d9e7['title']}),_0x40a4ff&&a11_0x12903f('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x28d9e7['_id']);})})})]},_0x59b1a8['_id']))})})}),_0x491b3f?.['courseMaterials']&&_0x491b3f['courseMaterials']['length']>0x0&&a11_0x12903f('div',{'className':'border-t p-4 lg:p-6','children':a11_0x12903f(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a11_0x29d821(AccordionItem,{'value':'course-resources','className':'border-none','children':[a11_0x12903f(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a11_0x29d821(_0x3e3c38(0x1b8),{'className':'flex flex-col items-start text-left','children':[a11_0x12903f('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a11_0x12903f('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a11_0x12903f(AccordionContent,{'className':'pt-2','children':a11_0x12903f('div',{'className':'space-y-3','children':_0x491b3f['courseMaterials']['map'](_0x136c47=>_0x136c47?.['asset']?.['url']?a11_0x29d821('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a11_0x29d821('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a11_0x12903f(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a11_0x29d821(_0x3e3c38(0x1b8),{'className':'flex flex-col overflow-hidden','children':[a11_0x12903f('span',{'className':'font-medium text-sm truncate','title':_0x136c47['title']||_0x136c47['asset']['originalFilename']||'Course\x20Resource','children':_0x136c47['title']||_0x136c47[_0x3e3c38(0x1c3)]['originalFilename']||'Course\x20Resource'}),(_0x136c47['asset']['size']||_0x136c47['asset']['extension'])&&a11_0x29d821(_0x3e3c38(0x1c2),{'className':'text-xs text-muted-foreground','children':[_0x136c47['asset']['size']?formatFileSize(_0x136c47['asset']['size']):'',_0x136c47['asset']['extension']&&'\x20('+_0x136c47['asset']['extension']['toUpperCase']()+')']})]})]}),a11_0x12903f(a11_0x55e4da,{'href':_0x136c47['asset'][_0x3e3c38(0x1bb)],'target':'_blank','rel':_0x3e3c38(0x1bd),'download':_0x136c47['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a11_0x12903f(Download,{'className':'h-3 w-3'})})]},_0x136c47['_key']):null)})})]})})})]});return a11_0x29d821(a11_0x54b6ff,{'children':[a11_0x12903f('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a11_0x29d821(TooltipProvider,{'delayDuration':0x0,'children':[a11_0x29d821(Tooltip,{'children':[a11_0x12903f(TooltipTrigger,{'asChild':!![],'children':a11_0x12903f(a11_0x55e4da,{'href':'/','prefetch':![],'children':a11_0x12903f(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a11_0x12903f(Library,{'className':'h-5 w-5'})})})}),a11_0x12903f(TooltipContent,{'side':'right','children':a11_0x12903f('p',{'children':'Course\x20Library'})})]}),a11_0x29d821(Tooltip,{'children':[a11_0x12903f(TooltipTrigger,{'asChild':!![],'children':a11_0x12903f(Button,{'onClick':_0x27ddaa,'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a11_0x12903f(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0xd06c88&&'rotate-180')})})}),a11_0x12903f(TooltipContent,{'side':'right','children':a11_0x12903f('p',{'children':_0x3e3c38(0x1b7)})})]})]})}),a11_0x12903f('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0xd06c88?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a11_0x12903f('div',{'className':'h-full','children':a11_0x12903f(_0x368707,{})})}),_0xd06c88&&a11_0x12903f('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0xa1cd0f})]});}
