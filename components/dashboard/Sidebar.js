"use client";

'use client';(function(_0x311ed9,_0x1f0dd1){const _0x1c6109=a12_0x19e4,_0x14dbf7=_0x311ed9();while(!![]){try{const _0x3e1355=parseInt(_0x1c6109(0x141))/0x1+-parseInt(_0x1c6109(0x13a))/0x2+-parseInt(_0x1c6109(0x145))/0x3*(-parseInt(_0x1c6109(0x133))/0x4)+-parseInt(_0x1c6109(0x137))/0x5*(parseInt(_0x1c6109(0x13c))/0x6)+parseInt(_0x1c6109(0x132))/0x7+parseInt(_0x1c6109(0x13f))/0x8+parseInt(_0x1c6109(0x13b))/0x9*(parseInt(_0x1c6109(0x13d))/0xa);if(_0x3e1355===_0x1f0dd1)break;else _0x14dbf7['push'](_0x14dbf7['shift']());}catch(_0x49b319){_0x14dbf7['push'](_0x14dbf7['shift']());}}}(a12_0x2fcc,0x53243));import{jsx as a12_0x273761,jsxs as a12_0x739689,Fragment as a12_0x5ecb30}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a12_0x2d936b from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';function a12_0x19e4(_0x2a2346,_0x272c03){const _0x2fccce=a12_0x2fcc();return a12_0x19e4=function(_0x19e4a5,_0x1b005e){_0x19e4a5=_0x19e4a5-0x12f;let _0xb97c3c=_0x2fccce[_0x19e4a5];return _0xb97c3c;},a12_0x19e4(_0x2a2346,_0x272c03);}import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';function a12_0x2fcc(){const _0x38cbfe=['modules','5edAsxz','_key','span','652688irqDca','21771YMFauK','3593874PbvocZ','1490jjvACx','asset','3002656XNsSXg','ghost','208096bSVeLl','url','title','div','18351OlcaeN','/dashboard/courses/','lessons','_blank','originalFilename','1783068hbezlq','44qbAzjU','_id','some'];a12_0x2fcc=function(){return _0x38cbfe;};return a12_0x2fcc();}import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0x535e23,completedLessons:completedLessons=[]}){const _0x3682a6=a12_0x19e4,_0x28c4fd=usePathname(),{isOpen:_0x33a410,toggle:_0x5c7e52,close:_0x2ee9f1}=useSidebar(),[_0x500afa,_0x5b51f3]=useState(![]),[_0x535a2f,_0x3bbba9]=useState([]);useEffect(()=>{const _0x351cd2=a12_0x19e4;if(_0x28c4fd&&_0x535e23?.[_0x351cd2(0x136)]){const _0x3b8336=_0x535e23['modules']['find'](_0xd2a9ce=>_0xd2a9ce[_0x351cd2(0x12f)]?.['some'](_0x5b28ca=>_0x28c4fd==='/dashboard/courses/'+_0x535e23['_id']+'/lessons/'+_0x5b28ca[_0x351cd2(0x134)]))?.['_id'];_0x3b8336&&!_0x535a2f['includes'](_0x3b8336)&&_0x3bbba9(_0x2e463d=>[..._0x2e463d,_0x3b8336]);}},[_0x28c4fd,_0x535e23,_0x535a2f]),useEffect(()=>{_0x5b51f3(!![]);},[]);if(!_0x535e23||!_0x500afa)return null;const _0x4fff56=calculateCourseProgress(_0x535e23['modules'],completedLessons),_0x232b73=()=>a12_0x739689('div',{'className':'h-full flex flex-col','children':[a12_0x739689('div',{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a12_0x739689('div',{'className':'flex items-center justify-between','children':[a12_0x739689(a12_0x2d936b,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a12_0x273761(ArrowLeft,{'className':'h-4 w-4'}),a12_0x273761('div',{'className':'flex items-center gap-x-2','children':a12_0x273761('span',{'children':'Course\x20Library'})})]}),a12_0x739689('div',{'className':'space-x-2','children':[a12_0x273761(DarkModeToggle,{}),a12_0x273761(Button,{'onClick':_0x2ee9f1,'variant':'ghost','className':'lg:hidden -mr-2','size':'icon','children':a12_0x273761(X,{'className':'h-4 w-4'})})]})]}),a12_0x739689('div',{'className':'space-y-4','children':[a12_0x273761('h1',{'className':'font-semibold text-2xl','children':_0x535e23[_0x3682a6(0x143)]}),a12_0x273761(CourseProgress,{'progress':_0x4fff56,'variant':'success','label':'Course\x20Progress'})]})]}),a12_0x273761(ScrollArea,{'className':'flex-1','children':a12_0x273761('div',{'className':'p-2 lg:p-4','children':a12_0x273761(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x535a2f,'onValueChange':_0x3bbba9,'children':_0x535e23['modules']?.['map']((_0x50dcef,_0x205a8e)=>a12_0x739689(AccordionItem,{'value':_0x50dcef['_id'],'className':cn('border-none',_0x205a8e%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a12_0x273761(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a12_0x739689(_0x3682a6(0x144),{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a12_0x273761('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x205a8e+0x1)['padStart'](0x2,'0')}),a12_0x739689('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a12_0x273761('p',{'className':'text-sm font-medium truncate','children':_0x50dcef['title']}),a12_0x739689('p',{'className':'text-xs text-muted-foreground','children':[_0x50dcef['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a12_0x273761(AccordionContent,{'className':'pt-2','children':a12_0x273761('div',{'className':'flex flex-col space-y-1','children':_0x50dcef['lessons']?.['map']((_0x399c72,_0x5c95d0)=>{const _0x3ff866=_0x3682a6,_0x4495f3=_0x28c4fd===_0x3ff866(0x146)+_0x535e23['_id']+'/lessons/'+_0x399c72['_id'],_0x1050c1=completedLessons[_0x3ff866(0x135)](_0x2b5cad=>_0x2b5cad['lesson']?.['_id']===_0x399c72['_id']);return a12_0x739689(a12_0x2d936b,{'prefetch':![],'href':'/dashboard/courses/'+_0x535e23['_id']+'/lessons/'+_0x399c72[_0x3ff866(0x134)],'onClick':_0x2ee9f1,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x4495f3&&'bg-muted',_0x1050c1&&'text-muted-foreground'),'children':[a12_0x273761('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x5c95d0+0x1)['padStart'](0x2,'0')}),_0x1050c1?a12_0x273761(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a12_0x273761(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x4495f3?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a12_0x273761('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x1050c1&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x399c72['title']}),_0x4495f3&&a12_0x273761(_0x3ff866(0x144),{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x399c72['_id']);})})})]},_0x50dcef['_id']))})})}),_0x535e23?.['courseMaterials']&&_0x535e23['courseMaterials']['length']>0x0&&a12_0x273761('div',{'className':'border-t p-4 lg:p-6','children':a12_0x273761(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a12_0x739689(AccordionItem,{'value':'course-resources','className':'border-none','children':[a12_0x273761(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a12_0x739689('div',{'className':'flex flex-col items-start text-left','children':[a12_0x273761('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a12_0x273761('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a12_0x273761(AccordionContent,{'className':'pt-2','children':a12_0x273761('div',{'className':'space-y-3','children':_0x535e23['courseMaterials']['map'](_0x4c667a=>_0x4c667a?.['asset']?.[_0x3682a6(0x142)]?a12_0x739689('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a12_0x739689('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a12_0x273761(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a12_0x739689('div',{'className':'flex flex-col overflow-hidden','children':[a12_0x273761(_0x3682a6(0x139),{'className':'font-medium text-sm truncate','title':_0x4c667a['title']||_0x4c667a[_0x3682a6(0x13e)]['originalFilename']||'Course\x20Resource','children':_0x4c667a['title']||_0x4c667a['asset'][_0x3682a6(0x131)]||'Course\x20Resource'}),(_0x4c667a['asset']['size']||_0x4c667a['asset']['extension'])&&a12_0x739689('span',{'className':'text-xs text-muted-foreground','children':[_0x4c667a['asset']['size']?formatFileSize(_0x4c667a['asset']['size']):'',_0x4c667a['asset']['extension']&&'\x20('+_0x4c667a['asset']['extension']['toUpperCase']()+')']})]})]}),a12_0x273761(a12_0x2d936b,{'href':_0x4c667a['asset']['url'],'target':_0x3682a6(0x130),'rel':'noopener\x20noreferrer','download':_0x4c667a['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a12_0x273761(Download,{'className':'h-3 w-3'})})]},_0x4c667a[_0x3682a6(0x138)]):null)})})]})})})]});return a12_0x739689(a12_0x5ecb30,{'children':[a12_0x273761('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a12_0x739689(TooltipProvider,{'delayDuration':0x0,'children':[a12_0x739689(Tooltip,{'children':[a12_0x273761(TooltipTrigger,{'asChild':!![],'children':a12_0x273761(a12_0x2d936b,{'href':'/','prefetch':![],'children':a12_0x273761(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a12_0x273761(Library,{'className':'h-5 w-5'})})})}),a12_0x273761(TooltipContent,{'side':'right','children':a12_0x273761('p',{'children':'Course\x20Library'})})]}),a12_0x739689(Tooltip,{'children':[a12_0x273761(TooltipTrigger,{'asChild':!![],'children':a12_0x273761(Button,{'onClick':_0x5c7e52,'variant':_0x3682a6(0x140),'size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a12_0x273761(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x33a410&&'rotate-180')})})}),a12_0x273761(TooltipContent,{'side':'right','children':a12_0x273761('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a12_0x273761('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x33a410?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a12_0x273761(_0x3682a6(0x144),{'className':'h-full','children':a12_0x273761(_0x232b73,{})})}),_0x33a410&&a12_0x273761('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0x2ee9f1})]});}
