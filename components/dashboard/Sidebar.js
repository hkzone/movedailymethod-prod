"use client";

'use client';(function(_0x294b66,_0x1d5410){const _0x224690=a11_0x29e6,_0x5e45de=_0x294b66();while(!![]){try{const _0x230d16=parseInt(_0x224690(0x186))/0x1+parseInt(_0x224690(0x185))/0x2+-parseInt(_0x224690(0x178))/0x3+-parseInt(_0x224690(0x188))/0x4+-parseInt(_0x224690(0x187))/0x5+-parseInt(_0x224690(0x179))/0x6+parseInt(_0x224690(0x17a))/0x7*(parseInt(_0x224690(0x182))/0x8);if(_0x230d16===_0x1d5410)break;else _0x5e45de['push'](_0x5e45de['shift']());}catch(_0x51b190){_0x5e45de['push'](_0x5e45de['shift']());}}}(a11_0x4a55,0xf2f72));import{jsx as a11_0x5d44a5,jsxs as a11_0x229b0d,Fragment as a11_0x511484}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';function a11_0x4a55(){const _0x5c7b8f=['514417sIQSIz','7584255xHUcGZ','4880908LwloIa','3444555kSlxWY','3040788IZYKfv','119KjqpKu','Course\x20Progress','Course\x20Library','map','lesson','toUpperCase','extension','some','1943824eVKIPR','ghost','div','1484408Sqflrj'];a11_0x4a55=function(){return _0x5c7b8f;};return a11_0x4a55();}import a11_0xefa6e from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';function a11_0x29e6(_0x323f39,_0x27e1e9){const _0x4a55c0=a11_0x4a55();return a11_0x29e6=function(_0x29e618,_0x244b50){_0x29e618=_0x29e618-0x178;let _0xa85b1d=_0x4a55c0[_0x29e618];return _0xa85b1d;},a11_0x29e6(_0x323f39,_0x27e1e9);}import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0x636b50,completedLessons:completedLessons=[]}){const _0x421193=a11_0x29e6,_0x40a099=usePathname(),{isOpen:_0x38ee8c,toggle:_0x53f635,close:_0xe02041}=useSidebar(),[_0x4323cb,_0x58b02b]=useState(![]),[_0x410af5,_0x32cb6a]=useState([]);useEffect(()=>{const _0x51f9d1=a11_0x29e6;if(_0x40a099&&_0x636b50?.['modules']){const _0x5b2a49=_0x636b50['modules']['find'](_0x569c36=>_0x569c36['lessons']?.[_0x51f9d1(0x181)](_0xb7f00c=>_0x40a099==='/dashboard/courses/'+_0x636b50['_id']+'/lessons/'+_0xb7f00c['_id']))?.['_id'];_0x5b2a49&&!_0x410af5['includes'](_0x5b2a49)&&_0x32cb6a(_0xaa549a=>[..._0xaa549a,_0x5b2a49]);}},[_0x40a099,_0x636b50,_0x410af5]),useEffect(()=>{_0x58b02b(!![]);},[]);if(!_0x636b50||!_0x4323cb)return null;const _0x254150=calculateCourseProgress(_0x636b50['modules'],completedLessons),_0x116f61=()=>a11_0x229b0d('div',{'className':'h-full flex flex-col','children':[a11_0x229b0d('div',{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a11_0x229b0d('div',{'className':'flex items-center justify-between','children':[a11_0x229b0d(a11_0xefa6e,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a11_0x5d44a5(ArrowLeft,{'className':'h-4 w-4'}),a11_0x5d44a5('div',{'className':'flex items-center gap-x-2','children':a11_0x5d44a5('span',{'children':_0x421193(0x17c)})})]}),a11_0x229b0d('div',{'className':'space-x-2','children':[a11_0x5d44a5(DarkModeToggle,{}),a11_0x5d44a5(Button,{'onClick':_0xe02041,'variant':'ghost','className':'lg:hidden -mr-2','size':'icon','children':a11_0x5d44a5(X,{'className':'h-4 w-4'})})]})]}),a11_0x229b0d('div',{'className':'space-y-4','children':[a11_0x5d44a5('h1',{'className':'font-semibold text-2xl','children':_0x636b50['title']}),a11_0x5d44a5(CourseProgress,{'progress':_0x254150,'variant':'success','label':_0x421193(0x17b)})]})]}),a11_0x5d44a5(ScrollArea,{'className':'flex-1','children':a11_0x5d44a5(_0x421193(0x184),{'className':'p-2 lg:p-4','children':a11_0x5d44a5(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x410af5,'onValueChange':_0x32cb6a,'children':_0x636b50['modules']?.[_0x421193(0x17d)]((_0x28a31f,_0x42be7c)=>a11_0x229b0d(AccordionItem,{'value':_0x28a31f['_id'],'className':cn('border-none',_0x42be7c%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a11_0x5d44a5(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a11_0x229b0d('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a11_0x5d44a5('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x42be7c+0x1)['padStart'](0x2,'0')}),a11_0x229b0d('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a11_0x5d44a5('p',{'className':'text-sm font-medium truncate','children':_0x28a31f['title']}),a11_0x229b0d('p',{'className':'text-xs text-muted-foreground','children':[_0x28a31f['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a11_0x5d44a5(AccordionContent,{'className':'pt-2','children':a11_0x5d44a5('div',{'className':'flex flex-col space-y-1','children':_0x28a31f['lessons']?.['map']((_0x254f37,_0x4fa91a)=>{const _0x561ec6=_0x421193,_0xccba71=_0x40a099==='/dashboard/courses/'+_0x636b50['_id']+'/lessons/'+_0x254f37['_id'],_0x3a501a=completedLessons['some'](_0xe8d77b=>_0xe8d77b[_0x561ec6(0x17e)]?.['_id']===_0x254f37['_id']);return a11_0x229b0d(a11_0xefa6e,{'prefetch':![],'href':'/dashboard/courses/'+_0x636b50['_id']+'/lessons/'+_0x254f37['_id'],'onClick':_0xe02041,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0xccba71&&'bg-muted',_0x3a501a&&'text-muted-foreground'),'children':[a11_0x5d44a5('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x4fa91a+0x1)['padStart'](0x2,'0')}),_0x3a501a?a11_0x5d44a5(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a11_0x5d44a5(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0xccba71?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a11_0x5d44a5('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x3a501a&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x254f37['title']}),_0xccba71&&a11_0x5d44a5('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x254f37['_id']);})})})]},_0x28a31f['_id']))})})}),_0x636b50?.['courseMaterials']&&_0x636b50['courseMaterials']['length']>0x0&&a11_0x5d44a5('div',{'className':'border-t p-4 lg:p-6','children':a11_0x5d44a5(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a11_0x229b0d(AccordionItem,{'value':'course-resources','className':'border-none','children':[a11_0x5d44a5(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a11_0x229b0d('div',{'className':'flex flex-col items-start text-left','children':[a11_0x5d44a5('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a11_0x5d44a5('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a11_0x5d44a5(AccordionContent,{'className':'pt-2','children':a11_0x5d44a5('div',{'className':'space-y-3','children':_0x636b50['courseMaterials']['map'](_0x45e796=>_0x45e796?.['asset']?.['url']?a11_0x229b0d('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a11_0x229b0d('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a11_0x5d44a5(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a11_0x229b0d('div',{'className':'flex flex-col overflow-hidden','children':[a11_0x5d44a5('span',{'className':'font-medium text-sm truncate','title':_0x45e796['title']||_0x45e796['asset']['originalFilename']||'Course\x20Resource','children':_0x45e796['title']||_0x45e796['asset']['originalFilename']||'Course\x20Resource'}),(_0x45e796['asset']['size']||_0x45e796['asset'][_0x421193(0x180)])&&a11_0x229b0d('span',{'className':'text-xs text-muted-foreground','children':[_0x45e796['asset']['size']?formatFileSize(_0x45e796['asset']['size']):'',_0x45e796['asset']['extension']&&'\x20('+_0x45e796['asset']['extension'][_0x421193(0x17f)]()+')']})]})]}),a11_0x5d44a5(a11_0xefa6e,{'href':_0x45e796['asset']['url'],'target':'_blank','rel':'noopener\x20noreferrer','download':_0x45e796['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a11_0x5d44a5(Download,{'className':'h-3 w-3'})})]},_0x45e796['_key']):null)})})]})})})]});return a11_0x229b0d(a11_0x511484,{'children':[a11_0x5d44a5('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a11_0x229b0d(TooltipProvider,{'delayDuration':0x0,'children':[a11_0x229b0d(Tooltip,{'children':[a11_0x5d44a5(TooltipTrigger,{'asChild':!![],'children':a11_0x5d44a5(a11_0xefa6e,{'href':'/','prefetch':![],'children':a11_0x5d44a5(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a11_0x5d44a5(Library,{'className':'h-5 w-5'})})})}),a11_0x5d44a5(TooltipContent,{'side':'right','children':a11_0x5d44a5('p',{'children':'Course\x20Library'})})]}),a11_0x229b0d(Tooltip,{'children':[a11_0x5d44a5(TooltipTrigger,{'asChild':!![],'children':a11_0x5d44a5(Button,{'onClick':_0x53f635,'variant':_0x421193(0x183),'size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a11_0x5d44a5(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x38ee8c&&'rotate-180')})})}),a11_0x5d44a5(TooltipContent,{'side':'right','children':a11_0x5d44a5('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a11_0x5d44a5('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x38ee8c?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a11_0x5d44a5('div',{'className':'h-full','children':a11_0x5d44a5(_0x116f61,{})})}),_0x38ee8c&&a11_0x5d44a5('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0xe02041})]});}
