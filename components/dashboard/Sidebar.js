"use client";

'use client';(function(_0x2ac412,_0x38a8cd){const _0x5a165a=a12_0x49ae,_0x65476e=_0x2ac412();while(!![]){try{const _0x584657=parseInt(_0x5a165a(0xcf))/0x1+parseInt(_0x5a165a(0xd0))/0x2+-parseInt(_0x5a165a(0xd1))/0x3*(-parseInt(_0x5a165a(0xce))/0x4)+-parseInt(_0x5a165a(0xcc))/0x5*(-parseInt(_0x5a165a(0xd7))/0x6)+-parseInt(_0x5a165a(0xda))/0x7+-parseInt(_0x5a165a(0xd6))/0x8+parseInt(_0x5a165a(0xdb))/0x9;if(_0x584657===_0x38a8cd)break;else _0x65476e['push'](_0x65476e['shift']());}catch(_0x103704){_0x65476e['push'](_0x65476e['shift']());}}}(a12_0x25a1,0x34385));import{jsx as a12_0x162198,jsxs as a12_0x572971,Fragment as a12_0x5745d5}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a12_0x38ac41 from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';function a12_0x49ae(_0xed6078,_0x39fd6b){const _0x25a174=a12_0x25a1();return a12_0x49ae=function(_0x49ae91,_0x31233d){_0x49ae91=_0x49ae91-0xca;let _0x2191ee=_0x25a174[_0x49ae91];return _0x2191ee;},a12_0x49ae(_0xed6078,_0x39fd6b);}import{useEffect,useState}from'react';function a12_0x25a1(){const _0x29540f=['extension','116030zIMlFj','div','449764AfkMjF','91614AJzjvM','311462flLBql','3fCkZBJ','padStart','some','single','span','821304eAkWyh','30fbFXNk','map','asset','1603441yqYmiV','628227XZCfrB','/dashboard/courses/','course-resources','ghost','lessons','/lessons/'];a12_0x25a1=function(){return _0x29540f;};return a12_0x25a1();}import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';export function Sidebar({course:_0xcdf2e2,completedLessons:completedLessons=[]}){const _0x1cea05=a12_0x49ae,_0x121627=usePathname(),{isOpen:_0x5d6e87,toggle:_0x4a5d36,close:_0x5b54d4}=useSidebar(),[_0x193e82,_0x43acef]=useState(![]),[_0x1e442,_0x29487f]=useState([]);useEffect(()=>{const _0x345bf5=a12_0x49ae;if(_0x121627&&_0xcdf2e2?.['modules']){const _0x24c459=_0xcdf2e2['modules']['find'](_0x388479=>_0x388479['lessons']?.[_0x345bf5(0xd3)](_0x6dcfef=>_0x121627===_0x345bf5(0xdc)+_0xcdf2e2['_id']+'/lessons/'+_0x6dcfef['_id']))?.['_id'];_0x24c459&&!_0x1e442['includes'](_0x24c459)&&_0x29487f(_0x2da0a1=>[..._0x2da0a1,_0x24c459]);}},[_0x121627,_0xcdf2e2,_0x1e442]),useEffect(()=>{_0x43acef(!![]);},[]);if(!_0xcdf2e2||!_0x193e82)return null;const _0x5d95af=calculateCourseProgress(_0xcdf2e2['modules'],completedLessons),_0x5c6cab=()=>a12_0x572971('div',{'className':'h-full flex flex-col','children':[a12_0x572971('div',{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a12_0x572971('div',{'className':'flex items-center justify-between','children':[a12_0x572971(a12_0x38ac41,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a12_0x162198(ArrowLeft,{'className':'h-4 w-4'}),a12_0x162198('div',{'className':'flex items-center gap-x-2','children':a12_0x162198('span',{'children':'Course\x20Library'})})]}),a12_0x572971('div',{'className':'space-x-2','children':[a12_0x162198(DarkModeToggle,{}),a12_0x162198(Button,{'onClick':_0x5b54d4,'variant':_0x1cea05(0xde),'className':'lg:hidden -mr-2','size':'icon','children':a12_0x162198(X,{'className':'h-4 w-4'})})]})]}),a12_0x572971('div',{'className':'space-y-4','children':[a12_0x162198('h1',{'className':'font-semibold text-2xl','children':_0xcdf2e2['title']}),a12_0x162198(CourseProgress,{'progress':_0x5d95af,'variant':'success','label':'Course\x20Progress'})]})]}),a12_0x162198(ScrollArea,{'className':'flex-1','children':a12_0x162198(_0x1cea05(0xcd),{'className':'p-2 lg:p-4','children':a12_0x162198(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x1e442,'onValueChange':_0x29487f,'children':_0xcdf2e2['modules']?.['map']((_0x2a244d,_0x1ae6b0)=>a12_0x572971(AccordionItem,{'value':_0x2a244d['_id'],'className':cn('border-none',_0x1ae6b0%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a12_0x162198(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a12_0x572971('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a12_0x162198('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x1ae6b0+0x1)['padStart'](0x2,'0')}),a12_0x572971('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a12_0x162198('p',{'className':'text-sm font-medium truncate','children':_0x2a244d['title']}),a12_0x572971('p',{'className':'text-xs text-muted-foreground','children':[_0x2a244d[_0x1cea05(0xdf)]?.['length']||0x0,'\x20lessons']})]})]})}),a12_0x162198(AccordionContent,{'className':'pt-2','children':a12_0x162198('div',{'className':'flex flex-col space-y-1','children':_0x2a244d['lessons']?.[_0x1cea05(0xd8)]((_0xe1336c,_0x5d93bf)=>{const _0x3c2faa=_0x1cea05,_0x4c5978=_0x121627==='/dashboard/courses/'+_0xcdf2e2['_id']+'/lessons/'+_0xe1336c['_id'],_0x3f6bcf=completedLessons['some'](_0x2fa369=>_0x2fa369['lesson']?.['_id']===_0xe1336c['_id']);return a12_0x572971(a12_0x38ac41,{'prefetch':![],'href':'/dashboard/courses/'+_0xcdf2e2['_id']+_0x3c2faa(0xca)+_0xe1336c['_id'],'onClick':_0x5b54d4,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x4c5978&&'bg-muted',_0x3f6bcf&&'text-muted-foreground'),'children':[a12_0x162198('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x5d93bf+0x1)[_0x3c2faa(0xd2)](0x2,'0')}),_0x3f6bcf?a12_0x162198(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a12_0x162198(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x4c5978?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a12_0x162198('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x3f6bcf&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0xe1336c['title']}),_0x4c5978&&a12_0x162198('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0xe1336c['_id']);})})})]},_0x2a244d['_id']))})})}),_0xcdf2e2?.['courseMaterials']&&_0xcdf2e2['courseMaterials']['length']>0x0&&a12_0x162198('div',{'className':'border-t p-4 lg:p-6','children':a12_0x162198(Accordion,{'type':_0x1cea05(0xd4),'collapsible':!![],'className':'w-full','children':a12_0x572971(AccordionItem,{'value':_0x1cea05(0xdd),'className':'border-none','children':[a12_0x162198(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a12_0x572971('div',{'className':'flex flex-col items-start text-left','children':[a12_0x162198('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a12_0x162198('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a12_0x162198(AccordionContent,{'className':'pt-2','children':a12_0x162198('div',{'className':'space-y-3','children':_0xcdf2e2['courseMaterials']['map'](_0x9ffcc=>_0x9ffcc?.['asset']?.['url']?a12_0x572971('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a12_0x572971('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a12_0x162198(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a12_0x572971('div',{'className':'flex flex-col overflow-hidden','children':[a12_0x162198('span',{'className':'font-medium text-sm truncate','title':_0x9ffcc['title']||_0x9ffcc[_0x1cea05(0xd9)]['originalFilename']||'Course\x20Resource','children':_0x9ffcc['title']||_0x9ffcc['asset']['originalFilename']||'Course\x20Resource'}),(_0x9ffcc['asset']['size']||_0x9ffcc['asset']['extension'])&&a12_0x572971(_0x1cea05(0xd5),{'className':'text-xs text-muted-foreground','children':[_0x9ffcc['asset']['size']?formatFileSize(_0x9ffcc['asset']['size']):'',_0x9ffcc['asset']['extension']&&'\x20('+_0x9ffcc['asset'][_0x1cea05(0xcb)]['toUpperCase']()+')']})]})]}),a12_0x162198(a12_0x38ac41,{'href':_0x9ffcc['asset']['url'],'target':'_blank','rel':'noopener\x20noreferrer','download':_0x9ffcc['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a12_0x162198(Download,{'className':'h-3 w-3'})})]},_0x9ffcc['_key']):null)})})]})})})]});return a12_0x572971(a12_0x5745d5,{'children':[a12_0x162198('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a12_0x572971(TooltipProvider,{'delayDuration':0x0,'children':[a12_0x572971(Tooltip,{'children':[a12_0x162198(TooltipTrigger,{'asChild':!![],'children':a12_0x162198(a12_0x38ac41,{'href':'/','prefetch':![],'children':a12_0x162198(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a12_0x162198(Library,{'className':'h-5 w-5'})})})}),a12_0x162198(TooltipContent,{'side':'right','children':a12_0x162198('p',{'children':'Course\x20Library'})})]}),a12_0x572971(Tooltip,{'children':[a12_0x162198(TooltipTrigger,{'asChild':!![],'children':a12_0x162198(Button,{'onClick':_0x4a5d36,'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a12_0x162198(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x5d6e87&&'rotate-180')})})}),a12_0x162198(TooltipContent,{'side':'right','children':a12_0x162198('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a12_0x162198('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x5d6e87?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a12_0x162198('div',{'className':'h-full','children':a12_0x162198(_0x5c6cab,{})})}),_0x5d6e87&&a12_0x162198(_0x1cea05(0xcd),{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0x5b54d4})]});}
