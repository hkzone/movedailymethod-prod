"use client";

'use client';(function(_0x55bbc5,_0x44a384){const _0x2617a6=a10_0x46d1,_0x1c704e=_0x55bbc5();while(!![]){try{const _0x31712d=-parseInt(_0x2617a6(0x1e3))/0x1*(-parseInt(_0x2617a6(0x1d8))/0x2)+parseInt(_0x2617a6(0x1d9))/0x3*(parseInt(_0x2617a6(0x1e1))/0x4)+parseInt(_0x2617a6(0x1e5))/0x5+-parseInt(_0x2617a6(0x1de))/0x6*(-parseInt(_0x2617a6(0x1e7))/0x7)+parseInt(_0x2617a6(0x1e4))/0x8*(parseInt(_0x2617a6(0x1da))/0x9)+parseInt(_0x2617a6(0x1dd))/0xa+-parseInt(_0x2617a6(0x1df))/0xb;if(_0x31712d===_0x44a384)break;else _0x1c704e['push'](_0x1c704e['shift']());}catch(_0x556430){_0x1c704e['push'](_0x1c704e['shift']());}}}(a10_0x1d64,0x8fbc7));import{jsx as a10_0x20af5b,jsxs as a10_0xd7173e,Fragment as a10_0x477c05}from'react/jsx-runtime';import{Accordion,AccordionContent,AccordionItem,AccordionTrigger}from'@/components/ui/accordion';import{ScrollArea}from'@/components/ui/scroll-area';import{Button}from'@/components/ui/button';function a10_0x46d1(_0x5465ca,_0x49654f){const _0x1d643d=a10_0x1d64();return a10_0x46d1=function(_0x46d10f,_0x273086){_0x46d10f=_0x46d10f-0x1d8;let _0x4d3af8=_0x1d643d[_0x46d10f];return _0x4d3af8;},a10_0x46d1(_0x5465ca,_0x49654f);}import{ArrowLeft,Library,ChevronRight,PlayCircle,X,Check,FileText,Download}from'lucide-react';import a10_0x4ffe5f from'next/link';import{cn}from'@/lib/utils';import{usePathname}from'next/navigation';import{useSidebar}from'@/components/providers/sidebar-provider';import{useEffect,useState}from'react';import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from'@/components/ui/tooltip';import{DarkModeToggle}from'../DarkModeToggle';import{CourseProgress}from'@/components/CourseProgress';import{calculateCourseProgress}from'@/lib/courseProgress';import{formatFileSize}from'@/lib/utils';function a10_0x1d64(){const _0x21e0fe=['115940xLUXNp','939NTbfDM','639684PZiNxf','size','icon','661600Zmyrhy','26088JSHHdP','22876095KGfwAG','_id','3804AckMCW','_blank','2NuIpWK','56wqYVlD','5477085tdJMWR','url','959KdKMot'];a10_0x1d64=function(){return _0x21e0fe;};return a10_0x1d64();}export function Sidebar({course:_0x3d2d66,completedLessons:completedLessons=[]}){const _0x3bb80b=a10_0x46d1,_0x282401=usePathname(),{isOpen:_0x25b834,toggle:_0xbe36db,close:_0x496fca}=useSidebar(),[_0x5a70fb,_0x468918]=useState(![]),[_0x25e9f1,_0x1a28e6]=useState([]);useEffect(()=>{if(_0x282401&&_0x3d2d66?.['modules']){const _0x2bcc54=_0x3d2d66['modules']['find'](_0x54edb9=>_0x54edb9['lessons']?.['some'](_0xf92ac7=>_0x282401==='/dashboard/courses/'+_0x3d2d66['_id']+'/lessons/'+_0xf92ac7['_id']))?.['_id'];_0x2bcc54&&!_0x25e9f1['includes'](_0x2bcc54)&&_0x1a28e6(_0xeb33ec=>[..._0xeb33ec,_0x2bcc54]);}},[_0x282401,_0x3d2d66,_0x25e9f1]),useEffect(()=>{_0x468918(!![]);},[]);if(!_0x3d2d66||!_0x5a70fb)return null;const _0x5e3d51=calculateCourseProgress(_0x3d2d66['modules'],completedLessons),_0x4774ed=()=>a10_0xd7173e('div',{'className':'h-full flex flex-col','children':[a10_0xd7173e('div',{'className':'p-4 lg:p-6 border-b flex flex-col gap-y-4','children':[a10_0xd7173e('div',{'className':'flex items-center justify-between','children':[a10_0xd7173e(a10_0x4ffe5f,{'href':'/my-courses','className':'flex items-center gap-x-2 text-sm hover:text-primary transition-colors','children':[a10_0x20af5b(ArrowLeft,{'className':'h-4 w-4'}),a10_0x20af5b('div',{'className':'flex items-center gap-x-2','children':a10_0x20af5b('span',{'children':'Course\x20Library'})})]}),a10_0xd7173e('div',{'className':'space-x-2','children':[a10_0x20af5b(DarkModeToggle,{}),a10_0x20af5b(Button,{'onClick':_0x496fca,'variant':'ghost','className':'lg:hidden -mr-2','size':_0x3bb80b(0x1dc),'children':a10_0x20af5b(X,{'className':'h-4 w-4'})})]})]}),a10_0xd7173e('div',{'className':'space-y-4','children':[a10_0x20af5b('h1',{'className':'font-semibold text-2xl','children':_0x3d2d66['title']}),a10_0x20af5b(CourseProgress,{'progress':_0x5e3d51,'variant':'success','label':'Course\x20Progress'})]})]}),a10_0x20af5b(ScrollArea,{'className':'flex-1','children':a10_0x20af5b('div',{'className':'p-2 lg:p-4','children':a10_0x20af5b(Accordion,{'type':'multiple','className':'w-full space-y-4','value':_0x25e9f1,'onValueChange':_0x1a28e6,'children':_0x3d2d66['modules']?.['map']((_0x1ed265,_0x2218e1)=>a10_0xd7173e(AccordionItem,{'value':_0x1ed265['_id'],'className':cn('border-none',_0x2218e1%0x2===0x0?'bg-muted/30':'bg-background'),'children':[a10_0x20af5b(AccordionTrigger,{'className':'px-2 py-2 hover:no-underline transition-colors','children':a10_0xd7173e('div',{'className':'flex items-center gap-x-2 lg:gap-x-4 w-full','children':[a10_0x20af5b('span',{'className':'text-sm font-medium text-muted-foreground min-w-[28px]','children':String(_0x2218e1+0x1)['padStart'](0x2,'0')}),a10_0xd7173e('div',{'className':'flex flex-col gap-y-1 text-left flex-1 min-w-0','children':[a10_0x20af5b('p',{'className':'text-sm font-medium truncate','children':_0x1ed265['title']}),a10_0xd7173e('p',{'className':'text-xs text-muted-foreground','children':[_0x1ed265['lessons']?.['length']||0x0,'\x20lessons']})]})]})}),a10_0x20af5b(AccordionContent,{'className':'pt-2','children':a10_0x20af5b('div',{'className':'flex flex-col space-y-1','children':_0x1ed265['lessons']?.['map']((_0x274329,_0x509756)=>{const _0x5475a7=_0x3bb80b,_0x16e778=_0x282401==='/dashboard/courses/'+_0x3d2d66['_id']+'/lessons/'+_0x274329['_id'],_0x21423d=completedLessons['some'](_0x4dda4d=>_0x4dda4d['lesson']?.['_id']===_0x274329['_id']);return a10_0xd7173e(a10_0x4ffe5f,{'prefetch':![],'href':'/dashboard/courses/'+_0x3d2d66[_0x5475a7(0x1e0)]+'/lessons/'+_0x274329['_id'],'onClick':_0x496fca,'className':cn('flex items-center pl-8 lg:pl-10 pr-2 lg:pr-4 py-2 gap-x-2 lg:gap-x-4 group hover:bg-muted/50 transition-colors relative',_0x16e778&&'bg-muted',_0x21423d&&'text-muted-foreground'),'children':[a10_0x20af5b('span',{'className':'text-xs font-medium text-muted-foreground min-w-[28px]','children':String(_0x509756+0x1)['padStart'](0x2,'0')}),_0x21423d?a10_0x20af5b(Check,{'className':'h-4 w-4 shrink-0 text-green-500'}):a10_0x20af5b(PlayCircle,{'className':cn('h-4 w-4 shrink-0',_0x16e778?'text-primary':'text-muted-foreground group-hover:text-primary/80')}),a10_0x20af5b('span',{'className':cn('text-sm line-clamp-2 min-w-0',_0x21423d&&'text-muted-foreground line-through decoration-green-500/50'),'children':_0x274329['title']}),_0x16e778&&a10_0x20af5b('div',{'className':'absolute left-0 top-1/2 -translate-y-1/2 w-[2px] h-8 bg-primary'})]},_0x274329['_id']);})})})]},_0x1ed265['_id']))})})}),_0x3d2d66?.['courseMaterials']&&_0x3d2d66['courseMaterials']['length']>0x0&&a10_0x20af5b('div',{'className':'border-t p-4 lg:p-6','children':a10_0x20af5b(Accordion,{'type':'single','collapsible':!![],'className':'w-full','children':a10_0xd7173e(AccordionItem,{'value':'course-resources','className':'border-none','children':[a10_0x20af5b(AccordionTrigger,{'className':'px-0 py-2 hover:no-underline','children':a10_0xd7173e('div',{'className':'flex flex-col items-start text-left','children':[a10_0x20af5b('h2',{'className':'text-lg font-semibold','children':'Course\x20Resources'}),a10_0x20af5b('p',{'className':'text-xs text-muted-foreground','children':'These\x20resources\x20are\x20available\x20for\x20the\x20entire\x20course'})]})}),a10_0x20af5b(AccordionContent,{'className':'pt-2','children':a10_0x20af5b('div',{'className':'space-y-3','children':_0x3d2d66['courseMaterials']['map'](_0x22fe02=>_0x22fe02?.['asset']?.[_0x3bb80b(0x1e6)]?a10_0xd7173e('div',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a10_0xd7173e('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a10_0x20af5b(FileText,{'className':'h-5 w-5 text-primary flex-shrink-0'}),a10_0xd7173e('div',{'className':'flex flex-col overflow-hidden','children':[a10_0x20af5b('span',{'className':'font-medium text-sm truncate','title':_0x22fe02['title']||_0x22fe02['asset']['originalFilename']||'Course\x20Resource','children':_0x22fe02['title']||_0x22fe02['asset']['originalFilename']||'Course\x20Resource'}),(_0x22fe02['asset'][_0x3bb80b(0x1db)]||_0x22fe02['asset']['extension'])&&a10_0xd7173e('span',{'className':'text-xs text-muted-foreground','children':[_0x22fe02['asset']['size']?formatFileSize(_0x22fe02['asset']['size']):'',_0x22fe02['asset']['extension']&&'\x20('+_0x22fe02['asset']['extension']['toUpperCase']()+')']})]})]}),a10_0x20af5b(a10_0x4ffe5f,{'href':_0x22fe02['asset']['url'],'target':_0x3bb80b(0x1e2),'rel':'noopener\x20noreferrer','download':_0x22fe02['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-2 shrink-0','children':a10_0x20af5b(Download,{'className':'h-3 w-3'})})]},_0x22fe02['_key']):null)})})]})})})]});return a10_0xd7173e(a10_0x477c05,{'children':[a10_0x20af5b('aside',{'className':'fixed inset-y-0 left-0 z-50 flex flex-col items-center w-[60px] border-r bg-background lg:hidden py-4 gap-y-4','children':a10_0xd7173e(TooltipProvider,{'delayDuration':0x0,'children':[a10_0xd7173e(Tooltip,{'children':[a10_0x20af5b(TooltipTrigger,{'asChild':!![],'children':a10_0x20af5b(a10_0x4ffe5f,{'href':'/','prefetch':![],'children':a10_0x20af5b(Button,{'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a10_0x20af5b(Library,{'className':'h-5 w-5'})})})}),a10_0x20af5b(TooltipContent,{'side':'right','children':a10_0x20af5b('p',{'children':'Course\x20Library'})})]}),a10_0xd7173e(Tooltip,{'children':[a10_0x20af5b(TooltipTrigger,{'asChild':!![],'children':a10_0x20af5b(Button,{'onClick':_0xbe36db,'variant':'ghost','size':'icon','className':'h-10 w-10 text-foreground bg-background','children':a10_0x20af5b(ChevronRight,{'className':cn('h-5 w-5 transition-transform',_0x25b834&&'rotate-180')})})}),a10_0x20af5b(TooltipContent,{'side':'right','children':a10_0x20af5b('p',{'children':'Toggle\x20Sidebar'})})]})]})}),a10_0x20af5b('aside',{'className':cn('fixed inset-y-0 left-0 z-40 bg-background transition-all duration-300 ease-in-out','lg:z-50 lg:block lg:w-96 lg:border-r',_0x25b834?'w-[calc(100%-60px)] translate-x-[60px] lg:translate-x-0 lg:w-96':'translate-x-[-100%] lg:translate-x-0'),'children':a10_0x20af5b('div',{'className':'h-full','children':a10_0x20af5b(_0x4774ed,{})})}),_0x25b834&&a10_0x20af5b('div',{'className':'fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden','onClick':_0x496fca})]});}
