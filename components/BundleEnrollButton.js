"use client";

'use client';(function(_0xc85e18,_0x236d18){const _0x1edb5b=a0_0x488e,_0x2ac8da=_0xc85e18();while(!![]){try{const _0x5e87fa=parseInt(_0x1edb5b(0xfa))/0x1*(parseInt(_0x1edb5b(0xec))/0x2)+parseInt(_0x1edb5b(0xf3))/0x3+-parseInt(_0x1edb5b(0xea))/0x4*(-parseInt(_0x1edb5b(0xf5))/0x5)+-parseInt(_0x1edb5b(0xed))/0x6*(parseInt(_0x1edb5b(0xf8))/0x7)+-parseInt(_0x1edb5b(0xf9))/0x8+-parseInt(_0x1edb5b(0xeb))/0x9*(-parseInt(_0x1edb5b(0xfb))/0xa)+parseInt(_0x1edb5b(0xf6))/0xb*(-parseInt(_0x1edb5b(0xee))/0xc);if(_0x5e87fa===_0x236d18)break;else _0x2ac8da['push'](_0x2ac8da['shift']());}catch(_0x5745c6){_0x2ac8da['push'](_0x2ac8da['shift']());}}}(a0_0x8690,0xe15b0));import{jsx as a0_0x4c6e3e,jsxs as a0_0x5219a7}from'react/jsx-runtime';import{createBundleCheckout}from'@/actions/createBundleCheckout';import{createWayforpayBundleCheckout}from'@/actions/createWayforpayBundleCheckout';import{useUser,SignInButton}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a0_0x35e125 from'next/link';function a0_0x488e(_0x34fb84,_0x5924c2){const _0x8690f1=a0_0x8690();return a0_0x488e=function(_0x488e5e,_0x34f667){_0x488e5e=_0x488e5e-0xea;let _0x1d9507=_0x8690f1[_0x488e5e];return _0x1d9507;},a0_0x488e(_0x34fb84,_0x5924c2);}import{useRouter}from'next/navigation';import{useTransition,useEffect,useState,useRef}from'react';import{AuroraButton}from'./ui/aurora-button';function BundleEnrollButton({bundleId:_0x149cc2,isEnrolled:_0x881e3b,ctaText:ctaText='CLAIM\x20DEAL',className:className=''}){const _0x332fa7=a0_0x488e,{user:_0x351d19,isLoaded:_0x306fc1}=useUser(),_0x5b1be6=useRouter(),[_0x3358a6,_0x39b384]=useTransition(),[_0x26f678,_0x91d09]=useState(![]),_0x391b2c=useRef(null),_0x2b590e=useRef(null);useEffect(()=>{_0x306fc1&&_0x351d19&&_0x26f678&&(_0x2b590e['current']&&(clearTimeout(_0x2b590e['current']),_0x2b590e['current']=null),_0x91d09(![]),setTimeout(()=>{_0x391b2c['current']?.['scrollIntoView']({'behavior':'instant','block':'center'});},0x64),_0x1be849(_0x149cc2));},[_0x306fc1,_0x351d19,_0x26f678,_0x149cc2]),useEffect(()=>{const _0x21ffeb=a0_0x488e;if(!_0x26f678)return;const _0x2d4b47=()=>{const _0x4e9277=a0_0x488e,_0x2c54dd=document['body']['style']['overflow'];_0x26f678&&!_0x351d19&&_0x2c54dd!=='hidden'&&(_0x2b590e[_0x4e9277(0xf1)]=setTimeout(()=>{!_0x351d19&&_0x26f678&&_0x91d09(![]);},0x7d0));},_0x51d3f5=new MutationObserver(_0x2d4b47);return _0x51d3f5['observe'](document[_0x21ffeb(0xf0)],{'attributes':!![],'attributeFilter':['style']}),()=>_0x51d3f5['disconnect']();},[_0x26f678,_0x351d19]);const _0x1be849=async _0x5243a9=>{_0x39b384(async()=>{try{const _0x5b9459=_0x351d19?.['id'];if(!_0x5b9459)return;const _0x2841b8=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x4fa954;_0x2841b8==='wayforpay'?_0x4fa954=await createWayforpayBundleCheckout(_0x5243a9,_0x5b9459):_0x4fa954=await createBundleCheckout(_0x5243a9,_0x5b9459),_0x46ef83(_0x4fa954);}catch(_0x225b94){console['error']('Error\x20in\x20handleEnroll:',_0x225b94),alert('Failed\x20to\x20create\x20checkout\x20session.\x20Please\x20try\x20again.'),_0x91d09(![]);}});},_0x46ef83=_0x409a88=>{const _0x56fa63=a0_0x488e;if(!_0x409a88){alert('Enrollment\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x409a88['error']){alert('Enrollment\x20failed:\x20'+_0x409a88[_0x56fa63(0xf4)]);return;}if(_0x409a88['type']===_0x56fa63(0xf2)&&_0x409a88['data'])_0x5b1be6['push'](_0x409a88['data']);else{if(_0x409a88['type']==='form'&&_0x409a88['data']){const _0x2570b4=document['createElement']('div');_0x2570b4['innerHTML']=_0x409a88['data'],document['body']['appendChild'](_0x2570b4);const _0x2b3d66=_0x2570b4['querySelector']('form');_0x2b3d66&&_0x2b3d66['submit']();}else _0x409a88['type']==='redirect'&&_0x409a88['data']?_0x5b1be6['push'](_0x409a88['data']):alert('Enrollment\x20failed:\x20Unexpected\x20server\x20response.');}};if(_0x26f678||_0x3358a6)return a0_0x4c6e3e('div',{'ref':_0x391b2c,'children':a0_0x4c6e3e(AuroraButton,{'disabled':!![],'className':className,'children':a0_0x5219a7('div',{'className':'flex items-center gap-2','children':[a0_0x4c6e3e(_0x332fa7(0xfc),{'className':'w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin'}),a0_0x4c6e3e('span',{'children':_0x332fa7(0xef)})]})})});if(_0x881e3b)return a0_0x4c6e3e(_0x332fa7(0xfc),{'ref':_0x391b2c,'children':a0_0x4c6e3e(a0_0x35e125,{'href':'/my-courses','className':className,'children':a0_0x5219a7(AuroraButton,{'children':[a0_0x4c6e3e('span',{'children':_0x332fa7(0xf7)}),a0_0x4c6e3e(CheckCircle,{'className':'ml-2 w-5 h-5'})]})})});if(!_0x351d19?.['id']){const _0x4344d3=()=>{_0x91d09(!![]);};return a0_0x4c6e3e('div',{'ref':_0x391b2c,'children':a0_0x4c6e3e(SignInButton,{'mode':'modal','children':a0_0x4c6e3e(AuroraButton,{'className':className,'onClick':_0x4344d3,'children':ctaText})})});}return a0_0x4c6e3e('div',{'ref':_0x391b2c,'children':a0_0x4c6e3e(AuroraButton,{'onClick':()=>_0x1be849(_0x149cc2),'className':className,'children':ctaText})});}export default BundleEnrollButton;function a0_0x8690(){const _0x7caf1a=['7eDACrS','575072vkWYWs','11oboDqI','6190670genLac','div','536UCkjXL','9zXNxIN','82048xsdWIG','586554GxAJwZ','732CjNAkc','Processing\x20enrollment...','body','current','url','4177383avsUeC','error','27055iEJGrw','377817oIUtNs','Access\x20Courses'];a0_0x8690=function(){return _0x7caf1a;};return a0_0x8690();}
