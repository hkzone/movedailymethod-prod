"use client";

'use client';(function(_0x22f705,_0xf16a42){const _0x38d309=a5_0x2f20,_0x314642=_0x22f705();while(!![]){try{const _0x55d9c0=-parseInt(_0x38d309(0x1d1))/0x1+parseInt(_0x38d309(0x1d4))/0x2*(-parseInt(_0x38d309(0x1d3))/0x3)+parseInt(_0x38d309(0x1c9))/0x4+parseInt(_0x38d309(0x1d0))/0x5*(parseInt(_0x38d309(0x1cc))/0x6)+parseInt(_0x38d309(0x1cb))/0x7*(parseInt(_0x38d309(0x1cd))/0x8)+-parseInt(_0x38d309(0x1c8))/0x9+parseInt(_0x38d309(0x1cf))/0xa;if(_0x55d9c0===_0xf16a42)break;else _0x314642['push'](_0x314642['shift']());}catch(_0x441094){_0x314642['push'](_0x314642['shift']());}}}(a5_0x10d6,0xcbb82));import{jsx as a5_0x2b12d8,jsxs as a5_0x2825b6}from'react/jsx-runtime';function a5_0x2f20(_0x176c9c,_0x86c293){const _0x10d6d5=a5_0x10d6();return a5_0x2f20=function(_0x2f208b,_0xd05fef){_0x2f208b=_0x2f208b-0x1c8;let _0x2b6712=_0x10d6d5[_0x2f208b];return _0x2b6712;},a5_0x2f20(_0x176c9c,_0x86c293);}import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a5_0x341ad1 from'next/link';function a5_0x10d6(){const _0x207b37=['18684940lXjYBd','2107180CzzhJF','1024565HjrPSi','appendChild','3ArMQpX','2103506SzCjFb','8392446fVPTjz','5628336ZkzTnX','div','42651aMtVdr','6ZevKAW','192QknXym','type'];a5_0x10d6=function(){return _0x207b37;};return a5_0x10d6();}import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x589a32,isEnrolled:_0x20b2c5}){const _0x3dc3fa=a5_0x2f20,{user:_0x54e4f8,isLoaded:_0x23e2c8}=useUser(),_0x25c793=useRouter(),[_0x21022b,_0x50f46b]=useTransition(),_0x403070=async _0x550fad=>{_0x50f46b(async()=>{try{const _0x4754ea=_0x54e4f8?.['id'];if(!_0x4754ea)return;const _0x422359=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x139800;if(_0x422359==='stripe')_0x139800=await createStripeCheckout(_0x550fad,_0x54e4f8['id']),_0x40842c(_0x139800,_0x422359);else _0x422359==='wayforpay'&&(_0x139800=await createWayforpayCheckout(_0x550fad,_0x54e4f8['id']),_0x40842c(_0x139800,_0x422359));}catch(_0x56ea20){console['error']('Error\x20in\x20handleEnroll:',_0x56ea20);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x40842c=(_0x50125d,_0x249b81)=>{const _0x3b8a38=a5_0x2f20;if(!_0x50125d){alert('Enrollment\x20with\x20'+_0x249b81+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x50125d['error']){alert('Enrollment\x20with\x20'+_0x249b81+'\x20failed:\x20'+_0x50125d['error']);return;}if(_0x50125d['type']==='url'&&_0x50125d['data'])_0x25c793['push'](_0x50125d['data']);else{if(_0x50125d['type']==='form'&&_0x50125d['data']){const _0xfd819a=_0x50125d['data'],_0x479bd4=document['createElement']('div');_0x479bd4['innerHTML']=_0xfd819a,document['body'][_0x3b8a38(0x1d2)](_0x479bd4);const _0x12dab4=_0x479bd4['querySelector']('form#wayforpayForm');_0x12dab4?_0x12dab4['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x50125d[_0x3b8a38(0x1ce)]==='redirect'&&_0x50125d['data']?_0x25c793['push'](_0x50125d['data']):alert('Enrollment\x20with\x20'+_0x249b81+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x23e2c8||_0x21022b)return a5_0x2b12d8('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x2b12d8('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x20b2c5)return a5_0x2825b6(a5_0x341ad1,{'prefetch':![],'href':'/dashboard/courses/'+_0x589a32,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x2b12d8('span',{'children':'Access\x20Course'}),a5_0x2b12d8(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x2825b6('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x21022b||!_0x54e4f8?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x54e4f8?.['id']||_0x21022b,'onClick':()=>_0x403070(_0x589a32),'children':[!_0x54e4f8?.['id']?a5_0x2b12d8('span',{'className':''+(_0x21022b?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x2b12d8('span',{'className':''+(_0x21022b?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x21022b&&a5_0x2b12d8(_0x3dc3fa(0x1ca),{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x2b12d8('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
