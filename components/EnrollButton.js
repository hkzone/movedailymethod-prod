"use client";

'use client';(function(_0x3d214e,_0x5ba998){const _0xfce164=a5_0x28bb,_0x2121a0=_0x3d214e();while(!![]){try{const _0x1834d4=parseInt(_0xfce164(0x85))/0x1*(parseInt(_0xfce164(0x7e))/0x2)+parseInt(_0xfce164(0x8c))/0x3*(-parseInt(_0xfce164(0x7c))/0x4)+parseInt(_0xfce164(0x8f))/0x5*(parseInt(_0xfce164(0x8a))/0x6)+parseInt(_0xfce164(0x84))/0x7*(-parseInt(_0xfce164(0x8b))/0x8)+-parseInt(_0xfce164(0x86))/0x9*(parseInt(_0xfce164(0x83))/0xa)+parseInt(_0xfce164(0x88))/0xb*(parseInt(_0xfce164(0x7d))/0xc)+parseInt(_0xfce164(0x8e))/0xd*(-parseInt(_0xfce164(0x7f))/0xe);if(_0x1834d4===_0x5ba998)break;else _0x2121a0['push'](_0x2121a0['shift']());}catch(_0x231629){_0x2121a0['push'](_0x2121a0['shift']());}}}(a5_0x1cb4,0x37850));import{jsx as a5_0x16bdcb,jsxs as a5_0x440012}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';function a5_0x28bb(_0x15aff0,_0x4c39d1){const _0x1cb471=a5_0x1cb4();return a5_0x28bb=function(_0x28bbfd,_0x171ba1){_0x28bbfd=_0x28bbfd-0x7c;let _0x1b2313=_0x1cb471[_0x28bbfd];return _0x1b2313;},a5_0x28bb(_0x15aff0,_0x4c39d1);}import{CheckCircle}from'lucide-react';import a5_0x533095 from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function a5_0x1cb4(){const _0x127ab2=['21UQqSIs','176741CWYdqy','43713vTLTwV','body','154dIbqGU','data','573174msBilZ','52456cZiAJz','7551Nusrub','opacity-100','3285906wChVHg','15dNcTZc','268JwVeLA','217476ewgdtE','2VVwzZs','14kNlxaZ','error','Failed\x20to\x20create\x20checkout\x20session','push','100EftCbW'];a5_0x1cb4=function(){return _0x127ab2;};return a5_0x1cb4();}function EnrollButton({courseId:_0x18c374,isEnrolled:_0x3fb0fe}){const _0x275132=a5_0x28bb,{user:_0x5b6174,isLoaded:_0xe40fe5}=useUser(),_0x455ace=useRouter(),[_0x49e272,_0x58b095]=useTransition(),_0x59e06e=async _0x2f28fa=>{_0x58b095(async()=>{const _0xe887d=a5_0x28bb;try{const _0x29e458=_0x5b6174?.['id'];if(!_0x29e458)return;const _0x180c8b=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0xed43c0;if(_0x180c8b==='stripe')_0xed43c0=await createStripeCheckout(_0x2f28fa,_0x5b6174['id']),_0x1e54c9(_0xed43c0,_0x180c8b);else _0x180c8b==='wayforpay'&&(_0xed43c0=await createWayforpayCheckout(_0x2f28fa,_0x5b6174['id']),_0x1e54c9(_0xed43c0,_0x180c8b));}catch(_0x47c7d3){console['error']('Error\x20in\x20handleEnroll:',_0x47c7d3);throw new Error(_0xe887d(0x81));}});},_0x1e54c9=(_0x1b4700,_0x55383c)=>{const _0x3eff1d=a5_0x28bb;if(!_0x1b4700){alert('Enrollment\x20with\x20'+_0x55383c+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x1b4700['error']){alert('Enrollment\x20with\x20'+_0x55383c+'\x20failed:\x20'+_0x1b4700['error']);return;}if(_0x1b4700['type']==='url'&&_0x1b4700['data'])_0x455ace[_0x3eff1d(0x82)](_0x1b4700['data']);else{if(_0x1b4700['type']==='form'&&_0x1b4700['data']){const _0x12904f=_0x1b4700[_0x3eff1d(0x89)],_0x183d78=document['createElement']('div');_0x183d78['innerHTML']=_0x12904f,document[_0x3eff1d(0x87)]['appendChild'](_0x183d78);const _0x3e9a1f=_0x183d78['querySelector']('form#wayforpayForm');_0x3e9a1f?_0x3e9a1f['submit']():(console[_0x3eff1d(0x80)]('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x1b4700['type']==='redirect'&&_0x1b4700['data']?_0x455ace['push'](_0x1b4700['data']):alert('Enrollment\x20with\x20'+_0x55383c+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0xe40fe5||_0x49e272)return a5_0x16bdcb('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x16bdcb('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x3fb0fe)return a5_0x440012(a5_0x533095,{'prefetch':![],'href':'/dashboard/courses/'+_0x18c374,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x16bdcb('span',{'children':'Access\x20Course'}),a5_0x16bdcb(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x440012('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x49e272||!_0x5b6174?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x5b6174?.['id']||_0x49e272,'onClick':()=>_0x59e06e(_0x18c374),'children':[!_0x5b6174?.['id']?a5_0x16bdcb('span',{'className':''+(_0x49e272?'opacity-0':_0x275132(0x8d)),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x16bdcb('span',{'className':''+(_0x49e272?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x49e272&&a5_0x16bdcb('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x16bdcb('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
