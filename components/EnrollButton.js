"use client";

'use client';(function(_0x17df75,_0x128c99){const _0x49654a=a4_0x45bb,_0x43de7c=_0x17df75();while(!![]){try{const _0x2f5ad0=parseInt(_0x49654a(0xa5))/0x1+parseInt(_0x49654a(0x9d))/0x2+parseInt(_0x49654a(0xaf))/0x3*(parseInt(_0x49654a(0xa3))/0x4)+parseInt(_0x49654a(0xaa))/0x5*(parseInt(_0x49654a(0x9a))/0x6)+parseInt(_0x49654a(0xa4))/0x7*(-parseInt(_0x49654a(0xa7))/0x8)+parseInt(_0x49654a(0xa1))/0x9*(-parseInt(_0x49654a(0x9c))/0xa)+parseInt(_0x49654a(0xa9))/0xb;if(_0x2f5ad0===_0x128c99)break;else _0x43de7c['push'](_0x43de7c['shift']());}catch(_0x1ab41d){_0x43de7c['push'](_0x43de7c['shift']());}}}(a4_0x50a6,0x4ea10));import{jsx as a4_0x87ff8,jsxs as a4_0x1f7d9d}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';function a4_0x50a6(){const _0x477bf6=['\x20failed:\x20Unexpected\x20server\x20response.','submit','22089EdTKvX','6dpzewa','Enrollment\x20with\x20','10KoOkKQ','113768aCCIMX','Access\x20Course','form','url','4210641CXvnfa','div','244kTyceq','7BeTPzm','96756cNsBwU','type','290480nXZsHB','span','741719MBkaaz','780055VuCbrJ','stripe','data'];a4_0x50a6=function(){return _0x477bf6;};return a4_0x50a6();}import a4_0x636691 from'next/link';function a4_0x45bb(_0x539384,_0x38b2af){const _0x50a63b=a4_0x50a6();return a4_0x45bb=function(_0x45bb85,_0x28713e){_0x45bb85=_0x45bb85-0x9a;let _0x115d0c=_0x50a63b[_0x45bb85];return _0x115d0c;},a4_0x45bb(_0x539384,_0x38b2af);}import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x46fd7c,isEnrolled:_0x26e05c}){const _0x2401a8=a4_0x45bb,{user:_0x34e3f2,isLoaded:_0x4271fa}=useUser(),_0x2e846b=useRouter(),[_0x49ec9e,_0x1a8f7d]=useTransition(),_0x467492=async _0x7d665b=>{_0x1a8f7d(async()=>{const _0x12edd2=a4_0x45bb;try{const _0x450f22=_0x34e3f2?.['id'];if(!_0x450f22)return;const _0x18bbe3=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0xd9cadc;if(_0x18bbe3===_0x12edd2(0xab))_0xd9cadc=await createStripeCheckout(_0x7d665b,_0x34e3f2['id']),_0x4eaa7e(_0xd9cadc,_0x18bbe3);else _0x18bbe3==='wayforpay'&&(_0xd9cadc=await createWayforpayCheckout(_0x7d665b,_0x34e3f2['id']),_0x4eaa7e(_0xd9cadc,_0x18bbe3));}catch(_0x419232){console['error']('Error\x20in\x20handleEnroll:',_0x419232);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x4eaa7e=(_0x2ddb2e,_0x3943c3)=>{const _0x122278=a4_0x45bb;if(!_0x2ddb2e){alert('Enrollment\x20with\x20'+_0x3943c3+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x2ddb2e['error']){alert(_0x122278(0x9b)+_0x3943c3+'\x20failed:\x20'+_0x2ddb2e['error']);return;}if(_0x2ddb2e[_0x122278(0xa6)]===_0x122278(0xa0)&&_0x2ddb2e['data'])_0x2e846b['push'](_0x2ddb2e['data']);else{if(_0x2ddb2e['type']===_0x122278(0x9f)&&_0x2ddb2e['data']){const _0x41d621=_0x2ddb2e['data'],_0x182b7f=document['createElement']('div');_0x182b7f['innerHTML']=_0x41d621,document['body']['appendChild'](_0x182b7f);const _0x1a337e=_0x182b7f['querySelector']('form#wayforpayForm');_0x1a337e?_0x1a337e[_0x122278(0xae)]():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x2ddb2e['type']==='redirect'&&_0x2ddb2e['data']?_0x2e846b['push'](_0x2ddb2e[_0x122278(0xac)]):alert('Enrollment\x20with\x20'+_0x3943c3+_0x122278(0xad));}};if(!_0x4271fa||_0x49ec9e)return a4_0x87ff8(_0x2401a8(0xa2),{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a4_0x87ff8('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x26e05c)return a4_0x1f7d9d(a4_0x636691,{'prefetch':![],'href':'/dashboard/courses/'+_0x46fd7c,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a4_0x87ff8(_0x2401a8(0xa8),{'children':_0x2401a8(0x9e)}),a4_0x87ff8(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a4_0x1f7d9d('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x49ec9e||!_0x34e3f2?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x34e3f2?.['id']||_0x49ec9e,'onClick':()=>_0x467492(_0x46fd7c),'children':[!_0x34e3f2?.['id']?a4_0x87ff8('span',{'className':''+(_0x49ec9e?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a4_0x87ff8('span',{'className':''+(_0x49ec9e?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x49ec9e&&a4_0x87ff8('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a4_0x87ff8(_0x2401a8(0xa2),{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
