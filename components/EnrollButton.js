"use client";

'use client';(function(_0x35b870,_0x600d0a){const _0xc02e24=a5_0x57e3,_0x386b06=_0x35b870();while(!![]){try{const _0x54627f=-parseInt(_0xc02e24(0x16e))/0x1+parseInt(_0xc02e24(0x169))/0x2+-parseInt(_0xc02e24(0x170))/0x3*(-parseInt(_0xc02e24(0x164))/0x4)+parseInt(_0xc02e24(0x166))/0x5*(parseInt(_0xc02e24(0x16d))/0x6)+parseInt(_0xc02e24(0x16f))/0x7+-parseInt(_0xc02e24(0x16b))/0x8*(-parseInt(_0xc02e24(0x171))/0x9)+-parseInt(_0xc02e24(0x173))/0xa;if(_0x54627f===_0x600d0a)break;else _0x386b06['push'](_0x386b06['shift']());}catch(_0x52f2b7){_0x386b06['push'](_0x386b06['shift']());}}}(a5_0x37a1,0xb862b));import{jsx as a5_0x5872d7,jsxs as a5_0x2a20f1}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a5_0x39f118 from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function a5_0x57e3(_0x1faac7,_0x5006e1){const _0x37a1fb=a5_0x37a1();return a5_0x57e3=function(_0x57e303,_0x2b6118){_0x57e303=_0x57e303-0x164;let _0x1eb387=_0x37a1fb[_0x57e303];return _0x1eb387;},a5_0x57e3(_0x1faac7,_0x5006e1);}function a5_0x37a1(){const _0x453d2e=['data','5kDYjUw','error','NEXT_PUBLIC_PAYMENT_PROVIDER','1437644lDvrjT','Failed\x20to\x20create\x20checkout\x20session','32VFnoBS','body','1968126HxTakx','1379723OaefFQ','9593941RoXRqJ','3uEOPKW','1326582eQVrzo','\x20failed:\x20No\x20result\x20from\x20server.','14148230vANJJt','2171164skBSXG'];a5_0x37a1=function(){return _0x453d2e;};return a5_0x37a1();}function EnrollButton({courseId:_0x34ed8d,isEnrolled:_0x1a79dd}){const {user:_0x129eac,isLoaded:_0x40e4b7}=useUser(),_0x41ff3d=useRouter(),[_0x1cfd3b,_0x5dfd70]=useTransition(),_0x636bc2=async _0x4b604d=>{_0x5dfd70(async()=>{const _0x10b702=a5_0x57e3;try{const _0x21cb4c=_0x129eac?.['id'];if(!_0x21cb4c)return;const _0x4c2631=process['env'][_0x10b702(0x168)];let _0x434110;if(_0x4c2631==='stripe')_0x434110=await createStripeCheckout(_0x4b604d,_0x129eac['id']),_0x1cd8b4(_0x434110,_0x4c2631);else _0x4c2631==='wayforpay'&&(_0x434110=await createWayforpayCheckout(_0x4b604d,_0x129eac['id']),_0x1cd8b4(_0x434110,_0x4c2631));}catch(_0x4871fc){console[_0x10b702(0x167)]('Error\x20in\x20handleEnroll:',_0x4871fc);throw new Error(_0x10b702(0x16a));}});},_0x1cd8b4=(_0x2134cd,_0x2357d6)=>{const _0x174a3c=a5_0x57e3;if(!_0x2134cd){alert('Enrollment\x20with\x20'+_0x2357d6+_0x174a3c(0x172));return;}if(_0x2134cd['error']){alert('Enrollment\x20with\x20'+_0x2357d6+'\x20failed:\x20'+_0x2134cd['error']);return;}if(_0x2134cd['type']==='url'&&_0x2134cd['data'])_0x41ff3d['push'](_0x2134cd['data']);else{if(_0x2134cd['type']==='form'&&_0x2134cd['data']){const _0x5b73f1=_0x2134cd['data'],_0x3a7e3e=document['createElement']('div');_0x3a7e3e['innerHTML']=_0x5b73f1,document[_0x174a3c(0x16c)]['appendChild'](_0x3a7e3e);const _0x2908b9=_0x3a7e3e['querySelector']('form#wayforpayForm');_0x2908b9?_0x2908b9['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x2134cd['type']==='redirect'&&_0x2134cd['data']?_0x41ff3d['push'](_0x2134cd[_0x174a3c(0x165)]):alert('Enrollment\x20with\x20'+_0x2357d6+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x40e4b7||_0x1cfd3b)return a5_0x5872d7('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x5872d7('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x1a79dd)return a5_0x2a20f1(a5_0x39f118,{'prefetch':![],'href':'/dashboard/courses/'+_0x34ed8d,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x5872d7('span',{'children':'Access\x20Course'}),a5_0x5872d7(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x2a20f1('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1cfd3b||!_0x129eac?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x129eac?.['id']||_0x1cfd3b,'onClick':()=>_0x636bc2(_0x34ed8d),'children':[!_0x129eac?.['id']?a5_0x5872d7('span',{'className':''+(_0x1cfd3b?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x5872d7('span',{'className':''+(_0x1cfd3b?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x1cfd3b&&a5_0x5872d7('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x5872d7('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
