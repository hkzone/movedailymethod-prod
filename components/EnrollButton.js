"use client";

'use client';(function(_0x27d9a8,_0x3bb2c2){const _0x15d255=a4_0x4ed5,_0x8f9028=_0x27d9a8();while(!![]){try{const _0x589ac8=parseInt(_0x15d255(0xb4))/0x1*(-parseInt(_0x15d255(0xb3))/0x2)+-parseInt(_0x15d255(0xb5))/0x3+parseInt(_0x15d255(0xb7))/0x4+-parseInt(_0x15d255(0xb6))/0x5+-parseInt(_0x15d255(0xac))/0x6+-parseInt(_0x15d255(0xae))/0x7*(parseInt(_0x15d255(0xb0))/0x8)+parseInt(_0x15d255(0xb8))/0x9;if(_0x589ac8===_0x3bb2c2)break;else _0x8f9028['push'](_0x8f9028['shift']());}catch(_0x2ac9b8){_0x8f9028['push'](_0x8f9028['shift']());}}}(a4_0x4cda,0xa39e0));function a4_0x4ed5(_0x12d7a4,_0x25e0bd){const _0x4cdacc=a4_0x4cda();return a4_0x4ed5=function(_0x4ed54d,_0x46d046){_0x4ed54d=_0x4ed54d-0xab;let _0x265f4d=_0x4cdacc[_0x4ed54d];return _0x265f4d;},a4_0x4ed5(_0x12d7a4,_0x25e0bd);}import{jsx as a4_0x593d1c,jsxs as a4_0x3732f1}from'react/jsx-runtime';function a4_0x4cda(){const _0x16f0de=['type','3308312pHgOUx','env','Enrollment\x20with\x20','2SrwXAd','496793iiTXhL','2905983hWQhCy','5812715AfqByx','1279716LQuwXE','37490175CuEccB','span','4642752yMjdXC','redirect','7RGdXve'];a4_0x4cda=function(){return _0x16f0de;};return a4_0x4cda();}import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a4_0x44db9f from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x454cbf,isEnrolled:_0x5c616b}){const _0x10ac87=a4_0x4ed5,{user:_0x2f5cf9,isLoaded:_0x132be6}=useUser(),_0x46e9bd=useRouter(),[_0x18d1c8,_0x144992]=useTransition(),_0x46de74=async _0x303ae5=>{_0x144992(async()=>{const _0x5ef499=a4_0x4ed5;try{const _0x5592a4=_0x2f5cf9?.['id'];if(!_0x5592a4)return;const _0x14ae2f=process[_0x5ef499(0xb1)]['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x1fae95;if(_0x14ae2f==='stripe')_0x1fae95=await createStripeCheckout(_0x303ae5,_0x2f5cf9['id']),_0x5b0cdb(_0x1fae95,_0x14ae2f);else _0x14ae2f==='wayforpay'&&(_0x1fae95=await createWayforpayCheckout(_0x303ae5,_0x2f5cf9['id']),_0x5b0cdb(_0x1fae95,_0x14ae2f));}catch(_0x50f206){console['error']('Error\x20in\x20handleEnroll:',_0x50f206);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x5b0cdb=(_0x205555,_0x4c4993)=>{const _0x27350c=a4_0x4ed5;if(!_0x205555){alert(_0x27350c(0xb2)+_0x4c4993+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x205555['error']){alert('Enrollment\x20with\x20'+_0x4c4993+'\x20failed:\x20'+_0x205555['error']);return;}if(_0x205555['type']==='url'&&_0x205555['data'])_0x46e9bd['push'](_0x205555['data']);else{if(_0x205555['type']==='form'&&_0x205555['data']){const _0xf4f090=_0x205555['data'],_0x34a5ef=document['createElement']('div');_0x34a5ef['innerHTML']=_0xf4f090,document['body']['appendChild'](_0x34a5ef);const _0x4951ce=_0x34a5ef['querySelector']('form#wayforpayForm');_0x4951ce?_0x4951ce['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x205555[_0x27350c(0xaf)]===_0x27350c(0xad)&&_0x205555['data']?_0x46e9bd['push'](_0x205555['data']):alert('Enrollment\x20with\x20'+_0x4c4993+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x132be6||_0x18d1c8)return a4_0x593d1c('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a4_0x593d1c('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x5c616b)return a4_0x3732f1(a4_0x44db9f,{'prefetch':![],'href':'/dashboard/courses/'+_0x454cbf,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a4_0x593d1c('span',{'children':'Access\x20Course'}),a4_0x593d1c(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a4_0x3732f1('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x18d1c8||!_0x2f5cf9?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x2f5cf9?.['id']||_0x18d1c8,'onClick':()=>_0x46de74(_0x454cbf),'children':[!_0x2f5cf9?.['id']?a4_0x593d1c(_0x10ac87(0xab),{'className':''+(_0x18d1c8?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a4_0x593d1c('span',{'className':''+(_0x18d1c8?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x18d1c8&&a4_0x593d1c('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a4_0x593d1c('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
