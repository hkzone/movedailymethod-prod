"use client";

'use client';(function(_0x56044f,_0x2030ca){const _0x42ae3e=a5_0x10b7,_0xf86ed=_0x56044f();while(!![]){try{const _0x1a4fcf=-parseInt(_0x42ae3e(0x110))/0x1*(-parseInt(_0x42ae3e(0x112))/0x2)+parseInt(_0x42ae3e(0x119))/0x3+-parseInt(_0x42ae3e(0x116))/0x4+parseInt(_0x42ae3e(0x11e))/0x5*(-parseInt(_0x42ae3e(0x117))/0x6)+parseInt(_0x42ae3e(0x10f))/0x7+-parseInt(_0x42ae3e(0x113))/0x8+parseInt(_0x42ae3e(0x118))/0x9;if(_0x1a4fcf===_0x2030ca)break;else _0xf86ed['push'](_0xf86ed['shift']());}catch(_0xf38a12){_0xf86ed['push'](_0xf86ed['shift']());}}}(a5_0x3c01,0x7fffd));import{jsx as a5_0x51af16,jsxs as a5_0x23ae7c}from'react/jsx-runtime';function a5_0x10b7(_0x3bd7ff,_0x4cf558){const _0x3c01d1=a5_0x3c01();return a5_0x10b7=function(_0x10b7c5,_0x4c1561){_0x10b7c5=_0x10b7c5-0x10f;let _0x609544=_0x3c01d1[_0x10b7c5];return _0x609544;},a5_0x10b7(_0x3bd7ff,_0x4cf558);}import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';function a5_0x3c01(){const _0x30f010=['358bxMhqi','2923000bmFvJF','redirect','appendChild','1058752TOGnOp','595770sFndUT','5814450DQCLDE','1564425UDCEqI','Enrollment\x20with\x20','url','error','/dashboard/courses/','35PGaene','353885DtezTr','3527YtLPQI','submit'];a5_0x3c01=function(){return _0x30f010;};return a5_0x3c01();}import a5_0x35e8a4 from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x579bdd,isEnrolled:_0x587174}){const _0xab0b1a=a5_0x10b7,{user:_0x4d6063,isLoaded:_0x2bf215}=useUser(),_0x34a13a=useRouter(),[_0x1b0aee,_0x5a20bb]=useTransition(),_0x55b0f3=async _0x292ea5=>{_0x5a20bb(async()=>{try{const _0x4b5c8e=_0x4d6063?.['id'];if(!_0x4b5c8e)return;const _0x5611c5=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x5441a8;if(_0x5611c5==='stripe')_0x5441a8=await createStripeCheckout(_0x292ea5,_0x4d6063['id']),_0x46ff6c(_0x5441a8,_0x5611c5);else _0x5611c5==='wayforpay'&&(_0x5441a8=await createWayforpayCheckout(_0x292ea5,_0x4d6063['id']),_0x46ff6c(_0x5441a8,_0x5611c5));}catch(_0x25e9dc){console['error']('Error\x20in\x20handleEnroll:',_0x25e9dc);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x46ff6c=(_0x13cddd,_0x7ff238)=>{const _0x21ae68=a5_0x10b7;if(!_0x13cddd){alert(_0x21ae68(0x11a)+_0x7ff238+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x13cddd['error']){alert('Enrollment\x20with\x20'+_0x7ff238+'\x20failed:\x20'+_0x13cddd['error']);return;}if(_0x13cddd['type']===_0x21ae68(0x11b)&&_0x13cddd['data'])_0x34a13a['push'](_0x13cddd['data']);else{if(_0x13cddd['type']==='form'&&_0x13cddd['data']){const _0x33a180=_0x13cddd['data'],_0x2804aa=document['createElement']('div');_0x2804aa['innerHTML']=_0x33a180,document['body'][_0x21ae68(0x115)](_0x2804aa);const _0x512f4d=_0x2804aa['querySelector']('form#wayforpayForm');_0x512f4d?_0x512f4d[_0x21ae68(0x111)]():(console[_0x21ae68(0x11c)]('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x13cddd['type']===_0x21ae68(0x114)&&_0x13cddd['data']?_0x34a13a['push'](_0x13cddd['data']):alert('Enrollment\x20with\x20'+_0x7ff238+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x2bf215||_0x1b0aee)return a5_0x51af16('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x51af16('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x587174)return a5_0x23ae7c(a5_0x35e8a4,{'prefetch':![],'href':_0xab0b1a(0x11d)+_0x579bdd,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x51af16('span',{'children':'Access\x20Course'}),a5_0x51af16(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x23ae7c('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1b0aee||!_0x4d6063?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x4d6063?.['id']||_0x1b0aee,'onClick':()=>_0x55b0f3(_0x579bdd),'children':[!_0x4d6063?.['id']?a5_0x51af16('span',{'className':''+(_0x1b0aee?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x51af16('span',{'className':''+(_0x1b0aee?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x1b0aee&&a5_0x51af16('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x51af16('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
