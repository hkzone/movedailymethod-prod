"use client";

'use client';function a4_0xd0e5(){const _0x33e228=['84tYxqup','136tTQtIy','\x20failed:\x20Unexpected\x20server\x20response.','span','data','2573295jLQXmO','5922fJdfWw','Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.','push','1954684KpIKJR','1506294WqjWjL','551741wurQYB','465692GNqTeF','511209ykRCDK'];a4_0xd0e5=function(){return _0x33e228;};return a4_0xd0e5();}function a4_0x1133(_0x59a600,_0x128856){const _0xd0e502=a4_0xd0e5();return a4_0x1133=function(_0x1133bf,_0x3d7c96){_0x1133bf=_0x1133bf-0xf3;let _0x17bd71=_0xd0e502[_0x1133bf];return _0x17bd71;},a4_0x1133(_0x59a600,_0x128856);}(function(_0x9e5b53,_0x25a37d){const _0x458d45=a4_0x1133,_0x3066da=_0x9e5b53();while(!![]){try{const _0x3ef2ed=parseInt(_0x458d45(0xf3))/0x1+parseInt(_0x458d45(0xf4))/0x2+-parseInt(_0x458d45(0x100))/0x3+parseInt(_0x458d45(0xff))/0x4+parseInt(_0x458d45(0xfb))/0x5+-parseInt(_0x458d45(0xfc))/0x6*(parseInt(_0x458d45(0xf6))/0x7)+-parseInt(_0x458d45(0xf7))/0x8*(parseInt(_0x458d45(0xf5))/0x9);if(_0x3ef2ed===_0x25a37d)break;else _0x3066da['push'](_0x3066da['shift']());}catch(_0x3b52b8){_0x3066da['push'](_0x3066da['shift']());}}}(a4_0xd0e5,0x4b486));import{jsx as a4_0x1c83a0,jsxs as a4_0x3090a7}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a4_0x102782 from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x3378ef,isEnrolled:_0x3c968a}){const _0x348f60=a4_0x1133,{user:_0x57f45e,isLoaded:_0x56d548}=useUser(),_0x3de7be=useRouter(),[_0x43d85e,_0x1bf947]=useTransition(),_0x55d73e=async _0x414691=>{_0x1bf947(async()=>{try{const _0x4f1937=_0x57f45e?.['id'];if(!_0x4f1937)return;const _0x54ed32=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x3d5de5;if(_0x54ed32==='stripe')_0x3d5de5=await createStripeCheckout(_0x414691,_0x57f45e['id']),_0xe158d1(_0x3d5de5,_0x54ed32);else _0x54ed32==='wayforpay'&&(_0x3d5de5=await createWayforpayCheckout(_0x414691,_0x57f45e['id']),_0xe158d1(_0x3d5de5,_0x54ed32));}catch(_0x68db5){console['error']('Error\x20in\x20handleEnroll:',_0x68db5);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0xe158d1=(_0x2df183,_0x55a1be)=>{const _0x3c45d0=a4_0x1133;if(!_0x2df183){alert('Enrollment\x20with\x20'+_0x55a1be+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x2df183['error']){alert('Enrollment\x20with\x20'+_0x55a1be+'\x20failed:\x20'+_0x2df183['error']);return;}if(_0x2df183['type']==='url'&&_0x2df183['data'])_0x3de7be[_0x3c45d0(0xfe)](_0x2df183['data']);else{if(_0x2df183['type']==='form'&&_0x2df183['data']){const _0x4ab61c=_0x2df183[_0x3c45d0(0xfa)],_0x2bb184=document['createElement']('div');_0x2bb184['innerHTML']=_0x4ab61c,document['body']['appendChild'](_0x2bb184);const _0x45fa68=_0x2bb184['querySelector']('form#wayforpayForm');_0x45fa68?_0x45fa68['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert(_0x3c45d0(0xfd)));}else _0x2df183['type']==='redirect'&&_0x2df183['data']?_0x3de7be['push'](_0x2df183['data']):alert('Enrollment\x20with\x20'+_0x55a1be+_0x3c45d0(0xf8));}};if(!_0x56d548||_0x43d85e)return a4_0x1c83a0('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a4_0x1c83a0('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x3c968a)return a4_0x3090a7(a4_0x102782,{'prefetch':![],'href':'/dashboard/courses/'+_0x3378ef,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a4_0x1c83a0('span',{'children':'Access\x20Course'}),a4_0x1c83a0(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a4_0x3090a7('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x43d85e||!_0x57f45e?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x57f45e?.['id']||_0x43d85e,'onClick':()=>_0x55d73e(_0x3378ef),'children':[!_0x57f45e?.['id']?a4_0x1c83a0(_0x348f60(0xf9),{'className':''+(_0x43d85e?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a4_0x1c83a0('span',{'className':''+(_0x43d85e?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x43d85e&&a4_0x1c83a0('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a4_0x1c83a0('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
