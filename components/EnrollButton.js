"use client";

'use client';(function(_0x43a156,_0x2462ce){const _0x4aea3f=a4_0x4406,_0x313b31=_0x43a156();while(!![]){try{const _0x3cd9d4=-parseInt(_0x4aea3f(0x74))/0x1*(-parseInt(_0x4aea3f(0x72))/0x2)+-parseInt(_0x4aea3f(0x7f))/0x3*(-parseInt(_0x4aea3f(0x7d))/0x4)+parseInt(_0x4aea3f(0x79))/0x5*(parseInt(_0x4aea3f(0x7a))/0x6)+parseInt(_0x4aea3f(0x77))/0x7*(parseInt(_0x4aea3f(0x7b))/0x8)+-parseInt(_0x4aea3f(0x78))/0x9*(-parseInt(_0x4aea3f(0x76))/0xa)+parseInt(_0x4aea3f(0x7e))/0xb+-parseInt(_0x4aea3f(0x7c))/0xc;if(_0x3cd9d4===_0x2462ce)break;else _0x313b31['push'](_0x313b31['shift']());}catch(_0x2ed1bc){_0x313b31['push'](_0x313b31['shift']());}}}(a4_0x3ffc,0xd47cb));import{jsx as a4_0x1030b0,jsxs as a4_0x532918}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';function a4_0x3ffc(){const _0x2eb3d0=['56600ENZETq','55554468cWRMXj','100RUxebs','17742846YWvdQs','69363BjaSiq','w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20','615530FisPEj','span','1zUgQsa','createElement','10fTGzLX','1337dbSmOX','10553805NPrbae','596425SJnNnM','24izZunm'];a4_0x3ffc=function(){return _0x2eb3d0;};return a4_0x3ffc();}import a4_0x3e8d03 from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function a4_0x4406(_0xeac04,_0x1e959c){const _0x3ffced=a4_0x3ffc();return a4_0x4406=function(_0x440635,_0x17e53f){_0x440635=_0x440635-0x71;let _0x1c4d64=_0x3ffced[_0x440635];return _0x1c4d64;},a4_0x4406(_0xeac04,_0x1e959c);}function EnrollButton({courseId:_0x54e9b5,isEnrolled:_0x1cde80}){const _0x380011=a4_0x4406,{user:_0x473922,isLoaded:_0x2d014c}=useUser(),_0x59bccd=useRouter(),[_0xc160af,_0x283a4d]=useTransition(),_0x1a2fbf=async _0x328d6f=>{_0x283a4d(async()=>{try{const _0x161b38=_0x473922?.['id'];if(!_0x161b38)return;const _0x37f888=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x1b7f86;if(_0x37f888==='stripe')_0x1b7f86=await createStripeCheckout(_0x328d6f,_0x473922['id']),_0x39ed40(_0x1b7f86,_0x37f888);else _0x37f888==='wayforpay'&&(_0x1b7f86=await createWayforpayCheckout(_0x328d6f,_0x473922['id']),_0x39ed40(_0x1b7f86,_0x37f888));}catch(_0x461400){console['error']('Error\x20in\x20handleEnroll:',_0x461400);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x39ed40=(_0x1d12e2,_0x3d78e3)=>{const _0x384dc3=a4_0x4406;if(!_0x1d12e2){alert('Enrollment\x20with\x20'+_0x3d78e3+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x1d12e2['error']){alert('Enrollment\x20with\x20'+_0x3d78e3+'\x20failed:\x20'+_0x1d12e2['error']);return;}if(_0x1d12e2['type']==='url'&&_0x1d12e2['data'])_0x59bccd['push'](_0x1d12e2['data']);else{if(_0x1d12e2['type']==='form'&&_0x1d12e2['data']){const _0x5092c0=_0x1d12e2['data'],_0x401c6a=document[_0x384dc3(0x75)]('div');_0x401c6a['innerHTML']=_0x5092c0,document['body']['appendChild'](_0x401c6a);const _0x55a5c7=_0x401c6a['querySelector']('form#wayforpayForm');_0x55a5c7?_0x55a5c7['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x1d12e2['type']==='redirect'&&_0x1d12e2['data']?_0x59bccd['push'](_0x1d12e2['data']):alert('Enrollment\x20with\x20'+_0x3d78e3+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x2d014c||_0xc160af)return a4_0x1030b0('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a4_0x1030b0('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x1cde80)return a4_0x532918(a4_0x3e8d03,{'prefetch':![],'href':'/dashboard/courses/'+_0x54e9b5,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a4_0x1030b0(_0x380011(0x73),{'children':'Access\x20Course'}),a4_0x1030b0(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a4_0x532918('button',{'className':_0x380011(0x71)+(_0xc160af||!_0x473922?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x473922?.['id']||_0xc160af,'onClick':()=>_0x1a2fbf(_0x54e9b5),'children':[!_0x473922?.['id']?a4_0x1030b0('span',{'className':''+(_0xc160af?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a4_0x1030b0(_0x380011(0x73),{'className':''+(_0xc160af?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0xc160af&&a4_0x1030b0('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a4_0x1030b0('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
