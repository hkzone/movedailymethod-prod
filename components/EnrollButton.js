"use client";

'use client';(function(_0x414d9a,_0x18b0f8){const _0x3dcf70=a5_0xf88b,_0x5b2b83=_0x414d9a();while(!![]){try{const _0x444757=parseInt(_0x3dcf70(0x95))/0x1*(-parseInt(_0x3dcf70(0x9d))/0x2)+parseInt(_0x3dcf70(0x99))/0x3*(parseInt(_0x3dcf70(0x98))/0x4)+parseInt(_0x3dcf70(0x94))/0x5+-parseInt(_0x3dcf70(0x92))/0x6*(parseInt(_0x3dcf70(0x9e))/0x7)+parseInt(_0x3dcf70(0x96))/0x8+-parseInt(_0x3dcf70(0x93))/0x9*(parseInt(_0x3dcf70(0x97))/0xa)+parseInt(_0x3dcf70(0x9f))/0xb;if(_0x444757===_0x18b0f8)break;else _0x5b2b83['push'](_0x5b2b83['shift']());}catch(_0x53d737){_0x5b2b83['push'](_0x5b2b83['shift']());}}}(a5_0x58a2,0xc6ce8));import{jsx as a5_0x385bcf,jsxs as a5_0x7b5316}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';function a5_0x58a2(){const _0x55b5cf=['21RBMSzn','7505553DlDIEt','2906850wOGwQG','595719dqcFai','4603400MAhrSs','82180HrlzLt','459048tgpcDL','20zpnhEp','1940lLNTPe','6609SAHOZG','data','Enrollment\x20with\x20','stripe','8dSLqgC'];a5_0x58a2=function(){return _0x55b5cf;};return a5_0x58a2();}import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';function a5_0xf88b(_0x11819e,_0xe59e79){const _0x58a26c=a5_0x58a2();return a5_0xf88b=function(_0xf88b8a,_0x2c0242){_0xf88b8a=_0xf88b8a-0x92;let _0x58a399=_0x58a26c[_0xf88b8a];return _0x58a399;},a5_0xf88b(_0x11819e,_0xe59e79);}import a5_0x3448ce from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function EnrollButton({courseId:_0x2ff16f,isEnrolled:_0x21f691}){const {user:_0x30263d,isLoaded:_0x40a886}=useUser(),_0x10d4f7=useRouter(),[_0x57f42f,_0x373b56]=useTransition(),_0x4eaf4b=async _0x281573=>{_0x373b56(async()=>{const _0x16c5a2=a5_0xf88b;try{const _0x3c2ae5=_0x30263d?.['id'];if(!_0x3c2ae5)return;const _0x53ecd6=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x2f8bdc;if(_0x53ecd6===_0x16c5a2(0x9c))_0x2f8bdc=await createStripeCheckout(_0x281573,_0x30263d['id']),_0x5a5509(_0x2f8bdc,_0x53ecd6);else _0x53ecd6==='wayforpay'&&(_0x2f8bdc=await createWayforpayCheckout(_0x281573,_0x30263d['id']),_0x5a5509(_0x2f8bdc,_0x53ecd6));}catch(_0x2b7b5c){console['error']('Error\x20in\x20handleEnroll:',_0x2b7b5c);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x5a5509=(_0x5b0fe5,_0x344266)=>{const _0x30bc6b=a5_0xf88b;if(!_0x5b0fe5){alert('Enrollment\x20with\x20'+_0x344266+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x5b0fe5['error']){alert(_0x30bc6b(0x9b)+_0x344266+'\x20failed:\x20'+_0x5b0fe5['error']);return;}if(_0x5b0fe5['type']==='url'&&_0x5b0fe5['data'])_0x10d4f7['push'](_0x5b0fe5['data']);else{if(_0x5b0fe5['type']==='form'&&_0x5b0fe5['data']){const _0x4f912b=_0x5b0fe5['data'],_0xa0944c=document['createElement']('div');_0xa0944c['innerHTML']=_0x4f912b,document['body']['appendChild'](_0xa0944c);const _0x219eed=_0xa0944c['querySelector']('form#wayforpayForm');_0x219eed?_0x219eed['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0x5b0fe5['type']==='redirect'&&_0x5b0fe5['data']?_0x10d4f7['push'](_0x5b0fe5[_0x30bc6b(0x9a)]):alert('Enrollment\x20with\x20'+_0x344266+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x40a886||_0x57f42f)return a5_0x385bcf('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x385bcf('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x21f691)return a5_0x7b5316(a5_0x3448ce,{'prefetch':![],'href':'/dashboard/courses/'+_0x2ff16f,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x385bcf('span',{'children':'Access\x20Course'}),a5_0x385bcf(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x7b5316('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x57f42f||!_0x30263d?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0x30263d?.['id']||_0x57f42f,'onClick':()=>_0x4eaf4b(_0x2ff16f),'children':[!_0x30263d?.['id']?a5_0x385bcf('span',{'className':''+(_0x57f42f?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x385bcf('span',{'className':''+(_0x57f42f?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x57f42f&&a5_0x385bcf('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x385bcf('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
