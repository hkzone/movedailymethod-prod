"use client";

'use client';(function(_0x577339,_0x423b73){const _0x459eb2=a4_0x5ee1,_0x41035a=_0x577339();while(!![]){try{const _0x14ea9d=-parseInt(_0x459eb2(0x1b7))/0x1*(parseInt(_0x459eb2(0x1b1))/0x2)+-parseInt(_0x459eb2(0x1af))/0x3*(-parseInt(_0x459eb2(0x1b0))/0x4)+-parseInt(_0x459eb2(0x1a6))/0x5+parseInt(_0x459eb2(0x1b4))/0x6+parseInt(_0x459eb2(0x1b2))/0x7*(parseInt(_0x459eb2(0x1ad))/0x8)+-parseInt(_0x459eb2(0x1a9))/0x9*(-parseInt(_0x459eb2(0x1a7))/0xa)+-parseInt(_0x459eb2(0x1aa))/0xb;if(_0x14ea9d===_0x423b73)break;else _0x41035a['push'](_0x41035a['shift']());}catch(_0x4f44b4){_0x41035a['push'](_0x41035a['shift']());}}}(a4_0x5e98,0xa931b));import{jsx as a4_0x3c3126,jsxs as a4_0x35e806}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a4_0x3d401e from'next/link';import{useRouter}from'next/navigation';import{useTransition}from'react';function a4_0x5ee1(_0x1e651c,_0x30ff1f){const _0x5e9876=a4_0x5e98();return a4_0x5ee1=function(_0x5ee100,_0x3d91ef){_0x5ee100=_0x5ee100-0x1a6;let _0x4e2bcc=_0x5e9876[_0x5ee100];if(a4_0x5ee1['ZvSsIr']===undefined){var _0x4dd565=function(_0x3c3126){const _0x35e806='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3d401e='',_0x30d013='';for(let _0x1f922d=0x0,_0x3ed731,_0x39b3e3,_0x14c98=0x0;_0x39b3e3=_0x3c3126['charAt'](_0x14c98++);~_0x39b3e3&&(_0x3ed731=_0x1f922d%0x4?_0x3ed731*0x40+_0x39b3e3:_0x39b3e3,_0x1f922d++%0x4)?_0x3d401e+=String['fromCharCode'](0xff&_0x3ed731>>(-0x2*_0x1f922d&0x6)):0x0){_0x39b3e3=_0x35e806['indexOf'](_0x39b3e3);}for(let _0x1f17dd=0x0,_0x52d71b=_0x3d401e['length'];_0x1f17dd<_0x52d71b;_0x1f17dd++){_0x30d013+='%'+('00'+_0x3d401e['charCodeAt'](_0x1f17dd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x30d013);};a4_0x5ee1['ZGozMy']=_0x4dd565,_0x1e651c=arguments,a4_0x5ee1['ZvSsIr']=!![];}const _0x506300=_0x5e9876[0x0],_0x547938=_0x5ee100+_0x506300,_0x2c7ac4=_0x1e651c[_0x547938];return!_0x2c7ac4?(_0x4e2bcc=a4_0x5ee1['ZGozMy'](_0x4e2bcc),_0x1e651c[_0x547938]=_0x4e2bcc):_0x4e2bcc=_0x2c7ac4,_0x4e2bcc;},a4_0x5ee1(_0x1e651c,_0x30ff1f);}function a4_0x5e98(){const _0x990cde=['mZa0ofjnquzAua','C3rYAxbL','mteZodm5nvrUzLLNDa','ngXcr3LctG','nZm2odu2yxLetvPc','mJm0ntb3ywT6Ahm','cIaGicaGia','odeZmZC0nenZvw94rq','CMvKAxjLy3q','q291BgqGBM90igLUAxrPyxrLifDHEuzVCLbHEsbWyxLTzw50lIbqBgvHC2uGDhj5igfNywLUlG','mxfnAePssW','nJq1nJa2mfPMD2TKuW','mtbhDgDRv1e','v2f5rM9Yugf5igzVCM0GzwXLBwvUDcbUB3qGzM91BMqGAw4Gsfrntc4','nJiYndmXAMzgCfPs','odaWnZmYoxjICLf4ta','u2LNBIbPBIb0BYbfBNjVBgW','Aw5Uzxjive1m'];a4_0x5e98=function(){return _0x990cde;};return a4_0x5e98();}function EnrollButton({courseId:_0x30d013,isEnrolled:_0x1f922d}){const _0x319e8e=a4_0x5ee1,{user:_0x3ed731,isLoaded:_0x39b3e3}=useUser(),_0x14c98=useRouter(),[_0x1f17dd,_0x52d71b]=useTransition(),_0x400711=async _0x5059dd=>{_0x52d71b(async()=>{const _0x4d315d=a4_0x5ee1;try{const _0x42fa16=_0x3ed731?.['id'];if(!_0x42fa16)return;const _0xa29852=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x58684f;if(_0xa29852===_0x4d315d(0x1ae))_0x58684f=await createStripeCheckout(_0x5059dd,_0x3ed731['id']),_0x3060c9(_0x58684f,_0xa29852);else _0xa29852==='wayforpay'&&(_0x58684f=await createWayforpayCheckout(_0x5059dd,_0x3ed731['id']),_0x3060c9(_0x58684f,_0xa29852));}catch(_0x1aa1f7){console['error']('Error\x20in\x20handleEnroll:',_0x1aa1f7);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x3060c9=(_0x582ae4,_0x13c0c9)=>{const _0xaeadba=a4_0x5ee1;if(!_0x582ae4){alert('Enrollment\x20with\x20'+_0x13c0c9+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0x582ae4['error']){alert('Enrollment\x20with\x20'+_0x13c0c9+'\x20failed:\x20'+_0x582ae4['error']);return;}if(_0x582ae4['type']==='url'&&_0x582ae4['data'])_0x14c98['push'](_0x582ae4['data']);else{if(_0x582ae4['type']==='form'&&_0x582ae4['data']){const _0x2a5eee=_0x582ae4['data'],_0x2e5b34=document['createElement']('div');_0x2e5b34[_0xaeadba(0x1ac)]=_0x2a5eee,document['body']['appendChild'](_0x2e5b34);const _0x2ac545=_0x2e5b34['querySelector']('form#wayforpayForm');_0x2ac545?_0x2ac545['submit']():(console['error'](_0xaeadba(0x1a8)),alert(_0xaeadba(0x1b6)));}else _0x582ae4['type']===_0xaeadba(0x1b5)&&_0x582ae4['data']?_0x14c98['push'](_0x582ae4['data']):alert('Enrollment\x20with\x20'+_0x13c0c9+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0x39b3e3||_0x1f17dd)return a4_0x3c3126('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a4_0x3c3126('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x1f922d)return a4_0x35e806(a4_0x3d401e,{'prefetch':![],'href':'/dashboard/courses/'+_0x30d013,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a4_0x3c3126('span',{'children':'Access\x20Course'}),a4_0x3c3126(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a4_0x35e806('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1f17dd||!_0x3ed731?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+_0x319e8e(0x1b3),'disabled':!_0x3ed731?.['id']||_0x1f17dd,'onClick':()=>_0x400711(_0x30d013),'children':[!_0x3ed731?.['id']?a4_0x3c3126('span',{'className':''+(_0x1f17dd?'opacity-0':'opacity-100'),'children':_0x319e8e(0x1ab)}):a4_0x3c3126('span',{'className':''+(_0x1f17dd?'opacity-0':'opacity-100'),'children':'Enroll\x20Now'}),_0x1f17dd&&a4_0x3c3126('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a4_0x3c3126('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
