"use client";

'use client';(function(_0xc9ff55,_0x54cb39){const _0x1be952=a5_0x31b1,_0x261479=_0xc9ff55();while(!![]){try{const _0xf1b0b=-parseInt(_0x1be952(0xa0))/0x1*(-parseInt(_0x1be952(0x9f))/0x2)+-parseInt(_0x1be952(0x9d))/0x3*(-parseInt(_0x1be952(0x9b))/0x4)+parseInt(_0x1be952(0x96))/0x5+-parseInt(_0x1be952(0x99))/0x6+-parseInt(_0x1be952(0x98))/0x7+parseInt(_0x1be952(0x9c))/0x8*(-parseInt(_0x1be952(0x95))/0x9)+-parseInt(_0x1be952(0x9e))/0xa;if(_0xf1b0b===_0x54cb39)break;else _0x261479['push'](_0x261479['shift']());}catch(_0x37c84e){_0x261479['push'](_0x261479['shift']());}}}(a5_0x2805,0x76ed7));function a5_0x2805(){const _0x3da5cc=['612082kCYYuj','332703YkrUgs','1926775QqRObz','opacity-0','1146376niYTyQ','2393718YTxEQj','stripe','1242052vbVXkg','16ixjdmI','3YGOJUJ','1841680dDPRSi','2bfkEUg'];a5_0x2805=function(){return _0x3da5cc;};return a5_0x2805();}import{jsx as a5_0x5338b9,jsxs as a5_0x5440ec}from'react/jsx-runtime';import{createStripeCheckout}from'@/actions/createStripeCheckout';import{createWayforpayCheckout}from'@/actions/createWayforpayCheckout';import{useUser}from'@clerk/nextjs';import{CheckCircle}from'lucide-react';import a5_0x14fdbe from'next/link';import{useRouter}from'next/navigation';function a5_0x31b1(_0x1f400e,_0x19aa64){const _0x280523=a5_0x2805();return a5_0x31b1=function(_0x31b12d,_0x292ff2){_0x31b12d=_0x31b12d-0x95;let _0x29f7cd=_0x280523[_0x31b12d];return _0x29f7cd;},a5_0x31b1(_0x1f400e,_0x19aa64);}import{useTransition}from'react';function EnrollButton({courseId:_0x1bd72c,isEnrolled:_0x9fc6a3}){const _0x17f0f2=a5_0x31b1,{user:_0xb6bf77,isLoaded:_0xabb534}=useUser(),_0x49be83=useRouter(),[_0xe8da99,_0x541d3f]=useTransition(),_0x5c676f=async _0xa423e3=>{_0x541d3f(async()=>{const _0x393f4c=a5_0x31b1;try{const _0x27eda3=_0xb6bf77?.['id'];if(!_0x27eda3)return;const _0x890fe0=process['env']['NEXT_PUBLIC_PAYMENT_PROVIDER'];let _0x422e8d;if(_0x890fe0===_0x393f4c(0x9a))_0x422e8d=await createStripeCheckout(_0xa423e3,_0xb6bf77['id']),_0x26beab(_0x422e8d,_0x890fe0);else _0x890fe0==='wayforpay'&&(_0x422e8d=await createWayforpayCheckout(_0xa423e3,_0xb6bf77['id']),_0x26beab(_0x422e8d,_0x890fe0));}catch(_0x221bd0){console['error']('Error\x20in\x20handleEnroll:',_0x221bd0);throw new Error('Failed\x20to\x20create\x20checkout\x20session');}});},_0x26beab=(_0xb744e5,_0x3e8151)=>{if(!_0xb744e5){alert('Enrollment\x20with\x20'+_0x3e8151+'\x20failed:\x20No\x20result\x20from\x20server.');return;}if(_0xb744e5['error']){alert('Enrollment\x20with\x20'+_0x3e8151+'\x20failed:\x20'+_0xb744e5['error']);return;}if(_0xb744e5['type']==='url'&&_0xb744e5['data'])_0x49be83['push'](_0xb744e5['data']);else{if(_0xb744e5['type']==='form'&&_0xb744e5['data']){const _0x30f5ab=_0xb744e5['data'],_0x36f8f2=document['createElement']('div');_0x36f8f2['innerHTML']=_0x30f5ab,document['body']['appendChild'](_0x36f8f2);const _0x467b40=_0x36f8f2['querySelector']('form#wayforpayForm');_0x467b40?_0x467b40['submit']():(console['error']('WayForPay\x20form\x20element\x20not\x20found\x20in\x20HTML.'),alert('Could\x20not\x20initiate\x20WayForPay\x20payment.\x20Please\x20try\x20again.'));}else _0xb744e5['type']==='redirect'&&_0xb744e5['data']?_0x49be83['push'](_0xb744e5['data']):alert('Enrollment\x20with\x20'+_0x3e8151+'\x20failed:\x20Unexpected\x20server\x20response.');}};if(!_0xabb534||_0xe8da99)return a5_0x5338b9('div',{'className':'w-full h-12 rounded-lg bg-gray-100 flex items-center justify-center','children':a5_0x5338b9('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})});if(_0x9fc6a3)return a5_0x5440ec(a5_0x14fdbe,{'prefetch':![],'href':'/dashboard/courses/'+_0x1bd72c,'className':'w-full rounded-lg px-6 py-3 font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-300 h-12 flex items-center justify-center gap-2 group','children':[a5_0x5338b9('span',{'children':'Access\x20Course'}),a5_0x5338b9(CheckCircle,{'className':'w-5 h-5 group-hover:scale-110 transition-transform'})]});return a5_0x5440ec('button',{'className':'w-full\x20rounded-lg\x20px-6\x20py-3\x20font-medium\x20transition-all\x20duration-300\x20ease-in-out\x20relative\x20h-12\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xe8da99||!_0xb6bf77?.['id']?'bg-gray-100 text-gray-400 cursor-not-allowed hover:scale-100':'bg-white text-black hover:scale-105 hover:shadow-lg hover:shadow-black/10')+'\x0a\x20\x20\x20\x20\x20\x20','disabled':!_0xb6bf77?.['id']||_0xe8da99,'onClick':()=>_0x5c676f(_0x1bd72c),'children':[!_0xb6bf77?.['id']?a5_0x5338b9('span',{'className':''+(_0xe8da99?'opacity-0':'opacity-100'),'children':'Sign\x20in\x20to\x20Enroll'}):a5_0x5338b9('span',{'className':''+(_0xe8da99?_0x17f0f2(0x97):'opacity-100'),'children':'Enroll\x20Now'}),_0xe8da99&&a5_0x5338b9('div',{'className':'absolute\x20inset-0\x20flex\x20items-center\x20justify-center','children':a5_0x5338b9('div',{'className':'w-5 h-5 border-2 border-gray-400 border-t-gray-600 rounded-full animate-spin'})})]});}export default EnrollButton;
