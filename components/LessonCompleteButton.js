"use client";

'use client';(function(_0x503ed7,_0xd79278){const _0x24f4d6=a5_0x24f1,_0x51724a=_0x503ed7();while(!![]){try{const _0x4def7f=parseInt(_0x24f4d6(0x143))/0x1+-parseInt(_0x24f4d6(0x146))/0x2+-parseInt(_0x24f4d6(0x14b))/0x3+parseInt(_0x24f4d6(0x147))/0x4+parseInt(_0x24f4d6(0x148))/0x5*(parseInt(_0x24f4d6(0x142))/0x6)+parseInt(_0x24f4d6(0x145))/0x7*(-parseInt(_0x24f4d6(0x149))/0x8)+-parseInt(_0x24f4d6(0x144))/0x9*(-parseInt(_0x24f4d6(0x14a))/0xa);if(_0x4def7f===_0xd79278)break;else _0x51724a['push'](_0x51724a['shift']());}catch(_0x363c62){_0x51724a['push'](_0x51724a['shift']());}}}(a5_0x4e06,0x889e7));import{jsx as a5_0x4bf21d,jsxs as a5_0x126af4,Fragment as a5_0x5a05a8}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';function a5_0x4e06(){const _0x15f2ea=['3085332zTxyPw','802362lRYfxx','967737kHKytJ','9NYeTDT','21gSFHZU','27040FBRCZM','882548AZZdws','20KGQkqA','392512jPtNgR','254650BUcMwR'];a5_0x4e06=function(){return _0x15f2ea;};return a5_0x4e06();}function a5_0x24f1(_0x1e91a6,_0x11f29f){const _0x4e064a=a5_0x4e06();return a5_0x24f1=function(_0x24f131,_0x54753b){_0x24f131=_0x24f131-0x142;let _0x46508b=_0x4e064a[_0x24f131];return _0x46508b;},a5_0x24f1(_0x1e91a6,_0x11f29f);}import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x417f03,clerkId:_0x454a8f}){const [_0x5c1441,_0x1aabc4]=useState(![]),[_0x5274bf,_0x35fb92]=useState(null),[_0x23eec6,_0x7d91dd]=useTransition(),_0x4b87aa=useRouter();useEffect(()=>{_0x7d91dd(async()=>{try{const _0x55c499=await getLessonCompletionStatusAction(_0x417f03,_0x454a8f);_0x35fb92(_0x55c499);}catch(_0x38cbf0){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x38cbf0),_0x35fb92(![]);}});},[_0x417f03,_0x454a8f]);const _0x27f570=async()=>{try{_0x1aabc4(!![]),_0x5274bf?await uncompleteLessonAction(_0x417f03,_0x454a8f):await completeLessonAction(_0x417f03,_0x454a8f),_0x7d91dd(async()=>{const _0x4bfb86=await getLessonCompletionStatusAction(_0x417f03,_0x454a8f);_0x35fb92(_0x4bfb86);}),_0x4b87aa['refresh']();}catch(_0x234259){console['error']('Error\x20toggling\x20lesson\x20completion:',_0x234259);}finally{_0x1aabc4(![]);}},_0x4f472f=_0x5274bf===null||_0x23eec6;return a5_0x4bf21d('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a5_0x126af4('div',{'className':'max-w-4xl mx-auto flex items-center justify-between gap-4','children':[a5_0x126af4('div',{'className':'flex-1','children':[a5_0x4bf21d('p',{'className':'text-sm font-medium','children':_0x5274bf?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a5_0x4bf21d('p',{'className':'text-sm text-muted-foreground','children':_0x5274bf?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you&apos;re\x20done.'})]}),a5_0x4bf21d(Button,{'onClick':_0x27f570,'disabled':_0x5c1441||_0x4f472f,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x5274bf?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x4f472f?a5_0x126af4(a5_0x5a05a8,{'children':[a5_0x4bf21d(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x5c1441?a5_0x126af4(a5_0x5a05a8,{'children':[a5_0x4bf21d(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x5274bf?'Uncompleting...':'Completing...']}):_0x5274bf?a5_0x126af4(a5_0x5a05a8,{'children':[a5_0x4bf21d(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a5_0x126af4(a5_0x5a05a8,{'children':[a5_0x4bf21d(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
