"use client";

'use client';(function(_0x5bc564,_0x540c1d){const _0x2a15e2=a7_0x142c,_0x1dc4e8=_0x5bc564();while(!![]){try{const _0x207b55=-parseInt(_0x2a15e2(0x192))/0x1+parseInt(_0x2a15e2(0x194))/0x2+parseInt(_0x2a15e2(0x18f))/0x3+-parseInt(_0x2a15e2(0x197))/0x4*(-parseInt(_0x2a15e2(0x195))/0x5)+parseInt(_0x2a15e2(0x191))/0x6+-parseInt(_0x2a15e2(0x193))/0x7*(parseInt(_0x2a15e2(0x18e))/0x8)+-parseInt(_0x2a15e2(0x190))/0x9*(parseInt(_0x2a15e2(0x196))/0xa);if(_0x207b55===_0x540c1d)break;else _0x1dc4e8['push'](_0x1dc4e8['shift']());}catch(_0x242e27){_0x1dc4e8['push'](_0x1dc4e8['shift']());}}}(a7_0x1fd9,0x85f2f));function a7_0x142c(_0x48462b,_0x18ce28){const _0x1fd9d6=a7_0x1fd9();return a7_0x142c=function(_0x142c8c,_0xe50d6b){_0x142c8c=_0x142c8c-0x18e;let _0x34b751=_0x1fd9d6[_0x142c8c];return _0x34b751;},a7_0x142c(_0x48462b,_0x18ce28);}function a7_0x1fd9(){const _0x109380=['20iAunRG','604NLARkz','422744AOYQWO','602688XBEAzv','1871208vkidkU','5091690ndjOXY','987230XzMCDa','133qAKTLL','1692692mDKacq','35095wQpXXV'];a7_0x1fd9=function(){return _0x109380;};return a7_0x1fd9();}import{jsx as a7_0x477b71,jsxs as a7_0x4c1754,Fragment as a7_0x26be4d}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x5b536b,clerkId:_0x8947bf}){const [_0x4a02e8,_0x2c3453]=useState(![]),[_0xd06e58,_0x4bbe57]=useState(null),[_0x48fc48,_0x297530]=useTransition(),_0x3afa4a=useRouter();useEffect(()=>{_0x297530(async()=>{try{const _0x42b06d=await getLessonCompletionStatusAction(_0x5b536b,_0x8947bf);_0x4bbe57(_0x42b06d);}catch(_0x30af05){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x30af05),_0x4bbe57(![]);}});},[_0x5b536b,_0x8947bf]);const _0x379cd0=async()=>{try{_0x2c3453(!![]),_0xd06e58?await uncompleteLessonAction(_0x5b536b,_0x8947bf):await completeLessonAction(_0x5b536b,_0x8947bf),_0x297530(async()=>{const _0x27ef60=await getLessonCompletionStatusAction(_0x5b536b,_0x8947bf);_0x4bbe57(_0x27ef60);}),_0x3afa4a['refresh']();}catch(_0x2fe681){console['error']('Error\x20toggling\x20lesson\x20completion:',_0x2fe681);}finally{_0x2c3453(![]);}},_0x1d3dc8=_0xd06e58===null||_0x48fc48;return a7_0x477b71('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a7_0x4c1754('div',{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a7_0x4c1754('div',{'className':'md:flex-1 text-center md:text-left','children':[a7_0x477b71('p',{'className':'text-sm font-medium','children':_0xd06e58?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a7_0x477b71('p',{'className':'text-sm text-muted-foreground','children':_0xd06e58?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.'})]}),a7_0x477b71(Button,{'onClick':_0x379cd0,'disabled':_0x4a02e8||_0x1d3dc8,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0xd06e58?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x1d3dc8?a7_0x4c1754(a7_0x26be4d,{'children':[a7_0x477b71(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x4a02e8?a7_0x4c1754(a7_0x26be4d,{'children':[a7_0x477b71(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0xd06e58?'Uncompleting...':'Completing...']}):_0xd06e58?a7_0x4c1754(a7_0x26be4d,{'children':[a7_0x477b71(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a7_0x4c1754(a7_0x26be4d,{'children':[a7_0x477b71(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
