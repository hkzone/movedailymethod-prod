"use client";

'use client';(function(_0x3f34de,_0x2df50f){const _0x55d14d=a5_0x52c4,_0x2250ea=_0x3f34de();while(!![]){try{const _0x25c0b7=-parseInt(_0x55d14d(0x16f))/0x1+parseInt(_0x55d14d(0x16c))/0x2+-parseInt(_0x55d14d(0x168))/0x3+parseInt(_0x55d14d(0x170))/0x4+parseInt(_0x55d14d(0x16d))/0x5*(-parseInt(_0x55d14d(0x16e))/0x6)+parseInt(_0x55d14d(0x16b))/0x7+-parseInt(_0x55d14d(0x16a))/0x8;if(_0x25c0b7===_0x2df50f)break;else _0x2250ea['push'](_0x2250ea['shift']());}catch(_0x368914){_0x2250ea['push'](_0x2250ea['shift']());}}}(a5_0xb99c,0x72a77));function a5_0x52c4(_0x526575,_0x3512b3){const _0xb99cdb=a5_0xb99c();return a5_0x52c4=function(_0x52c4c7,_0x2999b7){_0x52c4c7=_0x52c4c7-0x168;let _0x217e3f=_0xb99cdb[_0x52c4c7];return _0x217e3f;},a5_0x52c4(_0x526575,_0x3512b3);}import{jsx as a5_0x13844c,jsxs as a5_0x392d63,Fragment as a5_0x56b4b0}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';function a5_0xb99c(){const _0x29ad3e=['53155qWpsNy','348xDMLBy','68079XKWAMq','2749180lwxxzJ','2395278PPecGo','Lesson\x20completed!','863912rgpUVH','4667544YIsZXI','1413256sKBLve'];a5_0xb99c=function(){return _0x29ad3e;};return a5_0xb99c();}import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x133bf7,clerkId:_0x4f9671}){const _0x4d0fe2=a5_0x52c4,[_0x5c38db,_0x1b415c]=useState(![]),[_0x2c3c3e,_0x3ac536]=useState(null),[_0x4dd817,_0x1df937]=useTransition(),_0x5851eb=useRouter();useEffect(()=>{_0x1df937(async()=>{try{const _0x271c2b=await getLessonCompletionStatusAction(_0x133bf7,_0x4f9671);_0x3ac536(_0x271c2b);}catch(_0x26664){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x26664),_0x3ac536(![]);}});},[_0x133bf7,_0x4f9671]);const _0x36670f=async()=>{try{_0x1b415c(!![]),_0x2c3c3e?await uncompleteLessonAction(_0x133bf7,_0x4f9671):await completeLessonAction(_0x133bf7,_0x4f9671),_0x1df937(async()=>{const _0x15dc95=await getLessonCompletionStatusAction(_0x133bf7,_0x4f9671);_0x3ac536(_0x15dc95);}),_0x5851eb['refresh']();}catch(_0x2d1a6f){console['error']('Error\x20toggling\x20lesson\x20completion:',_0x2d1a6f);}finally{_0x1b415c(![]);}},_0x3cb1b0=_0x2c3c3e===null||_0x4dd817;return a5_0x13844c('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a5_0x392d63('div',{'className':'max-w-4xl mx-auto flex items-center justify-between gap-4','children':[a5_0x392d63('div',{'className':'flex-1','children':[a5_0x13844c('p',{'className':'text-sm font-medium','children':_0x2c3c3e?_0x4d0fe2(0x169):'Ready\x20to\x20complete\x20this\x20lesson?'}),a5_0x13844c('p',{'className':'text-sm text-muted-foreground','children':_0x2c3c3e?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you&apos;re\x20done.'})]}),a5_0x13844c(Button,{'onClick':_0x36670f,'disabled':_0x5c38db||_0x3cb1b0,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x2c3c3e?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x3cb1b0?a5_0x392d63(a5_0x56b4b0,{'children':[a5_0x13844c(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x5c38db?a5_0x392d63(a5_0x56b4b0,{'children':[a5_0x13844c(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x2c3c3e?'Uncompleting...':'Completing...']}):_0x2c3c3e?a5_0x392d63(a5_0x56b4b0,{'children':[a5_0x13844c(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a5_0x392d63(a5_0x56b4b0,{'children':[a5_0x13844c(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
