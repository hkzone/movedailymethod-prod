"use client";

'use client';function a5_0x1223(){const _0x44f2ed=['mZi4quDrBuvk','mJC5uvzcrfHN','mtK0mtK5mJrWt2TyrLq','rxjYB3iGy2HLy2TPBMCGBgvZC29UignVBxbSzxrPB24GC3rHDhvZoG','Ac00ihCTncbTCI0YigfUAw1HDguTC3bPBG','zxjYB3i','BwLUlxCTwZiWmhb4xsb0CMfUC2L0Aw9UlwfSBcbKDxjHDgLVBI0YmdaGzwfZzs1PBI1VDxq','mtuZnJnLu2fSD2W','mteXmJC2oxLLD1jRvG','mtj6tM9Iz2e','Ac00ihCTncbTCI0Y','ndKXntu0y3HYyMXW','zgL2','vxbKyxrPBMCUlI4','mZKXoti4mhnbAMPntW','mvj5tMrlza','Bwf4lxCTnhHSig14lwf1Dg8GzMXLEcbPDgvTCY1Jzw50zxiGANvZDgLMEs1Izxr3zwvUigDHCc00','twfYAYbHCYbdB21WBgv0zq','zgvMyxvSDa','oty1ntiWtuPQCLfm','yMCTz3jLzw4TnJaWigHVDMvYoMjNlwDYzwvUltCWmcb0zxH0lxDOAxrL','vw5JB21WBgv0Aw5NlI4U','ndK2otb6u1LQuLi','mtfXtuPPzw8'];a5_0x1223=function(){return _0x44f2ed;};return a5_0x1223();}(function(_0x1a713f,_0x22fbf5){const _0x593bb6=a5_0x8a42,_0x236890=_0x1a713f();while(!![]){try{const _0x5682a5=-parseInt(_0x593bb6(0x1c1))/0x1*(-parseInt(_0x593bb6(0x1bd))/0x2)+parseInt(_0x593bb6(0x1b9))/0x3*(-parseInt(_0x593bb6(0x1ca))/0x4)+-parseInt(_0x593bb6(0x1c5))/0x5*(parseInt(_0x593bb6(0x1bb))/0x6)+-parseInt(_0x593bb6(0x1ba))/0x7+-parseInt(_0x593bb6(0x1c0))/0x8+parseInt(_0x593bb6(0x1cb))/0x9*(-parseInt(_0x593bb6(0x1c8))/0xa)+-parseInt(_0x593bb6(0x1c9))/0xb*(-parseInt(_0x593bb6(0x1cc))/0xc);if(_0x5682a5===_0x22fbf5)break;else _0x236890['push'](_0x236890['shift']());}catch(_0x5c192d){_0x236890['push'](_0x236890['shift']());}}}(a5_0x1223,0x3e452));import{jsx as a5_0x4cf77b,jsxs as a5_0x3e914a,Fragment as a5_0x21d6a6}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';function a5_0x8a42(_0x40e0ec,_0x2dfbc8){const _0x1223f1=a5_0x1223();return a5_0x8a42=function(_0x8a429e,_0x452531){_0x8a429e=_0x8a429e-0x1b5;let _0x353927=_0x1223f1[_0x8a429e];if(a5_0x8a42['souwBk']===undefined){var _0x586dfe=function(_0x4cf77b){const _0x3e914a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x21d6a6='',_0x10a18f='';for(let _0x564764=0x0,_0x55c359,_0x4682a5,_0x4662bf=0x0;_0x4682a5=_0x4cf77b['charAt'](_0x4662bf++);~_0x4682a5&&(_0x55c359=_0x564764%0x4?_0x55c359*0x40+_0x4682a5:_0x4682a5,_0x564764++%0x4)?_0x21d6a6+=String['fromCharCode'](0xff&_0x55c359>>(-0x2*_0x564764&0x6)):0x0){_0x4682a5=_0x3e914a['indexOf'](_0x4682a5);}for(let _0x17d09d=0x0,_0x4d50c4=_0x21d6a6['length'];_0x17d09d<_0x4d50c4;_0x17d09d++){_0x10a18f+='%'+('00'+_0x21d6a6['charCodeAt'](_0x17d09d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x10a18f);};a5_0x8a42['PGInNK']=_0x586dfe,_0x40e0ec=arguments,a5_0x8a42['souwBk']=!![];}const _0x24b014=_0x1223f1[0x0],_0x426a2a=_0x8a429e+_0x24b014,_0x177049=_0x40e0ec[_0x426a2a];return!_0x177049?(_0x353927=a5_0x8a42['PGInNK'](_0x353927),_0x40e0ec[_0x426a2a]=_0x353927):_0x353927=_0x177049,_0x353927;},a5_0x8a42(_0x40e0ec,_0x2dfbc8);}export function LessonCompleteButton({lessonId:_0x10a18f,clerkId:_0x564764}){const _0x237506=a5_0x8a42,[_0x55c359,_0x4682a5]=useState(![]),[_0x4662bf,_0x17d09d]=useState(null),[_0x4d50c4,_0x4cb6a2]=useTransition(),_0x4c3073=useRouter();useEffect(()=>{_0x4cb6a2(async()=>{const _0x2d403c=a5_0x8a42;try{const _0x492a71=await getLessonCompletionStatusAction(_0x10a18f,_0x564764);_0x17d09d(_0x492a71);}catch(_0xc003ba){console['error'](_0x2d403c(0x1b5),_0xc003ba),_0x17d09d(![]);}});},[_0x10a18f,_0x564764]);const _0xf088b6=async()=>{const _0x54f96d=a5_0x8a42;try{_0x4682a5(!![]),_0x4662bf?await uncompleteLessonAction(_0x10a18f,_0x564764):await completeLessonAction(_0x10a18f,_0x564764),_0x4cb6a2(async()=>{const _0x1866b4=await getLessonCompletionStatusAction(_0x10a18f,_0x564764);_0x17d09d(_0x1866b4);}),_0x4c3073['refresh']();}catch(_0x4455cb){console[_0x54f96d(0x1b7)]('Error\x20toggling\x20lesson\x20completion:',_0x4455cb);}finally{_0x4682a5(![]);}},_0x15b094=_0x4662bf===null||_0x4d50c4;return a5_0x4cf77b(_0x237506(0x1be),{'className':'fixed\x20bottom-0\x20left-0\x20right-0\x20p-4\x20bg-background/80\x20backdrop-blur-sm\x20border-t\x20z-50','children':a5_0x3e914a('div',{'className':_0x237506(0x1c2),'children':[a5_0x3e914a('div',{'className':'flex-1','children':[a5_0x4cf77b('p',{'className':'text-sm\x20font-medium','children':_0x4662bf?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a5_0x4cf77b('p',{'className':'text-sm\x20text-muted-foreground','children':_0x4662bf?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you&apos;re\x20done.'})]}),a5_0x4cf77b(Button,{'onClick':_0xf088b6,'disabled':_0x55c359||_0x15b094,'size':'lg','variant':_0x237506(0x1c4),'className':cn(_0x237506(0x1b8),_0x4662bf?'bg-red-600\x20hover:bg-red-700\x20text-white':_0x237506(0x1c6)),'children':_0x15b094?a5_0x3e914a(a5_0x21d6a6,{'children':[a5_0x4cf77b(Loader2,{'className':_0x237506(0x1b6)}),_0x237506(0x1bf)]}):_0x55c359?a5_0x3e914a(a5_0x21d6a6,{'children':[a5_0x4cf77b(Loader2,{'className':_0x237506(0x1b6)}),_0x4662bf?_0x237506(0x1c7):'Completing...']}):_0x4662bf?a5_0x3e914a(a5_0x21d6a6,{'children':[a5_0x4cf77b(XCircle,{'className':_0x237506(0x1bc)}),'Mark\x20as\x20Not\x20Complete']}):a5_0x3e914a(a5_0x21d6a6,{'children':[a5_0x4cf77b(CheckCircle,{'className':_0x237506(0x1bc)}),_0x237506(0x1c3)]})})]})});}
