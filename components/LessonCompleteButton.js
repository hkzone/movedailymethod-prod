"use client";

'use client';(function(_0x2b8d2a,_0x13ca65){const _0x21c999=a7_0x4576,_0x21e893=_0x2b8d2a();while(!![]){try{const _0x127391=-parseInt(_0x21c999(0x129))/0x1+-parseInt(_0x21c999(0x125))/0x2+-parseInt(_0x21c999(0x121))/0x3+-parseInt(_0x21c999(0x120))/0x4*(parseInt(_0x21c999(0x124))/0x5)+-parseInt(_0x21c999(0x126))/0x6*(-parseInt(_0x21c999(0x12a))/0x7)+-parseInt(_0x21c999(0x128))/0x8+parseInt(_0x21c999(0x123))/0x9*(parseInt(_0x21c999(0x127))/0xa);if(_0x127391===_0x13ca65)break;else _0x21e893['push'](_0x21e893['shift']());}catch(_0x5c6220){_0x21e893['push'](_0x21e893['shift']());}}}(a7_0x5931,0x1dc4e));import{jsx as a7_0x5cd3e7,jsxs as a7_0x44a91b,Fragment as a7_0x5c822a}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';function a7_0x5931(){const _0x506f02=['20909ixDDkt','1372lnfhuY','546660cnDBiB','error','4220649JTbLyM','2345OvsFqi','207954NcDISu','426TSwHAR','10UJFzxb','530768NTqTrb','45694dSnRTe'];a7_0x5931=function(){return _0x506f02;};return a7_0x5931();}import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';function a7_0x4576(_0x28afc8,_0x3e6c81){const _0x593169=a7_0x5931();return a7_0x4576=function(_0x4576f3,_0x162af3){_0x4576f3=_0x4576f3-0x120;let _0x302986=_0x593169[_0x4576f3];return _0x302986;},a7_0x4576(_0x28afc8,_0x3e6c81);}export function LessonCompleteButton({lessonId:_0x3dbd89,clerkId:_0x16f802}){const [_0x5005ba,_0x37474a]=useState(![]),[_0x45e9b0,_0x58e331]=useState(null),[_0x94a505,_0x5debaf]=useTransition(),_0x3f41aa=useRouter();useEffect(()=>{_0x5debaf(async()=>{try{const _0x8ef48=await getLessonCompletionStatusAction(_0x3dbd89,_0x16f802);_0x58e331(_0x8ef48);}catch(_0x2d9cf5){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x2d9cf5),_0x58e331(![]);}});},[_0x3dbd89,_0x16f802]);const _0x250977=async()=>{const _0x4928ec=a7_0x4576;try{_0x37474a(!![]),_0x45e9b0?await uncompleteLessonAction(_0x3dbd89,_0x16f802):await completeLessonAction(_0x3dbd89,_0x16f802),_0x5debaf(async()=>{const _0x54eaf6=await getLessonCompletionStatusAction(_0x3dbd89,_0x16f802);_0x58e331(_0x54eaf6);}),_0x3f41aa['refresh']();}catch(_0x4fc280){console[_0x4928ec(0x122)]('Error\x20toggling\x20lesson\x20completion:',_0x4fc280);}finally{_0x37474a(![]);}},_0x2c22d3=_0x45e9b0===null||_0x94a505;return a7_0x5cd3e7('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a7_0x44a91b('div',{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a7_0x44a91b('div',{'className':'md:flex-1 text-center md:text-left','children':[a7_0x5cd3e7('p',{'className':'text-sm font-medium','children':_0x45e9b0?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a7_0x5cd3e7('p',{'className':'text-sm text-muted-foreground','children':_0x45e9b0?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.'})]}),a7_0x5cd3e7(Button,{'onClick':_0x250977,'disabled':_0x5005ba||_0x2c22d3,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x45e9b0?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x2c22d3?a7_0x44a91b(a7_0x5c822a,{'children':[a7_0x5cd3e7(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x5005ba?a7_0x44a91b(a7_0x5c822a,{'children':[a7_0x5cd3e7(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x45e9b0?'Uncompleting...':'Completing...']}):_0x45e9b0?a7_0x44a91b(a7_0x5c822a,{'children':[a7_0x5cd3e7(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a7_0x44a91b(a7_0x5c822a,{'children':[a7_0x5cd3e7(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
