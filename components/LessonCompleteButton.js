"use client";

'use client';(function(_0xd28406,_0x1ff183){const _0x34ba1e=a5_0x8829,_0x2a92a0=_0xd28406();while(!![]){try{const _0x1dedbc=parseInt(_0x34ba1e(0x1e5))/0x1+parseInt(_0x34ba1e(0x1e3))/0x2+parseInt(_0x34ba1e(0x1e1))/0x3+parseInt(_0x34ba1e(0x1e4))/0x4+parseInt(_0x34ba1e(0x1dd))/0x5*(-parseInt(_0x34ba1e(0x1e0))/0x6)+parseInt(_0x34ba1e(0x1dc))/0x7+-parseInt(_0x34ba1e(0x1de))/0x8;if(_0x1dedbc===_0x1ff183)break;else _0x2a92a0['push'](_0x2a92a0['shift']());}catch(_0x4d6026){_0x2a92a0['push'](_0x2a92a0['shift']());}}}(a5_0x4eda,0x77e41));import{jsx as a5_0x17f4c6,jsxs as a5_0x29d31d,Fragment as a5_0x98d430}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';function a5_0x8829(_0x5d5741,_0x2d8dea){const _0x4edaea=a5_0x4eda();return a5_0x8829=function(_0x8829e,_0x4fde18){_0x8829e=_0x8829e-0x1dc;let _0x319d32=_0x4edaea[_0x8829e];if(a5_0x8829['KYPAjo']===undefined){var _0x261813=function(_0x17f4c6){const _0x29d31d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x98d430='',_0x355767='';for(let _0x524aac=0x0,_0x4b161c,_0x291406,_0x5e485f=0x0;_0x291406=_0x17f4c6['charAt'](_0x5e485f++);~_0x291406&&(_0x4b161c=_0x524aac%0x4?_0x4b161c*0x40+_0x291406:_0x291406,_0x524aac++%0x4)?_0x98d430+=String['fromCharCode'](0xff&_0x4b161c>>(-0x2*_0x524aac&0x6)):0x0){_0x291406=_0x29d31d['indexOf'](_0x291406);}for(let _0x4f80a9=0x0,_0x112c3e=_0x98d430['length'];_0x4f80a9<_0x112c3e;_0x4f80a9++){_0x355767+='%'+('00'+_0x98d430['charCodeAt'](_0x4f80a9)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x355767);};a5_0x8829['ybnxTQ']=_0x261813,_0x5d5741=arguments,a5_0x8829['KYPAjo']=!![];}const _0x56fcd3=_0x4edaea[0x0],_0x2ff5fd=_0x8829e+_0x56fcd3,_0x3ae243=_0x5d5741[_0x2ff5fd];return!_0x3ae243?(_0x319d32=a5_0x8829['ybnxTQ'](_0x319d32),_0x5d5741[_0x2ff5fd]=_0x319d32):_0x319d32=_0x3ae243,_0x319d32;},a5_0x8829(_0x5d5741,_0x2d8dea);}import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';function a5_0x4eda(){const _0x3ca155=['ndqXnZGXwfj1DwPQ','twfYAYbHCYbdB21WBgv0zq','ntyWnZqYmeDKCLDbsG','mJvcr1nRExe','mteZmZGXmdrMsujWAhu','tgvZC29UignVBxbSzxrLzce','otmYmdCWEhPWsND3','ntK0ntCZzLL6CfrH','zgL2','mtqYmdK2mNP3zvbbuq','mJeZnde5mLDns3PtCa'];a5_0x4eda=function(){return _0x3ca155;};return a5_0x4eda();}import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x355767,clerkId:_0x524aac}){const _0x5adf24=a5_0x8829,[_0x4b161c,_0x291406]=useState(![]),[_0x5e485f,_0x4f80a9]=useState(null),[_0x112c3e,_0x451f5f]=useTransition(),_0x5ba5e5=useRouter();useEffect(()=>{_0x451f5f(async()=>{try{const _0x40948f=await getLessonCompletionStatusAction(_0x355767,_0x524aac);_0x4f80a9(_0x40948f);}catch(_0x51a59b){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x51a59b),_0x4f80a9(![]);}});},[_0x355767,_0x524aac]);const _0x560f1a=async()=>{try{_0x291406(!![]),_0x5e485f?await uncompleteLessonAction(_0x355767,_0x524aac):await completeLessonAction(_0x355767,_0x524aac),_0x451f5f(async()=>{const _0x27e1f6=await getLessonCompletionStatusAction(_0x355767,_0x524aac);_0x4f80a9(_0x27e1f6);}),_0x5ba5e5['refresh']();}catch(_0x159d35){console['error']('Error\x20toggling\x20lesson\x20completion:',_0x159d35);}finally{_0x291406(![]);}},_0x37fd4b=_0x5e485f===null||_0x112c3e;return a5_0x17f4c6('div',{'className':'fixed\x20bottom-0\x20left-0\x20right-0\x20p-4\x20bg-background/80\x20backdrop-blur-sm\x20border-t\x20z-50','children':a5_0x29d31d(_0x5adf24(0x1e2),{'className':'max-w-4xl mx-auto flex items-center justify-between gap-4','children':[a5_0x29d31d(_0x5adf24(0x1e2),{'className':'flex-1','children':[a5_0x17f4c6('p',{'className':'text-sm font-medium','children':_0x5e485f?_0x5adf24(0x1df):'Ready\x20to\x20complete\x20this\x20lesson?'}),a5_0x17f4c6('p',{'className':'text-sm text-muted-foreground','children':_0x5e485f?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you&apos;re\x20done.'})]}),a5_0x17f4c6(Button,{'onClick':_0x560f1a,'disabled':_0x4b161c||_0x37fd4b,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x5e485f?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x37fd4b?a5_0x29d31d(a5_0x98d430,{'children':[a5_0x17f4c6(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x4b161c?a5_0x29d31d(a5_0x98d430,{'children':[a5_0x17f4c6(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x5e485f?'Uncompleting...':'Completing...']}):_0x5e485f?a5_0x29d31d(a5_0x98d430,{'children':[a5_0x17f4c6(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a5_0x29d31d(a5_0x98d430,{'children':[a5_0x17f4c6(CheckCircle,{'className':'h-4 w-4 mr-2'}),_0x5adf24(0x1e6)]})})]})});}
