"use client";

'use client';function a6_0x2605(_0x36eca6,_0x26f5a9){const _0x143195=a6_0x1431();return a6_0x2605=function(_0x26055b,_0x3054c5){_0x26055b=_0x26055b-0x109;let _0x33d686=_0x143195[_0x26055b];return _0x33d686;},a6_0x2605(_0x36eca6,_0x26f5a9);}(function(_0x3cd14c,_0x4cc402){const _0x1272fb=a6_0x2605,_0x45d7bf=_0x3cd14c();while(!![]){try{const _0x1b8d53=-parseInt(_0x1272fb(0x112))/0x1+parseInt(_0x1272fb(0x10a))/0x2*(parseInt(_0x1272fb(0x10d))/0x3)+-parseInt(_0x1272fb(0x10c))/0x4+parseInt(_0x1272fb(0x10e))/0x5*(parseInt(_0x1272fb(0x111))/0x6)+parseInt(_0x1272fb(0x10f))/0x7+-parseInt(_0x1272fb(0x109))/0x8+parseInt(_0x1272fb(0x114))/0x9*(-parseInt(_0x1272fb(0x10b))/0xa);if(_0x1b8d53===_0x4cc402)break;else _0x45d7bf['push'](_0x45d7bf['shift']());}catch(_0x4dcf16){_0x45d7bf['push'](_0x45d7bf['shift']());}}}(a6_0x1431,0xd13e2));import{jsx as a6_0x5590de,jsxs as a6_0x48767d,Fragment as a6_0x321b70}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';function a6_0x1431(){const _0x109aad=['refresh','18RBpMyN','455221sKScgc','Error\x20toggling\x20lesson\x20completion:','9vvFPUS','12952168LbFRzT','165444XarkZH','3306280bZgcjj','1655280cVxHZL','54zbtebz','2642690VTYqCV','4207966gUOWfP'];a6_0x1431=function(){return _0x109aad;};return a6_0x1431();}import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x70253d,clerkId:_0x1fe1d3}){const [_0x5a2b47,_0x2a1700]=useState(![]),[_0x1155cd,_0x54a53d]=useState(null),[_0x31ca5c,_0x16f241]=useTransition(),_0x3f1c65=useRouter();useEffect(()=>{_0x16f241(async()=>{try{const _0xc5745f=await getLessonCompletionStatusAction(_0x70253d,_0x1fe1d3);_0x54a53d(_0xc5745f);}catch(_0x3a4cda){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x3a4cda),_0x54a53d(![]);}});},[_0x70253d,_0x1fe1d3]);const _0x575bcc=async()=>{const _0x32268a=a6_0x2605;try{_0x2a1700(!![]),_0x1155cd?await uncompleteLessonAction(_0x70253d,_0x1fe1d3):await completeLessonAction(_0x70253d,_0x1fe1d3),_0x16f241(async()=>{const _0x35f761=await getLessonCompletionStatusAction(_0x70253d,_0x1fe1d3);_0x54a53d(_0x35f761);}),_0x3f1c65[_0x32268a(0x110)]();}catch(_0x29ac2e){console['error'](_0x32268a(0x113),_0x29ac2e);}finally{_0x2a1700(![]);}},_0x474719=_0x1155cd===null||_0x31ca5c;return a6_0x5590de('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a6_0x48767d('div',{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a6_0x48767d('div',{'className':'md:flex-1 text-center md:text-left','children':[a6_0x5590de('p',{'className':'text-sm font-medium','children':_0x1155cd?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a6_0x5590de('p',{'className':'text-sm text-muted-foreground','children':_0x1155cd?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.'})]}),a6_0x5590de(Button,{'onClick':_0x575bcc,'disabled':_0x5a2b47||_0x474719,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x1155cd?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x474719?a6_0x48767d(a6_0x321b70,{'children':[a6_0x5590de(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x5a2b47?a6_0x48767d(a6_0x321b70,{'children':[a6_0x5590de(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x1155cd?'Uncompleting...':'Completing...']}):_0x1155cd?a6_0x48767d(a6_0x321b70,{'children':[a6_0x5590de(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a6_0x48767d(a6_0x321b70,{'children':[a6_0x5590de(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
