"use client";

'use client';(function(_0x589d5c,_0xef4c2){const _0x55247d=a8_0x211c,_0x5dde14=_0x589d5c();while(!![]){try{const _0x4ab176=-parseInt(_0x55247d(0x18f))/0x1+-parseInt(_0x55247d(0x192))/0x2*(parseInt(_0x55247d(0x197))/0x3)+parseInt(_0x55247d(0x19d))/0x4*(parseInt(_0x55247d(0x19a))/0x5)+-parseInt(_0x55247d(0x196))/0x6*(-parseInt(_0x55247d(0x190))/0x7)+-parseInt(_0x55247d(0x191))/0x8*(parseInt(_0x55247d(0x19c))/0x9)+parseInt(_0x55247d(0x198))/0xa+parseInt(_0x55247d(0x193))/0xb;if(_0x4ab176===_0xef4c2)break;else _0x5dde14['push'](_0x5dde14['shift']());}catch(_0xbc5d0){_0x5dde14['push'](_0x5dde14['shift']());}}}(a8_0x10eb,0x734c9));import{jsx as a8_0x3e2d12,jsxs as a8_0x298019,Fragment as a8_0x33b2b9}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';function a8_0x10eb(){const _0x22ff6d=['114tsHKFo','3EMYsBO','7132070BcxFPx','Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.','135xtenbI','error','45lMvJUK','108792gxBYfk','689878bBoOXZ','116053bUvRWj','795032EYtgXh','1741496LYffXt','8439552gGpsdB','You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.','Error\x20checking\x20lesson\x20completion\x20status:'];a8_0x10eb=function(){return _0x22ff6d;};return a8_0x10eb();}import{Button}from'./ui/button';function a8_0x211c(_0x72542e,_0x581e78){const _0x10eb15=a8_0x10eb();return a8_0x211c=function(_0x211c12,_0x4a2acb){_0x211c12=_0x211c12-0x18f;let _0x1f8958=_0x10eb15[_0x211c12];return _0x1f8958;},a8_0x211c(_0x72542e,_0x581e78);}import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x438821,clerkId:_0x3d0535}){const _0x571d8c=a8_0x211c,[_0xa17714,_0x4b165f]=useState(![]),[_0xeea1f,_0x3da015]=useState(null),[_0x305f81,_0x48dcd8]=useTransition(),_0x45c715=useRouter();useEffect(()=>{_0x48dcd8(async()=>{const _0x46e451=a8_0x211c;try{const _0x4538ed=await getLessonCompletionStatusAction(_0x438821,_0x3d0535);_0x3da015(_0x4538ed);}catch(_0x360ec8){console['error'](_0x46e451(0x195),_0x360ec8),_0x3da015(![]);}});},[_0x438821,_0x3d0535]);const _0x14f763=async()=>{const _0x530f2c=a8_0x211c;try{_0x4b165f(!![]),_0xeea1f?await uncompleteLessonAction(_0x438821,_0x3d0535):await completeLessonAction(_0x438821,_0x3d0535),_0x48dcd8(async()=>{const _0x36954d=await getLessonCompletionStatusAction(_0x438821,_0x3d0535);_0x3da015(_0x36954d);}),_0x45c715['refresh']();}catch(_0x5ecd57){console[_0x530f2c(0x19b)]('Error\x20toggling\x20lesson\x20completion:',_0x5ecd57);}finally{_0x4b165f(![]);}},_0x25866b=_0xeea1f===null||_0x305f81;return a8_0x3e2d12('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a8_0x298019('div',{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a8_0x298019('div',{'className':'md:flex-1 text-center md:text-left','children':[a8_0x3e2d12('p',{'className':'text-sm font-medium','children':_0xeea1f?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a8_0x3e2d12('p',{'className':'text-sm text-muted-foreground','children':_0xeea1f?_0x571d8c(0x194):_0x571d8c(0x199)})]}),a8_0x3e2d12(Button,{'onClick':_0x14f763,'disabled':_0xa17714||_0x25866b,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0xeea1f?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x25866b?a8_0x298019(a8_0x33b2b9,{'children':[a8_0x3e2d12(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0xa17714?a8_0x298019(a8_0x33b2b9,{'children':[a8_0x3e2d12(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0xeea1f?'Uncompleting...':'Completing...']}):_0xeea1f?a8_0x298019(a8_0x33b2b9,{'children':[a8_0x3e2d12(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a8_0x298019(a8_0x33b2b9,{'children':[a8_0x3e2d12(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
