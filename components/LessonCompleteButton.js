"use client";

'use client';(function(_0x30b39d,_0x55ad19){const _0x11cd3e=a5_0x1b74,_0x46badd=_0x30b39d();while(!![]){try{const _0x5de356=-parseInt(_0x11cd3e(0x1f9))/0x1+parseInt(_0x11cd3e(0x1f3))/0x2+-parseInt(_0x11cd3e(0x1fb))/0x3*(parseInt(_0x11cd3e(0x1f8))/0x4)+-parseInt(_0x11cd3e(0x1f2))/0x5*(parseInt(_0x11cd3e(0x1f6))/0x6)+-parseInt(_0x11cd3e(0x1f7))/0x7*(parseInt(_0x11cd3e(0x1fc))/0x8)+parseInt(_0x11cd3e(0x1fa))/0x9+parseInt(_0x11cd3e(0x1fd))/0xa;if(_0x5de356===_0x55ad19)break;else _0x46badd['push'](_0x46badd['shift']());}catch(_0x5d9e71){_0x46badd['push'](_0x46badd['shift']());}}}(a5_0x132d,0xcb8a1));import{jsx as a5_0x5995b7,jsxs as a5_0x5563a4,Fragment as a5_0x4b2cc7}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';function a5_0x1b74(_0x52a73e,_0x4814b3){const _0x132dc3=a5_0x132d();return a5_0x1b74=function(_0x1b745d,_0x41affc){_0x1b745d=_0x1b745d-0x1f2;let _0x3e44d7=_0x132dc3[_0x1b745d];return _0x3e44d7;},a5_0x1b74(_0x52a73e,_0x4814b3);}import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x28f114,clerkId:_0x4b2883}){const _0x2cb5f8=a5_0x1b74,[_0x1736b2,_0x411fd6]=useState(![]),[_0x43e70a,_0x167862]=useState(null),[_0x566eb5,_0x1cf17c]=useTransition(),_0x3b26ac=useRouter();useEffect(()=>{_0x1cf17c(async()=>{try{const _0x25fb18=await getLessonCompletionStatusAction(_0x28f114,_0x4b2883);_0x167862(_0x25fb18);}catch(_0x466d3f){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x466d3f),_0x167862(![]);}});},[_0x28f114,_0x4b2883]);const _0xb2cb9d=async()=>{try{_0x411fd6(!![]),_0x43e70a?await uncompleteLessonAction(_0x28f114,_0x4b2883):await completeLessonAction(_0x28f114,_0x4b2883),_0x1cf17c(async()=>{const _0x5caecc=await getLessonCompletionStatusAction(_0x28f114,_0x4b2883);_0x167862(_0x5caecc);}),_0x3b26ac['refresh']();}catch(_0xda5db4){console['error']('Error\x20toggling\x20lesson\x20completion:',_0xda5db4);}finally{_0x411fd6(![]);}},_0x308a3e=_0x43e70a===null||_0x566eb5;return a5_0x5995b7('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a5_0x5563a4(_0x2cb5f8(0x1f5),{'className':'max-w-4xl mx-auto flex items-center justify-between gap-4','children':[a5_0x5563a4(_0x2cb5f8(0x1f5),{'className':'flex-1','children':[a5_0x5995b7('p',{'className':'text-sm font-medium','children':_0x43e70a?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a5_0x5995b7('p',{'className':'text-sm text-muted-foreground','children':_0x43e70a?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you&apos;re\x20done.'})]}),a5_0x5995b7(Button,{'onClick':_0xb2cb9d,'disabled':_0x1736b2||_0x308a3e,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x43e70a?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x308a3e?a5_0x5563a4(a5_0x4b2cc7,{'children':[a5_0x5995b7(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x1736b2?a5_0x5563a4(a5_0x4b2cc7,{'children':[a5_0x5995b7(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x43e70a?'Uncompleting...':_0x2cb5f8(0x1f4)]}):_0x43e70a?a5_0x5563a4(a5_0x4b2cc7,{'children':[a5_0x5995b7(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a5_0x5563a4(a5_0x4b2cc7,{'children':[a5_0x5995b7(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}function a5_0x132d(){const _0x3c09f1=['77832tljFPo','27255030GkoPje','2345UNnEgT','2314716KkNrBd','Completing...','div','20154hOfSWH','616GGDkjL','838384hqnzJb','995111bTvQMd','10942686UCkIwX','12TtlQDW'];a5_0x132d=function(){return _0x3c09f1;};return a5_0x132d();}
