"use client";

'use client';(function(_0x1385f9,_0x2c250f){const _0x1a2415=a8_0x4b26,_0x3cff09=_0x1385f9();while(!![]){try{const _0x472491=parseInt(_0x1a2415(0xb0))/0x1*(parseInt(_0x1a2415(0xaf))/0x2)+-parseInt(_0x1a2415(0xb2))/0x3*(-parseInt(_0x1a2415(0xb1))/0x4)+parseInt(_0x1a2415(0xa8))/0x5*(parseInt(_0x1a2415(0xac))/0x6)+-parseInt(_0x1a2415(0xaa))/0x7*(-parseInt(_0x1a2415(0xab))/0x8)+-parseInt(_0x1a2415(0xa7))/0x9+-parseInt(_0x1a2415(0xa9))/0xa+-parseInt(_0x1a2415(0xae))/0xb;if(_0x472491===_0x2c250f)break;else _0x3cff09['push'](_0x3cff09['shift']());}catch(_0x50d382){_0x3cff09['push'](_0x3cff09['shift']());}}}(a8_0x23c1,0x1ce61));import{jsx as a8_0x4dd72c,jsxs as a8_0x471e80,Fragment as a8_0x4b48c7}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';function a8_0x4b26(_0x30b690,_0x3a88d0){const _0x23c1c7=a8_0x23c1();return a8_0x4b26=function(_0x4b263e,_0x224d04){_0x4b263e=_0x4b263e-0xa7;let _0x8ee983=_0x23c1c7[_0x4b263e];return _0x8ee983;},a8_0x4b26(_0x30b690,_0x3a88d0);}import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';function a8_0x23c1(){const _0x479318=['44620qdxgpy','21cLmyfu','1928187fQiuAB','346310VFadjc','2069280mKoVyY','7dMzIzY','1523504nzfIgu','12VORXfZ','Mark\x20as\x20Not\x20Complete','184525fpWlxT','74634ZDOuFW','4gQnvtd'];a8_0x23c1=function(){return _0x479318;};return a8_0x23c1();}import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x2337b0,clerkId:_0x11aa39}){const _0x5b0584=a8_0x4b26,[_0x2d0f5e,_0x4763c6]=useState(![]),[_0x2494a5,_0x1b7e1d]=useState(null),[_0x1c19c7,_0x1384f7]=useTransition(),_0x425d5a=useRouter();useEffect(()=>{_0x1384f7(async()=>{try{const _0x36ba1e=await getLessonCompletionStatusAction(_0x2337b0,_0x11aa39);_0x1b7e1d(_0x36ba1e);}catch(_0xfe25a7){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0xfe25a7),_0x1b7e1d(![]);}});},[_0x2337b0,_0x11aa39]);const _0x42c420=async()=>{try{_0x4763c6(!![]),_0x2494a5?await uncompleteLessonAction(_0x2337b0,_0x11aa39):await completeLessonAction(_0x2337b0,_0x11aa39),_0x1384f7(async()=>{const _0xbdc0d9=await getLessonCompletionStatusAction(_0x2337b0,_0x11aa39);_0x1b7e1d(_0xbdc0d9);}),_0x425d5a['refresh']();}catch(_0xe58ffb){console['error']('Error\x20toggling\x20lesson\x20completion:',_0xe58ffb);}finally{_0x4763c6(![]);}},_0x33a6e1=_0x2494a5===null||_0x1c19c7;return a8_0x4dd72c('div',{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a8_0x471e80('div',{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a8_0x471e80('div',{'className':'md:flex-1 text-center md:text-left','children':[a8_0x4dd72c('p',{'className':'text-sm font-medium','children':_0x2494a5?'Lesson\x20completed!':'Ready\x20to\x20complete\x20this\x20lesson?'}),a8_0x4dd72c('p',{'className':'text-sm text-muted-foreground','children':_0x2494a5?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.'})]}),a8_0x4dd72c(Button,{'onClick':_0x42c420,'disabled':_0x2d0f5e||_0x33a6e1,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0x2494a5?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0x33a6e1?a8_0x471e80(a8_0x4b48c7,{'children':[a8_0x4dd72c(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x2d0f5e?a8_0x471e80(a8_0x4b48c7,{'children':[a8_0x4dd72c(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0x2494a5?'Uncompleting...':'Completing...']}):_0x2494a5?a8_0x471e80(a8_0x4b48c7,{'children':[a8_0x4dd72c(XCircle,{'className':'h-4 w-4 mr-2'}),_0x5b0584(0xad)]}):a8_0x471e80(a8_0x4b48c7,{'children':[a8_0x4dd72c(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
