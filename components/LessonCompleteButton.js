"use client";

'use client';function a8_0x1983(){const _0x2ec80a=['div','5tBcZgi','1576437DqKZSz','369156QQHFQF','Ready\x20to\x20complete\x20this\x20lesson?','486739QqzaiN','23512280uaRQze','3159930GLFCYs','Error\x20toggling\x20lesson\x20completion:','5143278cpsuIG','234298jOzXvT'];a8_0x1983=function(){return _0x2ec80a;};return a8_0x1983();}function a8_0x42c5(_0x2d2c4c,_0x4ba801){const _0x19838d=a8_0x1983();return a8_0x42c5=function(_0x42c505,_0x4f7f70){_0x42c505=_0x42c505-0x139;let _0x1a38d2=_0x19838d[_0x42c505];return _0x1a38d2;},a8_0x42c5(_0x2d2c4c,_0x4ba801);}(function(_0x177f08,_0x3b44b6){const _0x18a383=a8_0x42c5,_0x37cf75=_0x177f08();while(!![]){try{const _0x412fee=-parseInt(_0x18a383(0x13e))/0x1+-parseInt(_0x18a383(0x143))/0x2+-parseInt(_0x18a383(0x13b))/0x3+-parseInt(_0x18a383(0x13c))/0x4+parseInt(_0x18a383(0x13a))/0x5*(-parseInt(_0x18a383(0x140))/0x6)+-parseInt(_0x18a383(0x142))/0x7+parseInt(_0x18a383(0x13f))/0x8;if(_0x412fee===_0x3b44b6)break;else _0x37cf75['push'](_0x37cf75['shift']());}catch(_0x1bc20a){_0x37cf75['push'](_0x37cf75['shift']());}}}(a8_0x1983,0x6f522));import{jsx as a8_0x41cced,jsxs as a8_0x272391,Fragment as a8_0x259725}from'react/jsx-runtime';import{CheckCircle,Loader2,XCircle}from'lucide-react';import{Button}from'./ui/button';import{useState,useEffect,useTransition}from'react';import{useRouter}from'next/navigation';import{completeLessonAction}from'@/app/actions/completeLessonAction';import{uncompleteLessonAction}from'@/app/actions/uncompleteLessonAction';import{getLessonCompletionStatusAction}from'@/app/actions/getLessonCompletionStatusAction';import{cn}from'@/lib/utils';export function LessonCompleteButton({lessonId:_0x1e29ac,clerkId:_0x51caf5}){const _0xce429e=a8_0x42c5,[_0x440b10,_0x3bcf68]=useState(![]),[_0xa35bd7,_0x3e43ff]=useState(null),[_0x304c6c,_0x487087]=useTransition(),_0xe64d47=useRouter();useEffect(()=>{_0x487087(async()=>{try{const _0x1f40a8=await getLessonCompletionStatusAction(_0x1e29ac,_0x51caf5);_0x3e43ff(_0x1f40a8);}catch(_0x79d3b2){console['error']('Error\x20checking\x20lesson\x20completion\x20status:',_0x79d3b2),_0x3e43ff(![]);}});},[_0x1e29ac,_0x51caf5]);const _0xd8fff6=async()=>{const _0x5ecc26=a8_0x42c5;try{_0x3bcf68(!![]),_0xa35bd7?await uncompleteLessonAction(_0x1e29ac,_0x51caf5):await completeLessonAction(_0x1e29ac,_0x51caf5),_0x487087(async()=>{const _0x369a5a=await getLessonCompletionStatusAction(_0x1e29ac,_0x51caf5);_0x3e43ff(_0x369a5a);}),_0xe64d47['refresh']();}catch(_0x2823e7){console['error'](_0x5ecc26(0x141),_0x2823e7);}finally{_0x3bcf68(![]);}},_0xdf19af=_0xa35bd7===null||_0x304c6c;return a8_0x41cced(_0xce429e(0x139),{'className':'fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t z-50','children':a8_0x272391(_0xce429e(0x139),{'className':'max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4','children':[a8_0x272391('div',{'className':'md:flex-1 text-center md:text-left','children':[a8_0x41cced('p',{'className':'text-sm font-medium','children':_0xa35bd7?'Lesson\x20completed!':_0xce429e(0x13d)}),a8_0x41cced('p',{'className':'text-sm text-muted-foreground','children':_0xa35bd7?'You\x20can\x20mark\x20it\x20as\x20incomplete\x20if\x20you\x20need\x20to\x20revisit\x20it.':'Mark\x20it\x20as\x20complete\x20when\x20you\x27re\x20done.'})]}),a8_0x41cced(Button,{'onClick':_0xd8fff6,'disabled':_0x440b10||_0xdf19af,'size':'lg','variant':'default','className':cn('min-w-[200px] transition-all duration-200 ease-in-out',_0xa35bd7?'bg-red-600 hover:bg-red-700 text-white':'bg-green-600 hover:bg-green-700 text-white'),'children':_0xdf19af?a8_0x272391(a8_0x259725,{'children':[a8_0x41cced(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),'Updating...']}):_0x440b10?a8_0x272391(a8_0x259725,{'children':[a8_0x41cced(Loader2,{'className':'h-4 w-4 mr-2 animate-spin'}),_0xa35bd7?'Uncompleting...':'Completing...']}):_0xa35bd7?a8_0x272391(a8_0x259725,{'children':[a8_0x41cced(XCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Not\x20Complete']}):a8_0x272391(a8_0x259725,{'children':[a8_0x41cced(CheckCircle,{'className':'h-4 w-4 mr-2'}),'Mark\x20as\x20Complete']})})]})});}
