"use client";

'use client';(function(_0xfc89b7,_0x1ad86a){const _0x4fcb65=a9_0x5ae0,_0x4d0f96=_0xfc89b7();while(!![]){try{const _0x27af60=parseInt(_0x4fcb65(0x96))/0x1+parseInt(_0x4fcb65(0x7f))/0x2*(-parseInt(_0x4fcb65(0x8a))/0x3)+parseInt(_0x4fcb65(0x93))/0x4*(parseInt(_0x4fcb65(0x7b))/0x5)+parseInt(_0x4fcb65(0x8e))/0x6*(-parseInt(_0x4fcb65(0x90))/0x7)+-parseInt(_0x4fcb65(0x7e))/0x8+-parseInt(_0x4fcb65(0x8d))/0x9+-parseInt(_0x4fcb65(0x91))/0xa*(-parseInt(_0x4fcb65(0x88))/0xb);if(_0x27af60===_0x1ad86a)break;else _0x4d0f96['push'](_0x4d0f96['shift']());}catch(_0x125e0b){_0x4d0f96['push'](_0x4d0f96['shift']());}}}(a9_0x569f,0x90de7));function a9_0x569f(){const _0x8ea919=['status','text-2xl\x20font-bold\x20mb-4\x20','.\x20This\x20usually\x20takes\x20a\x20few\x20moments.','onerror','mailto:support@movedailymethod.com','div','message','â€¢\x20Payment\x20confirmed\x20and\x20processed','13532134nbyqCK','currentColor','3SLuRPR','M18\x2010a8\x208\x200\x2011-16\x200\x208\x208\x200\x200116\x200zm-7-4a1\x201\x200\x2011-2\x200\x201\x201\x200\x20012\x200zM9\x209a1\x201\x200\x20000\x202v3a1\x201\x200\x20001\x201h1a1\x201\x200\x20100-2v-3a1\x201\x200\x2000-1-1H9z','processing','5380029WnVacw','86382STxsLG','Processing\x20Your\x20Payment','476qHeILC','20QmCEwV','connected','535716hmGQqa','floor','none','782551AQLWdu','10hmLMDK','Time\x20elapsed:\x20','path','1552256muiTzJ','2293210vGacVS'];a9_0x569f=function(){return _0x8ea919;};return a9_0x569f();}import{jsx as a9_0x38e83d,jsxs as a9_0x3bd80f,Fragment as a9_0x3943e4}from'react/jsx-runtime';import{Suspense}from'react';import{Loader}from'@/components/ui/loader';import{useSearchParams,useRouter}from'next/navigation';import{useEffect,useState}from'react';import a9_0x43f7da from'next/link';function a9_0x5ae0(_0x2d9cec,_0x42241a){const _0x569f61=a9_0x569f();return a9_0x5ae0=function(_0x5ae00f,_0x42f020){_0x5ae00f=_0x5ae00f-0x7b;let _0x21a4ec=_0x569f61[_0x5ae00f];return _0x21a4ec;},a9_0x5ae0(_0x2d9cec,_0x42241a);}import{checkPaymentStatus}from'@/app/actions/checkPaymentStatus';import{CircleCheck}from'lucide-react';import{Button}from'@/components/ui/button';function ProcessingContent(){const _0xa346de=a9_0x5ae0,_0x15533d=useSearchParams(),_0x30d067=useRouter(),[_0x32e015,_0x1a6bcf]=useState('processing'),[_0x5635d6,_0x590503]=useState(0x0),[_0x3216e8,_0x4d6c9d]=useState(''),_0x1763ce=_0x15533d['get']('provider')?.['toLowerCase']()||'unknown',_0x4eee38=_0x1763ce['charAt'](0x0)['toUpperCase']()+_0x1763ce['slice'](0x1),_0x508986=_0x15533d['get']('order');useEffect(()=>{const _0x430483=async()=>{if(!_0x508986){_0x1a6bcf('error'),_0x4d6c9d('No\x20order\x20reference\x20provided');return;}try{const _0x1e5b26=await checkPaymentStatus(_0x508986);if(_0x1e5b26['status']==='completed'){_0x1a6bcf('success'),_0x4d6c9d(_0x1e5b26?.['message']||''),setTimeout(()=>{_0x30d067['push']('/my-courses');},0x1388);return;}else{if(_0x1e5b26['status']==='error'){_0x1a6bcf('failed'),_0x4d6c9d(_0x1e5b26?.['message']||'');return;}else _0x1a6bcf('processing'),_0x4d6c9d(_0x1e5b26['message']||'');}}catch(_0x356513){console['error']('Error\x20checking\x20initial\x20payment\x20status:',_0x356513),_0x1a6bcf('processing');}};_0x430483();},[_0x508986,_0x30d067]),useEffect(()=>{const _0x5d08a2=a9_0x5ae0;if(_0x32e015!=='processing')return;const _0x4e5ab7=setInterval(()=>{_0x590503(_0x26ba74=>_0x26ba74+0x1);},0x3e8),_0x3f17fc=setInterval(async()=>{const _0x2c7289=a9_0x5ae0;if(_0x508986&&_0x32e015===_0x2c7289(0x8c))try{const _0x2121ac=await checkPaymentStatus(_0x508986);_0x2121ac[_0x2c7289(0x80)]==='completed'&&(_0x1a6bcf('success'),_0x4d6c9d(_0x2121ac['message']||''),setTimeout(()=>{_0x30d067['push']('/my-courses');},0x1388));}catch(_0x4ad277){console['error']('Error\x20in\x20periodic\x20status\x20check:',_0x4ad277);}},0x7530);let _0x351582=null;if(_0x508986){console['log']('ðŸ”—\x20Establishing\x20SSE\x20connection\x20with\x20sessionId:',_0x508986);const _0x3bb89a='/api/payment-events?sessionId='+encodeURIComponent(_0x508986);console['log']('ðŸŒ\x20SSE\x20URL:',_0x3bb89a),_0x351582=new EventSource(_0x3bb89a),_0x351582['onopen']=()=>{console['log']('âœ…\x20SSE\x20connection\x20opened\x20successfully');},_0x351582['onmessage']=_0x170c3b=>{const _0x5002e0=a9_0x5ae0;try{const _0x4cf841=JSON['parse'](_0x170c3b['data']);console['log']('ðŸ“¨\x20Received\x20payment\x20update:',_0x4cf841);switch(_0x4cf841['type']){case _0x5002e0(0x92):console['log']('Connected\x20to\x20payment\x20updates');break;case'payment_approved':_0x1a6bcf('success'),_0x4d6c9d(_0x4cf841['message']),setTimeout(()=>{_0x30d067['push']('/my-courses');},0x1388);break;case'payment_failed':_0x1a6bcf('failed'),_0x4d6c9d(_0x4cf841['message']),setTimeout(()=>{_0x30d067['push'](_0x4cf841['redirectUrl']);},0xbb8);break;case'payment_pending':_0x4d6c9d(_0x4cf841['message']);break;}}catch(_0x3d3b78){console['error']('Error\x20parsing\x20SSE\x20data:',_0x3d3b78);}},_0x351582[_0x5d08a2(0x83)]=_0x3ab5b5=>{console['error']('âŒ\x20SSE\x20connection\x20error:',_0x3ab5b5),console['log']('ðŸ“Š\x20SSE\x20readyState:',_0x351582?.['readyState']),_0x1a6bcf('still-processing');};}const _0x7d7882=[setTimeout(()=>{_0x32e015==='processing'&&_0x1a6bcf('still-processing');},0xea60),setTimeout(()=>{(_0x32e015==='processing'||_0x32e015==='still-processing')&&_0x1a6bcf('check-email');},0x2bf20)];return()=>{clearInterval(_0x4e5ab7),clearInterval(_0x3f17fc),_0x7d7882['forEach'](_0x12fdc1=>clearTimeout(_0x12fdc1)),_0x351582&&_0x351582['close']();};},[_0x32e015,_0x508986,_0x30d067]);const _0x5e6864=()=>{const _0x40a32f=a9_0x5ae0;switch(_0x32e015){case'success':return{'title':'Payment\x20Confirmed!\x20','message':_0x3216e8||'Your\x20payment\x20has\x20been\x20approved!\x20Redirecting...','color':'text-success','bgColor':'bg-success/10','borderColor':'border-success/20'};case'failed':return{'title':'Payment\x20Failed\x20','message':_0x3216e8||'Your\x20payment\x20could\x20not\x20be\x20processed.','color':'text-destructive','bgColor':'bg-destructive/10','borderColor':'border-destructive/20'};case'still-processing':return{'title':'Still\x20Processing...','message':_0x3216e8||'Your\x20'+_0x4eee38+'\x20payment\x20is\x20taking\x20a\x20bit\x20longer\x20than\x20usual.\x20This\x20is\x20normal\x20for\x20some\x20payments.','color':'text-warning','bgColor':'bg-warning/10','borderColor':'border-warning/20'};case'check-email':return{'title':'Check\x20Your\x20Email','message':'Your\x20payment\x20confirmation\x20will\x20be\x20sent\x20via\x20email.\x20You\x20can\x20also\x20check\x20your\x20course\x20access\x20in\x20\x22My\x20Courses\x22.','color':'text-success','bgColor':'bg-success/10','borderColor':'border-success/20'};default:return{'title':_0x40a32f(0x8f),'message':_0x3216e8||'We\x27re\x20confirming\x20your\x20payment\x20with\x20'+_0x4eee38+_0x40a32f(0x82),'color':'text-info','bgColor':'bg-info/10','borderColor':'border-info/20'};}},_0x1fd30b=_0x5e6864();return a9_0x38e83d('div',{'className':'min-h-screen flex items-center justify-center px-[5%]','children':a9_0x38e83d('div',{'className':'container','children':a9_0x3bd80f(_0xa346de(0x85),{'className':'max-w-md w-full mx-auto p-8 bg-card text-card-foreground rounded-xl border border-border shadow-lg text-center','children':[a9_0x38e83d('div',{'className':'mb-6','children':_0x32e015==='success'?a9_0x38e83d(CircleCheck,{'className':'w-16 h-16 mx-auto text-success'}):a9_0x38e83d(Loader,{'className':'w-16 h-16 mx-auto border-t-primary'})}),a9_0x38e83d('h1',{'className':_0xa346de(0x81)+_0x1fd30b['color'],'children':_0x1fd30b['title']}),a9_0x38e83d('p',{'className':'mb-6 text-foreground/80','children':_0x1fd30b[_0xa346de(0x86)]}),_0x5635d6>0x0&&_0x32e015==='processing'&&a9_0x3bd80f('p',{'className':'text-sm text-muted-foreground mb-4','children':[_0xa346de(0x7c),Math[_0xa346de(0x94)](_0x5635d6/0x3c),':',(_0x5635d6%0x3c)['toString']()['padStart'](0x2,'0')]}),a9_0x38e83d('div',{'className':(_0x1fd30b['bgColor']||'bg-info/10')+'\x20border\x20'+(_0x1fd30b['borderColor']||'border-info/20')+'\x20rounded-lg\x20p-4\x20mb-6','children':a9_0x3bd80f('div',{'className':'flex items-center','children':[a9_0x38e83d('div',{'className':'flex-shrink-0','children':_0x32e015==='success'?a9_0x38e83d('svg',{'className':'h-5 w-5 text-success','fill':_0xa346de(0x95),'stroke':_0xa346de(0x89),'viewBox':'0\x200\x2024\x2024','children':a9_0x38e83d(_0xa346de(0x7d),{'strokeLinecap':'round','strokeLinejoin':'round','strokeWidth':0x2,'d':'M9\x2012l2\x202\x204-4m6\x202a9\x209\x200\x2011-18\x200\x209\x209\x200\x200118\x200z'})}):a9_0x38e83d('svg',{'className':'h-5 w-5 text-info','viewBox':'0\x200\x2020\x2020','fill':'currentColor','children':a9_0x38e83d('path',{'fillRule':'evenodd','d':_0xa346de(0x8b),'clipRule':'evenodd'})})}),a9_0x38e83d('div',{'className':'ml-3','children':_0x32e015==='success'?a9_0x3bd80f('p',{'className':'text-sm','children':[a9_0x38e83d('strong',{'children':'Payment\x20Confirmed!'}),'\x20You\x20now\x20have\x20access\x20to\x20your\x20purchased\x20content.\x20Check\x20your\x20email\x20for\x20the\x20receipt.']}):a9_0x3bd80f('p',{'className':'text-sm','children':[a9_0x38e83d('strong',{'children':'Processing:'}),'\x20We\x27ll\x20update\x20you\x20automatically\x20when\x20your\x20payment\x20is\x20confirmed.\x20You\x27ll\x20also\x20receive\x20an\x20email\x20confirmation.']})})]})}),a9_0x3bd80f('div',{'className':'space-y-2 text-sm text-muted-foreground','children':[_0x32e015==='processing'&&a9_0x3bd80f(a9_0x3943e4,{'children':[a9_0x38e83d('p',{'children':'â€¢\x20Payment\x20confirmation\x20usually\x20takes\x2030-60\x20seconds'}),a9_0x38e83d('p',{'children':'â€¢\x20You\x27ll\x20receive\x20an\x20email\x20confirmation'}),a9_0x38e83d('p',{'children':'â€¢\x20Please\x20keep\x20this\x20page\x20open'})]}),_0x32e015==='still-processing'&&a9_0x3bd80f(a9_0x3943e4,{'children':[a9_0x38e83d('p',{'children':'â€¢\x20Some\x20payments\x20take\x20up\x20to\x203\x20minutes\x20to\x20process'}),a9_0x38e83d('p',{'children':'â€¢\x20This\x20is\x20normal\x20for\x20international\x20cards'}),a9_0x38e83d('p',{'children':'â€¢\x20You\x27ll\x20receive\x20email\x20confirmation\x20when\x20complete'})]}),_0x32e015==='check-email'&&a9_0x3bd80f(a9_0x3943e4,{'children':[a9_0x38e83d('p',{'children':'â€¢\x20Check\x20your\x20email\x20for\x20payment\x20confirmation'}),a9_0x38e83d('p',{'children':'â€¢\x20Access\x20your\x20courses\x20from\x20the\x20button\x20below'}),a9_0x38e83d('p',{'children':'â€¢\x20Contact\x20support\x20if\x20you\x20don\x27t\x20receive\x20confirmation'})]}),_0x32e015==='failed'&&a9_0x3bd80f(a9_0x3943e4,{'children':[a9_0x38e83d('p',{'children':'â€¢\x20Your\x20payment\x20failed.\x20Please\x20try\x20again.'}),a9_0x38e83d('p',{'children':'â€¢\x20Contact\x20support\x20if\x20you\x20need\x20help'})]}),_0x32e015==='success'&&a9_0x3bd80f(a9_0x3943e4,{'children':[a9_0x38e83d('p',{'children':_0xa346de(0x87)}),a9_0x38e83d('p',{'children':'â€¢\x20Course\x20access\x20has\x20been\x20granted'}),a9_0x38e83d('p',{'children':'â€¢\x20Receipt\x20sent\x20to\x20your\x20email'})]})]}),a9_0x3bd80f('div',{'className':'mt-8 space-y-3','children':[_0x32e015==='success'&&a9_0x38e83d(a9_0x43f7da,{'href':'/my-courses','children':a9_0x38e83d(Button,{'className':'w-full','children':'Access\x20My\x20Courses'})}),_0x32e015==='check-email'&&a9_0x38e83d('a',{'href':'/my-courses','className':'w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors inline-block text-center font-medium','children':'Check\x20My\x20Courses'}),_0x32e015!=='success'&&a9_0x38e83d(a9_0x43f7da,{'href':_0xa346de(0x84),'className':'text-primary hover:text-primary/80 text-sm underline block text-center transition-colors','children':'Need\x20help?\x20Contact\x20Support'})]}),_0x32e015==='success'&&a9_0x38e83d('p',{'className':'text-xs text-muted-foreground pt-2','children':'You\x27ll\x20be\x20automatically\x20redirected\x20to\x20your\x20courses\x20in\x205\x20seconds...'})]})})});}export default function ProcessingPage(){return a9_0x38e83d(Suspense,{'fallback':a9_0x38e83d(Loader,{}),'children':a9_0x38e83d(ProcessingContent,{})});}
