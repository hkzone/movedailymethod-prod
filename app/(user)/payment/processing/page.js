"use client";

'use client';(function(_0x39fd7d,_0x3ec002){const _0x2ce402=a9_0x45ae,_0x36f3e5=_0x39fd7d();while(!![]){try{const _0x448bf0=-parseInt(_0x2ce402(0x85))/0x1+parseInt(_0x2ce402(0x78))/0x2*(-parseInt(_0x2ce402(0x7d))/0x3)+-parseInt(_0x2ce402(0x84))/0x4*(-parseInt(_0x2ce402(0x8d))/0x5)+-parseInt(_0x2ce402(0x7e))/0x6*(-parseInt(_0x2ce402(0x8b))/0x7)+-parseInt(_0x2ce402(0x7c))/0x8*(-parseInt(_0x2ce402(0x7f))/0x9)+-parseInt(_0x2ce402(0x82))/0xa+-parseInt(_0x2ce402(0x89))/0xb*(-parseInt(_0x2ce402(0x8f))/0xc);if(_0x448bf0===_0x3ec002)break;else _0x36f3e5['push'](_0x36f3e5['shift']());}catch(_0x46c6b8){_0x36f3e5['push'](_0x36f3e5['shift']());}}}(a9_0x5615,0x69793));import{jsx as a9_0x58a798,jsxs as a9_0x4c6880,Fragment as a9_0x18fb8a}from'react/jsx-runtime';import{Suspense}from'react';import{Loader}from'@/components/ui/loader';function a9_0x45ae(_0x56345c,_0x3e352b){const _0x561595=a9_0x5615();return a9_0x45ae=function(_0x45ae94,_0x556505){_0x45ae94=_0x45ae94-0x78;let _0x39da33=_0x561595[_0x45ae94];return _0x39da33;},a9_0x45ae(_0x56345c,_0x3e352b);}function a9_0x5615(){const _0xafcf7e=['success','3336040KMZCuD','3OTZliC','102ROftbL','9sMBZYS','div','/api/payment-events?sessionId=','4832490QsPkrt','•\x20Contact\x20support\x20if\x20you\x20need\x20help','3046888OiSJhc','776399bgbuGB','borderColor','error','connected','2764542lFgFDn','message','19607owmeYq','strong','5zuQeiH','status','48GzJqut','/my-courses','•\x20Contact\x20support\x20if\x20you\x20don\x27t\x20receive\x20confirmation','1079930PolUJG','Error\x20checking\x20initial\x20payment\x20status:','🔗\x20Establishing\x20SSE\x20connection\x20with\x20sessionId:'];a9_0x5615=function(){return _0xafcf7e;};return a9_0x5615();}import{useSearchParams,useRouter}from'next/navigation';import{useEffect,useState}from'react';import a9_0x3047f0 from'next/link';import{checkPaymentStatus}from'@/app/actions/checkPaymentStatus';import{CircleCheck}from'lucide-react';import{Button}from'@/components/ui/button';function ProcessingContent(){const _0x3f8c35=a9_0x45ae,_0x1b0417=useSearchParams(),_0x26b0e1=useRouter(),[_0x33d57a,_0x5d1ad5]=useState('processing'),[_0x4c4b6f,_0x44588f]=useState(0x0),[_0x3ee373,_0x4dcca4]=useState(''),_0x146c84=_0x1b0417['get']('provider')?.['toLowerCase']()||'unknown',_0x4c031f=_0x146c84['charAt'](0x0)['toUpperCase']()+_0x146c84['slice'](0x1),_0xf75cfd=_0x1b0417['get']('order');useEffect(()=>{const _0x5cd6f6=async()=>{const _0x538600=a9_0x45ae;if(!_0xf75cfd){_0x5d1ad5(_0x538600(0x87)),_0x4dcca4('No\x20order\x20reference\x20provided');return;}try{const _0x458437=await checkPaymentStatus(_0xf75cfd);if(_0x458437['status']==='completed'){_0x5d1ad5('success'),_0x4dcca4(_0x458437?.['message']||''),setTimeout(()=>{_0x26b0e1['push']('/my-courses');},0x1388);return;}else{if(_0x458437[_0x538600(0x8e)]==='error'){_0x5d1ad5('failed'),_0x4dcca4(_0x458437?.['message']||'');return;}else _0x5d1ad5('processing'),_0x4dcca4(_0x458437['message']||'');}}catch(_0x31d8b8){console['error'](_0x538600(0x79),_0x31d8b8),_0x5d1ad5('processing');}};_0x5cd6f6();},[_0xf75cfd,_0x26b0e1]),useEffect(()=>{const _0x2e0b16=a9_0x45ae;if(_0x33d57a!=='processing')return;const _0x1e017a=setInterval(()=>{_0x44588f(_0x3ec74a=>_0x3ec74a+0x1);},0x3e8),_0x59d01f=setInterval(async()=>{const _0x1ec9f0=a9_0x45ae;if(_0xf75cfd&&_0x33d57a==='processing')try{const _0x4cc434=await checkPaymentStatus(_0xf75cfd);_0x4cc434['status']==='completed'&&(_0x5d1ad5('success'),_0x4dcca4(_0x4cc434[_0x1ec9f0(0x8a)]||''),setTimeout(()=>{_0x26b0e1['push']('/my-courses');},0x1388));}catch(_0x354683){console['error']('Error\x20in\x20periodic\x20status\x20check:',_0x354683);}},0x7530);let _0x33798b=null;if(_0xf75cfd){console['log'](_0x2e0b16(0x7a),_0xf75cfd);const _0x40c929=_0x2e0b16(0x81)+encodeURIComponent(_0xf75cfd);console['log']('🌐\x20SSE\x20URL:',_0x40c929),_0x33798b=new EventSource(_0x40c929),_0x33798b['onopen']=()=>{console['log']('✅\x20SSE\x20connection\x20opened\x20successfully');},_0x33798b['onmessage']=_0x2783cd=>{const _0x1c7da0=_0x2e0b16;try{const _0x2d9cbc=JSON['parse'](_0x2783cd['data']);console['log']('📨\x20Received\x20payment\x20update:',_0x2d9cbc);switch(_0x2d9cbc['type']){case _0x1c7da0(0x88):console['log']('Connected\x20to\x20payment\x20updates');break;case'payment_approved':_0x5d1ad5('success'),_0x4dcca4(_0x2d9cbc['message']),setTimeout(()=>{_0x26b0e1['push']('/my-courses');},0x1388);break;case'payment_failed':_0x5d1ad5('failed'),_0x4dcca4(_0x2d9cbc['message']),setTimeout(()=>{_0x26b0e1['push'](_0x2d9cbc['redirectUrl']);},0xbb8);break;case'payment_pending':_0x4dcca4(_0x2d9cbc['message']);break;}}catch(_0x151d9c){console[_0x1c7da0(0x87)]('Error\x20parsing\x20SSE\x20data:',_0x151d9c);}},_0x33798b['onerror']=_0x16dd43=>{console['error']('❌\x20SSE\x20connection\x20error:',_0x16dd43),console['log']('📊\x20SSE\x20readyState:',_0x33798b?.['readyState']),_0x5d1ad5('still-processing');};}const _0x170382=[setTimeout(()=>{_0x33d57a==='processing'&&_0x5d1ad5('still-processing');},0xea60),setTimeout(()=>{(_0x33d57a==='processing'||_0x33d57a==='still-processing')&&_0x5d1ad5('check-email');},0x2bf20)];return()=>{clearInterval(_0x1e017a),clearInterval(_0x59d01f),_0x170382['forEach'](_0x3f3b83=>clearTimeout(_0x3f3b83)),_0x33798b&&_0x33798b['close']();};},[_0x33d57a,_0xf75cfd,_0x26b0e1]);const _0x280ce3=()=>{switch(_0x33d57a){case'success':return{'title':'Payment\x20Confirmed!\x20','message':_0x3ee373||'Your\x20payment\x20has\x20been\x20approved!\x20Redirecting...','color':'text-success','bgColor':'bg-success/10','borderColor':'border-success/20'};case'failed':return{'title':'Payment\x20Failed\x20','message':_0x3ee373||'Your\x20payment\x20could\x20not\x20be\x20processed.','color':'text-destructive','bgColor':'bg-destructive/10','borderColor':'border-destructive/20'};case'still-processing':return{'title':'Still\x20Processing...','message':_0x3ee373||'Your\x20'+_0x4c031f+'\x20payment\x20is\x20taking\x20a\x20bit\x20longer\x20than\x20usual.\x20This\x20is\x20normal\x20for\x20some\x20payments.','color':'text-warning','bgColor':'bg-warning/10','borderColor':'border-warning/20'};case'check-email':return{'title':'Check\x20Your\x20Email','message':'Your\x20payment\x20confirmation\x20will\x20be\x20sent\x20via\x20email.\x20You\x20can\x20also\x20check\x20your\x20course\x20access\x20in\x20\x22My\x20Courses\x22.','color':'text-success','bgColor':'bg-success/10','borderColor':'border-success/20'};default:return{'title':'Processing\x20Your\x20Payment','message':_0x3ee373||'We\x27re\x20confirming\x20your\x20payment\x20with\x20'+_0x4c031f+'.\x20This\x20usually\x20takes\x20a\x20few\x20moments.','color':'text-info','bgColor':'bg-info/10','borderColor':'border-info/20'};}},_0x573971=_0x280ce3();return a9_0x58a798('div',{'className':'min-h-screen flex items-center justify-center px-[5%]','children':a9_0x58a798('div',{'className':'container','children':a9_0x4c6880('div',{'className':'max-w-md w-full mx-auto p-8 bg-card text-card-foreground rounded-xl border border-border shadow-lg text-center','children':[a9_0x58a798('div',{'className':'mb-6','children':_0x33d57a==='success'?a9_0x58a798(CircleCheck,{'className':'w-16 h-16 mx-auto text-success'}):a9_0x58a798(Loader,{'className':'w-16 h-16 mx-auto border-t-primary'})}),a9_0x58a798('h1',{'className':'text-2xl\x20font-bold\x20mb-4\x20'+_0x573971['color'],'children':_0x573971['title']}),a9_0x58a798('p',{'className':'mb-6 text-foreground/80','children':_0x573971['message']}),_0x4c4b6f>0x0&&_0x33d57a==='processing'&&a9_0x4c6880('p',{'className':'text-sm text-muted-foreground mb-4','children':['Time\x20elapsed:\x20',Math['floor'](_0x4c4b6f/0x3c),':',(_0x4c4b6f%0x3c)['toString']()['padStart'](0x2,'0')]}),a9_0x58a798(_0x3f8c35(0x80),{'className':(_0x573971['bgColor']||'bg-info/10')+'\x20border\x20'+(_0x573971[_0x3f8c35(0x86)]||'border-info/20')+'\x20rounded-lg\x20p-4\x20mb-6','children':a9_0x4c6880('div',{'className':'flex items-center','children':[a9_0x58a798('div',{'className':'flex-shrink-0','children':_0x33d57a==='success'?a9_0x58a798('svg',{'className':'h-5 w-5 text-success','fill':'none','stroke':'currentColor','viewBox':'0\x200\x2024\x2024','children':a9_0x58a798('path',{'strokeLinecap':'round','strokeLinejoin':'round','strokeWidth':0x2,'d':'M9\x2012l2\x202\x204-4m6\x202a9\x209\x200\x2011-18\x200\x209\x209\x200\x200118\x200z'})}):a9_0x58a798('svg',{'className':'h-5 w-5 text-info','viewBox':'0\x200\x2020\x2020','fill':'currentColor','children':a9_0x58a798('path',{'fillRule':'evenodd','d':'M18\x2010a8\x208\x200\x2011-16\x200\x208\x208\x200\x200116\x200zm-7-4a1\x201\x200\x2011-2\x200\x201\x201\x200\x20012\x200zM9\x209a1\x201\x200\x20000\x202v3a1\x201\x200\x20001\x201h1a1\x201\x200\x20100-2v-3a1\x201\x200\x2000-1-1H9z','clipRule':'evenodd'})})}),a9_0x58a798('div',{'className':'ml-3','children':_0x33d57a==='success'?a9_0x4c6880('p',{'className':'text-sm','children':[a9_0x58a798(_0x3f8c35(0x8c),{'children':'Payment\x20Confirmed!'}),'\x20You\x20now\x20have\x20access\x20to\x20your\x20purchased\x20content.\x20Check\x20your\x20email\x20for\x20the\x20receipt.']}):a9_0x4c6880('p',{'className':'text-sm','children':[a9_0x58a798('strong',{'children':'Processing:'}),'\x20We\x27ll\x20update\x20you\x20automatically\x20when\x20your\x20payment\x20is\x20confirmed.\x20You\x27ll\x20also\x20receive\x20an\x20email\x20confirmation.']})})]})}),a9_0x4c6880('div',{'className':'space-y-2 text-sm text-muted-foreground','children':[_0x33d57a==='processing'&&a9_0x4c6880(a9_0x18fb8a,{'children':[a9_0x58a798('p',{'children':'•\x20Payment\x20confirmation\x20usually\x20takes\x2030-60\x20seconds'}),a9_0x58a798('p',{'children':'•\x20You\x27ll\x20receive\x20an\x20email\x20confirmation'}),a9_0x58a798('p',{'children':'•\x20Please\x20keep\x20this\x20page\x20open'})]}),_0x33d57a==='still-processing'&&a9_0x4c6880(a9_0x18fb8a,{'children':[a9_0x58a798('p',{'children':'•\x20Some\x20payments\x20take\x20up\x20to\x203\x20minutes\x20to\x20process'}),a9_0x58a798('p',{'children':'•\x20This\x20is\x20normal\x20for\x20international\x20cards'}),a9_0x58a798('p',{'children':'•\x20You\x27ll\x20receive\x20email\x20confirmation\x20when\x20complete'})]}),_0x33d57a==='check-email'&&a9_0x4c6880(a9_0x18fb8a,{'children':[a9_0x58a798('p',{'children':'•\x20Check\x20your\x20email\x20for\x20payment\x20confirmation'}),a9_0x58a798('p',{'children':'•\x20Access\x20your\x20courses\x20from\x20the\x20button\x20below'}),a9_0x58a798('p',{'children':_0x3f8c35(0x91)})]}),_0x33d57a==='failed'&&a9_0x4c6880(a9_0x18fb8a,{'children':[a9_0x58a798('p',{'children':'•\x20Your\x20payment\x20failed.\x20Please\x20try\x20again.'}),a9_0x58a798('p',{'children':_0x3f8c35(0x83)})]}),_0x33d57a==='success'&&a9_0x4c6880(a9_0x18fb8a,{'children':[a9_0x58a798('p',{'children':'•\x20Payment\x20confirmed\x20and\x20processed'}),a9_0x58a798('p',{'children':'•\x20Course\x20access\x20has\x20been\x20granted'}),a9_0x58a798('p',{'children':'•\x20Receipt\x20sent\x20to\x20your\x20email'})]})]}),a9_0x4c6880('div',{'className':'mt-8 space-y-3','children':[_0x33d57a==='success'&&a9_0x58a798(a9_0x3047f0,{'href':_0x3f8c35(0x90),'children':a9_0x58a798(Button,{'className':'w-full','children':'Access\x20My\x20Courses'})}),_0x33d57a==='check-email'&&a9_0x58a798('a',{'href':'/my-courses','className':'w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors inline-block text-center font-medium','children':'Check\x20My\x20Courses'}),_0x33d57a!=='success'&&a9_0x58a798(a9_0x3047f0,{'href':'mailto:support@movedailymethod.com','className':'text-primary hover:text-primary/80 text-sm underline block text-center transition-colors','children':'Need\x20help?\x20Contact\x20Support'})]}),_0x33d57a===_0x3f8c35(0x7b)&&a9_0x58a798('p',{'className':'text-xs text-muted-foreground pt-2','children':'You\x27ll\x20be\x20automatically\x20redirected\x20to\x20your\x20courses\x20in\x205\x20seconds...'})]})})});}export default function ProcessingPage(){return a9_0x58a798(Suspense,{'fallback':a9_0x58a798(Loader,{}),'children':a9_0x58a798(ProcessingContent,{})});}
