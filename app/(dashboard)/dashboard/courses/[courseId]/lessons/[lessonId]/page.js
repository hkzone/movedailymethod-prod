(function(_0x1ca997,_0xed39b5){const _0x19d1a2=a2_0x3623,_0x51f14f=_0x1ca997();while(!![]){try{const _0x2a6b0b=parseInt(_0x19d1a2(0xcb))/0x1+-parseInt(_0x19d1a2(0xc6))/0x2+-parseInt(_0x19d1a2(0xca))/0x3+parseInt(_0x19d1a2(0xd1))/0x4*(-parseInt(_0x19d1a2(0xc5))/0x5)+parseInt(_0x19d1a2(0xcc))/0x6+-parseInt(_0x19d1a2(0xc8))/0x7+parseInt(_0x19d1a2(0xc7))/0x8;if(_0x2a6b0b===_0xed39b5)break;else _0x51f14f['push'](_0x51f14f['shift']());}catch(_0x11c0d5){_0x51f14f['push'](_0x51f14f['shift']());}}}(a2_0x40d9,0x1d569));import{jsx as a2_0x5d36aa,jsxs as a2_0x467388}from'react/jsx-runtime';import{redirect}from'next/navigation';import{currentUser}from'@clerk/nextjs/server';import{getLessonById}from'@/sanity/lib/lessons/getLessonById';import{PortableText}from'@portabletext/react';function a2_0x3623(_0x2447d3,_0x2b8dd1){const _0x40d974=a2_0x40d9();return a2_0x3623=function(_0x3623d5,_0x33dfce){_0x3623d5=_0x3623d5-0xc4;let _0x2312cb=_0x40d974[_0x3623d5];return _0x2312cb;},a2_0x3623(_0x2447d3,_0x2b8dd1);}import{LoomEmbed}from'@/components/LoomEmbed';import{VideoPlayer}from'@/components/VideoPlayer';import{LessonCompleteButton}from'@/components/LessonCompleteButton';import{Download,FileText}from'lucide-react';import a2_0x517bca from'next/link';import{formatFileSize}from'@/lib/utils';function a2_0x40d9(){const _0x22932c=['span','552KQttSK','loomUrl','size','7260lMydAQ','474302NaDkQw','4660064eAYMYj','94899AnobPu','content','553050UCCWqa','168073VTGjUn','30132UMUfkY','hidden\x20md:inline','materials','Lesson\x20Materials'];a2_0x40d9=function(){return _0x22932c;};return a2_0x40d9();}export default async function LessonPage({params:_0x3ede18}){const _0x3ff169=a2_0x3623,_0x31bd41=await currentUser(),{courseId:_0x2098de,lessonId:_0x5a112e}=await _0x3ede18,_0x24bec6=await getLessonById(_0x5a112e);if(!_0x24bec6)return redirect('/dashboard/courses/'+_0x2098de);return a2_0x467388('div',{'className':'h-full flex flex-col overflow-hidden relative','children':[a2_0x5d36aa('div',{'className':'flex-1 overflow-y-auto pb-20','children':a2_0x467388('div',{'className':'max-w-4xl mx-auto pt-12 px-4','children':[a2_0x5d36aa('h1',{'className':'text-2xl font-bold mb-4','children':_0x24bec6['title']}),_0x24bec6['description']&&a2_0x5d36aa('p',{'className':'text-muted-foreground mb-8','children':_0x24bec6['description']}),a2_0x467388('div',{'className':'space-y-8','children':[_0x24bec6['videoUrl']&&a2_0x5d36aa(VideoPlayer,{'url':_0x24bec6['videoUrl']}),_0x24bec6[_0x3ff169(0xd2)]&&a2_0x5d36aa(LoomEmbed,{'shareUrl':_0x24bec6['loomUrl']}),_0x24bec6[_0x3ff169(0xc9)]&&a2_0x467388('div',{'children':[a2_0x5d36aa('h2',{'className':'text-xl font-semibold mb-4','children':'Lesson\x20Notes'}),a2_0x5d36aa('div',{'className':'prose prose-blue dark:prose-invert max-w-none','children':a2_0x5d36aa(PortableText,{'value':_0x24bec6['content']})})]}),_0x24bec6['materials']&&_0x24bec6['materials']['length']>0x0&&a2_0x467388('div',{'className':'mt-8 pt-6 border-t','children':[a2_0x5d36aa('h2',{'className':'text-xl font-semibold mb-4','children':_0x3ff169(0xcf)}),a2_0x5d36aa('ul',{'className':'space-y-3','children':_0x24bec6[_0x3ff169(0xce)]['map'](_0x14258d=>_0x14258d?.['asset']?.['url']?a2_0x467388('li',{'className':'flex items-center justify-between p-3 bg-card border rounded-lg hover:shadow-sm transition-shadow','children':[a2_0x467388('div',{'className':'flex items-center gap-3 overflow-hidden','children':[a2_0x5d36aa(FileText,{'className':'h-6 w-6 text-primary flex-shrink-0'}),a2_0x467388('div',{'className':'flex flex-col overflow-hidden','children':[a2_0x5d36aa(_0x3ff169(0xd0),{'className':'font-medium truncate','title':_0x14258d['title']||_0x14258d['asset']['originalFilename']||'Downloadable\x20File','children':_0x14258d['title']||_0x14258d['asset']['originalFilename']||'Downloadable\x20File'}),(_0x14258d['asset'][_0x3ff169(0xc4)]||_0x14258d['asset']['extension'])&&a2_0x467388('span',{'className':'text-xs text-muted-foreground','children':[_0x14258d['asset']['size']?formatFileSize(_0x14258d['asset']['size']):'',_0x14258d['asset']['extension']&&'\x20('+_0x14258d['asset']['extension']['toUpperCase']()+')']})]})]}),a2_0x467388(a2_0x517bca,{'href':_0x14258d['asset']['url'],'target':'_blank','rel':'noopener\x20noreferrer','download':_0x14258d['asset']['originalFilename']||!![],'className':'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-3 shrink-0 ml-2','children':[a2_0x5d36aa(Download,{'className':'h-4 w-4 md:mr-2'}),a2_0x5d36aa('span',{'className':_0x3ff169(0xcd),'children':'Download'})]})]},_0x14258d['_key']):null)})]})]})]})}),a2_0x5d36aa('div',{'className':'fixed bottom-0 left-20 lg:left-96 right-0 bg-background/95 backdrop-blur-sm border-t p-4','children':a2_0x5d36aa('div',{'className':'max-w-4xl mx-auto flex justify-end','children':a2_0x5d36aa(LessonCompleteButton,{'lessonId':_0x24bec6['_id'],'clerkId':_0x31bd41['id']})})})]});}